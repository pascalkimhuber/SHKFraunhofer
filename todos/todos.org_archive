#    -*- mode: org -*-


Archived entries from file /home/huber/Work/todos/todos.org




* TODO 14.7 Bonded potentials and measuring bonds
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-11 Sat 12:00
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Go through tutorials and manual (find mistakes)/Notizen/Tutorial
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: TODO
  :END:
Till here, only non-bonded interactions has been covered. In order to introduce connected atoms, one has the following to do:
1. set the indices in the appropriate column in the =*.data=-file
2. specify bonded potentials in the =*.potentials=-file.

The bond type covered here is a harmonic potential named =bond= (can be imagined like a spring between the atoms).
This type of bond cannot be broken. It is characterized by a restoring force proportional to the deflection from the minimal energy distance r_0.

In this example: Consider Butane (C_4H_10) and measure bond distances. There are three atom types:
1. C in CH_3: methyl-carbon
2. Ci in CH_2: methylene-carbon
3. H: Hydrogen

We will set up this example.

1. in =*.data= file
   - The atoms data is set as usual.
   - A fourth column =neighbors=4= is added. This 4 new columns contain the indices of the neighboring atoms.
2. in =*.potentials= file
   - first introduce the Lennard Jones potentials acting between the molecules. Tremolo-X handles Lennard Jones in bonded molecules in a way, that the potential is *not* calculated among direct neighbors.
   - second the bonded potentials are set. These are: =bonds=, =angles=, =torsions=. The parameters are taken from AMBER94 force field.

* DONE Go through tutorials and manual (find mistakes)
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-21 Tue 12:19
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

** DONE Bemerkungen
- vielleicht eine Hinweis, wie man an das Manual kommt?
- page 7 :: Letzter Satz: missing "of" after "... detailed specification"
- page 11 :: Erster Satz: es heisst =examples/Argon/= nicht =example/Argon/=.
- page 17 :: Verstehe nicht den Satz in der Klammer im Abschnitt /parallelepiped/
- page 105 :: Dritter Satz fehlendes "s" in "exist"
- Erhalte Warnung bei Aufruf von tremolo in Tutorial 14.1: =WARNING: Definition of unit system in the tremolo file is deprecated and may not be supported in future versions of tremolo. Define the unit system in the .potentials file instead.=
- page 107 :: oben, es fehlt "use a" in1 /Since that introduces a discontinuity, we also second potential, which .../
- page 107 :: superfluous colon after /...not a dynamic simulation./ before the second grey box.
- page 108 :: do not understand the part about the /optimization/ block.
- page 108 :: in the part about the /output/ block: what is the difference between visuals and particle data?



** DONE Notizen
*** Overview
Das Tremolo Projekt besteht aus zwei Funktionalitaeten:
a. sequentielle Simulation
b. parallele Simulation

1. Different capabilities of tremolo
   - ensembles
   - integrators
   - thermostats
2. In-depth description of the different potentials
3. Detailed specification of the syntax of options in the parameter file.

*** First steps
Start a tremolo simulation. Example:
Go to =tremole/examples/Argon/= and type =tremolo argon.tremolo=. This starts the simulation specified in the =*.tremolo= file.

*** Ensembles and Thermostats
Es gibt unter anderem folgende Funktionalitaeten:
1. Propagators
2. Thermostats
3. Barostats


*** DONE Tutorial
        Kopie des Ordners =/tremolo/tutorial= befindet sich auf =~/playground/=.

**** DONE 14.1 Optimizing an initial particle setup
         Often optimization of the particle distribution must be done, since the distribution is non-optimal creating local energy spikes which affect stability of the simulation.
         Thus the particle position are slightly modified towards a (static) energy minimum.

         1. Write a =*.tremolo=-file containing:
  - defaultpath (has to be set!)
  - projectname (all files will carry this name)
  - comment
  - systemofunits
  - base magnitudes for the system of units used.

        2. Write a =*.potentials=-file containing the potentials.
  1. particles : Contains all particle types in the simulation:
        - particle_type
        - element_name
        - mass
        - sigma, sigma14, epsilon, epsilo14
  2. potentials to be used in between particles

  3. Write a =*.validates=-file containing:
  - validates the use of particles
  - decide which potential should be used

        4. Write a =*.parameters=-file containing
  - the type of simulation (optimization, dynamic simulation)
  - parameters concerning the domain and the cells
  - options for parametrization (? here optimization...)
  - type and intervals of output

        5. Write a =*.data=-file containing the initial particle positions in a special format
  - in the first line starting with =# ATOMDATA= the layout of the particle lsit ist set.
  - in the second line starting with =# INPUTCONV= some manipulation of the data can be set (here the temperature)

        6. Start the simulation using =tremolo -v *.tremolo=. The optimized particle positions are written to =*.data.9999=.

***** DONE Exercises:
          1. Das Partikel mit ID 12 verlaesst das Gebiet (Positionen mit Koordinaten um die 1e+08). Dies geschiet wahrschenlich dadurch, dass durch den groessen Praefaktor das Partikle direct auf ein benachbartes Partikel gesetzt wird. Durch die Abstossung durch das Potenzial, erhaelt das Partikel ein sehr hohe Geschwindigkeit und verlaesst das Gebiet.
          2. Die Potentielle Energie ist zu Beginn sehr gross (ca. 2.6e+10), allerdings nur wenige Zeitschritte, (hier nur 2.) unmittelbar nach Beginn der Optimierung, nimmt die Energie schlagartig ab (auf ca. -1.78, ab dem 7. Zeitschritt), danach konvigiert die Energie nur noch langsam zu einem Minimum (-1.15e+10).



**** DONE 14.2 Setting up a basic simulation
         After the optimization phase a basic simulation can be done.

         1. in the =*.parameters=-file:
  - change the integration type from "optimization" to "dynamics": =integration: type=dynamics=
  - Add new block to file consisting of the parameters of the dynamics:
        - =ensemble=NVE= particle number, volume, total energy are constant
        - choose integrator (propagator), e.g. =verlet=
        - choose time steps and intervall
  - Add anlysis sub-block to output-block to analyse velocity distribution of the particles:

        2. make sure to use the optimized =*.data=-files:
  - always copy original data file somewhere safe
  - rename =*.data.9999= as =*.data=

        3. run simulation by the usual command

***** DONE Exercises
1. Die Gesamtenergie des Ensembles ist fast vollstaendig durch die kinetische Energie gegeben. Die potentielle Energie ist fast null, waehrend die kinetische Energie etwa 2000 ist. Desweiteren gibt es kleinste Schwankungen in den Energien.
2. ? Wie kann man das anstaendig plotten?
3. Die Simulation bricht sofort ab mit der Fehlermeldung =Particle leaving simulation territory! Me:0 Particle-Id:12 (-8.547802e+05,-1.965304e+06,1.373152e+07) Process 0: Error in file ../../src/./update.c, line 1209 (0): SomeError: Particle leaving across a nonopen border. Simulation aborted.  Maybe the ensemble requires additional optimization?=
4. Die Messung von Durchschnittsenergien, kann duch hinzufuegen von =meanmeasure=on= im =*.parameters=-file aktiviert werden. Die Energien sind wie erwartet gemittelt worden und dabei im wesentlichen konstant. Grob gesehen ergeben sich die gleichen Energien wie schon im ungemittelten Fall.
5. Durch die Temperaturerhoehung erhoeht sich auch die kinetische Energie der Teilchen, waehrend die potentielle Energie unveraendert bleibt. Ansonsten gibt es keine Aenderungen.



**** DONE 14.3 Using the Berendsen thermostat
         Using the first of two defferent thermostats.

         1. in =*.parameters=-file:
                - change the ensemble from =NVE= to =NVT= in order to hold the temperature constant instead of the total energy.
                - add a =thermostat= sub-block in order to supply details for the berendsen thermostat.

***** DONE Exercises
1. Zum Startzeitpunkt ist sowohl die Gesamt- als auch die kinetsiche Energie recht hoch (ueber 2300), einen Zeitschritt spaeter sinken beide Energie schlagartig auf unter 2000 ab und bleibt anschliessend konstant. Die potentielle Energie ist konstant fast 0.
2. Ich sehe gar keinen Unterschied...


**** DONE 14.4 An alternative: The Nose-Hoover-thermostat
         Introduce second type of thermostat.

         1. in =*.parameters=-file:
                - Change the propagator (velocity integrator necessary for the Nose-Hoover thermostat)
                - set state of =berendsen= in the =thermostat= sub-block to off
                - add =nosehoover=-thermostat to =thermostat= block

***** DONE Exercises
1. Die Kinetische und die Gesamtenergie oszillieren jetzt genauso wie die Temperatur. Die potentielle Energie ist weiterhin konstant bei etwa 0.
2. Fuer hoehere Temperaturen vergroessern sich die Amplituden. Fuer hoehere virtuelle Massen steigt die Frequenz der Oszillationen (ersten Grades...)


**** DONE 14.5 Optimizing the domain
         Sometimes it is not possible to determine the optimal size of the domain prior to the simulation.
         We can use the optimization phase to determine the size of the domain. For that we allow to scale the box in order to minimize the potential energy.

         1. in =*.parameters=-file
                - Add =simucell= lines in the =optimization= block. The first line contains the parameters for the cell optimization (in general the as for the particles). The second line can be used to specify some constraints.
                - Add a parameter to the =common= block for an external pressure value (=extpressure=).
         2. after the simulation is finished the =# Box= line contains a box matrix entry. The values must be transfered to the parameter file (will be described in next lesson).

***** DONE Exercises
1. Making a small table:
   |       extpressure | box coordinates                                                                                                                                       |
   |-------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------|
   |      0.0024455185 | # Box    7.457397e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.457397e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.457397e+01 |
   |       0.024455185 | # Box   7.370456e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370456e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370456e+01  |
   |        0.24455185 | # Box   7.370444e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370444e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370444e+01  |
   |         2.4455185 | # Box   7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01  |
   |          24455185 | # Box   7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01  |
   | 0.000000024455185 | # Box  7.774622e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.774622e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.774622e+01   |
   Also, je groesser =extpressure= desto kleiner die Box. Das heißt Box Größe und =extpressure= sind umgekehrt proportional.
2. Setze =XX=0= und erhalte =# Box	7.775000e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.557398e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.557398e+01=.
   Es faellt auf, dass die Box nun nicht mehr quadratisch ist. Durch die Änderung kann sich die x-Komponente des ersten Ecken-Vektors nicht mehr veraendern, so dass eine Dimension fixiert ist. (=Xk= bezeichnet die =k= Komponente des =X=-Ecken-Vektors. Hierbei ist =X= \in {=X=, =Y=, =Z=}).
3. Setze =XY=1=. Betrachte nun folgende Werte fuer =constraint=
   - =isotropic= :: Keine Optimierung moeglich, da fuer =isotropic= die sekundären Achsen auf 0 gesetzt werden müssen. Fehlermeldung: =For isotropic box optimization constraintmap entries must be restricted to xx, yy and zz.=
   - =standard= :: Keine Optimierung moeglich: Fehlermeldung: =Constraintmap entry yx must match xy=. Wenn =XY= und =YX= auf 1 gesetzt werden erhaelt man: =# Box	7.457272e+01	0.000000e+00	0.000000e+00	-7.979795e-04	7.457325e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.457594e+01=.
                                   Das heisst die Box ist kein Quader mehr, sondern ein Parallelepiped, in der die Kanten =Y= nicht mehr parallel zur Achse verlaufen.
   - =symmetric= :: Keine Optimierung moeglich: Fehlermeldung: =Constraintmap entry yx must match xy=. Setze =XY= und =YX= auf 1. Erhalte: =# Box	7.457272e+01	-8.014574e-04	0.000000e+00	-8.014574e-04	7.457325e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.457594e+01=.
                                        Wieder ein Parallepiped. Was ist der Unterschied zu =standard=?



**** DONE 14.6 Introducing barostats.
         Instad of isothermic conditions, one often needs isobaric ones. For this one can allow the volume to change and set a barostat similarly to the thermostat.

         1. in the =*.parameters=-file:
                - add a =barostat= sub-block right under the =thermostat= block. In the block one can set: which barostat is used, if constant pressure is wished (in reduced units!), and constraints regarding the variation of the volume.
         2. in order to start a simulation, the box specifications of the =*.parameters= file and those in the =*.data= file are different. Thus one has to change the box information in the =*.parameters= file.


***** TODO Notes
          - Choosing delta_T=5e-3 I get the following error: =Process 0: Error in file ../../src/./helpers.c, line 2066 (0): SomeError: HooverEta is NaN! Error with implicitely solved Hoover-Nose-Thermostat. Please check whether structure is sufficiently and satisfactorily optimized ...: No such file or directory=
          - I am not receiving any error messages if I set the size of the cube in =*.parameters= to 1 and do not touch the =*.data= file, even if the values are different!

***** DONE Exercises.
          1. Fuer =Pressure=0.0024455185= erhalte ich die folgenden Werte: =# Box	7.579774e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.579774e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.579774e+01=. Mache wieder eine Tabelle:
                 |       Pressure | Box size                                                                                                                                              |
                 |----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------|
                 |   0.0024455185 | # Box    7.579774e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.579774e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.579774e+01 |
                 | 0.000024455185 | # Box  4.071469e+02    0.000000e+00    0.000000e+00    0.000000e+00    4.071469e+02    0.000000e+00    0.000000e+00    0.000000e+00    4.071469e+02   |
                 |    0.024455185 | # Box  5.323637e+01    0.000000e+00    0.000000e+00    0.000000e+00    5.323637e+01    0.000000e+00    0.000000e+00    0.000000e+00    5.323637e+01   |
                 Je groesser also der Druck, desto kleiner wird die Box. Darueber hinaus dauert die Simulation fuer geringe Druecke deutlich laenger, was wohl auf die erhoehte Anzahl an Zellen zurueckzufuehren ist. Fuer sehr hohe Druecke laeuft die Simulation nicht, da die Box dann zu klein wird.
          2. Setze =xx=0=. Erhalte Fehlermeldung: =For isotropic barostat conditon constraintmap entry xx must be set to 1.=. Setze =type=standard=. Erhalte nun folgende Werte: =7.457398e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.653474e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.544635e+01=.
                 Stelle fest, dass die Werte der ersten Koordinate (=xx=) sich nicht veraendert haben, waehrend die Werte von =yy= und =zz= etwas groesser sind (und auch etwas groesser als im vorigen Fall).
          3. Setze =xy=1=. Wie schon bei der Box-Optimierung muss dann =yx= auch auf eins gesetzt werden. Erhalte =# Box	9.568149e+01	0.000000e+00	0.000000e+00	-1.643221e+01	7.152647e+01	0.000000e+00	0.000000e+00	0.000000e+00	6.537388e+01=.
                 In diesem Fall aendert sich auch die =x=-Koordinate des =y=-Vektors.
          4. Setze =f_mass=1000=. Erhalte folgende Werte: =# Box	7.517290e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.517290e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.517290e+01=.
                 Die Box ist also etwas kleiner als im Fall =f_mass=1=. Also je groesser die fiktive Masse, (desto hoeher der Druck?), desto kleiner die Box.




**** DONE 14.7 Bonded potentials and measuring bonds
Till here, only non-bonded interactions has been covered. In order to introduce connected atoms, one has the following to do:
1. set the indices in the appropriate column in the =*.data=-file
2. specify bonded potentials in the =*.potentials=-file.

The bond type covered here is a harmonic potential named =bond= (can be imagined like a spring between the atoms).
This type of bond cannot be broken. It is characterized by a restoring force proportional to the deflection from the minimal energy distance r_0.

In this example: Consider Butane (C_4H_10) and measure bond distances. There are three atom types:
1. C in CH_3: methyl-carbon
2. Ci in CH_2: methylene-carbon
3. H: Hydrogen

We will set up this example.

1. in =*.data= file
   - The atoms data is set as usual.
   - A fourth column =neighbors=4= is added. This 4 new columns contain the indices of the neighboring atoms.
2. in =*.potentials= file
   - first introduce the Lennard Jones potentials acting between the molecules. Tremolo-X handles Lennard Jones in bonded molecules in a way, that the potential is *not* calculated among direct neighbors.
   - second the bonded potentials are set. These are: =bonds=, =angles=, =torsions=. The parameters are taken from AMBER94 force field.
3. in =*.parameters= file
   - in addition to the usual blocks, some bond measurement is introduced in the =analyze= subblock of =output=. Every pair undershooting the specified threshold =distance= is considered bonded.
         The Ids of the bonded pairs are written to the =*.info.bonds= (vis) file.

***** DONE Exercises
1. Erhoehe zunaechst die Temperatur: Eine hoehere Temperatur fuehrt dabei zu groesserer Oszillation. Das selbe sollte auch bei geringerer Verbindungskraft zu beobachten sein.
2. Erhoehe alle Gleichgewichtsabstaende um 1. Dadurch erhoehen sich auch die gemessenen Abstaende, allerdings nicht um den gleichen Abstand. Warum?



**** DONE 14.8 Tersoff potential and stress

Aim: Determine Young's Modulus of a single graphene sheet. Instead of defining fixed individual neighbors, the potential function will determine the spatial configuration of surrounding carbon atoms by itself.

1. in =*.potentials= file
   - A =tersoff= block is introduced containing all necessary parameters for tersoff potentials.
2. in =*.parameters= file
   - A =NPT=-ensemble is used
   - additionally to the external pressure a custom stress tensor is set. The stress tensor stretches the domain in =xx=-direction with linearly increasing strength startin from 0 to 1e5.
   - the box vectors need to be changed individually (why?)
   - in order to analyze the stress distribution along individual particles, one needs the =local_stress= feature.

3. Output: Plotting a *stress-strain diagram*:
   - The values can be found in the =*.mbox=-file:
         - strain: can be found by observing the =xx=-value of the box found in 43rd column
         - stress: can be found in 31st column
         - the =yy=-length of the box can be read in the 44th column

***** DONE Exercises
1. Aendere die stress Richtung in =yy= Richtung durch Aenderung an =stresstensor= im =*.parameters= File.
   Erhalte fuer E = 1.58273 mit einem asymptotischen Standard Fehler von +/- 0.2419 (15.28%). Insgesamt sieht die Kurve ganz anders aus... Verstehe ich nicht?
2. Bin mir nicht sicher, wie man die Relaxation-Zeit einstellt? Habe jetzt im Stresstensor eine dritte Zeile eingefuegt: =(0, 0, linear, 1, 0, 0, 0, 0,), (100, 0, linear, 1, 0, 0, 0, 0, 0), (200, 5e5, linear, 1, 0, 0, 0, 0, 0)];=.
   Hoffentlich stimmt's.
   Die Kurve des Plots waechst zunaechst sehr schnell an, und faellt schliesslich etwas langsamer auf null. Bruch? Als Moudulus erhalte ich =E=147.655= mit Fehler =+/- 1.273 (0.8624%)=



**** DONE 14.9 Long ranged potentials 1 - Halley's Comet with coulombic pair interaction

Covers how to set up simulation to use long ranged potentials like gravity or coulomb potential (characteristic: 1/|x|).
For these potentials, a cutoff produces significant errors on the forces.
Solution: Use an ordinary pair potential.
Here as an example we will calculate when Halley's Comet runs through its perihelion point.

1. Tremolo does not support a gravity potential. Instead of this the Coulomb potential is used (after adapting the units.)
2. in =*.parameters= file
   - in order to simulate the conditions of the solar system, a NVE ensemble with verlet propagator is used.
   - the box is choosen to be three times larger then the solar system and =leaving= boundary conditions are set.
   - the whole system is contained in one single cell, which is not good for parallelization but the only way to obtain accurate results using long ranged potentials.
   - a =coulomb= block is set up
   - in order to measure the distance between the Comet and the Barycenter, the bond distance measurement is used.
3. in =*.potentials= file
   - set up all the objects, note that the charge of the particles is set to its mass.

***** TODO Exercises
Problem: Erhalte keine Werte fuer die Abstaende. Es werden nur Nullen ausgegeben. Was geht da schief? Ausserdem wird waehrend der Simulation mitgeteilt, dass mehrere Partikel das Gebiet verlassen.




**** DONE 14.10 Long ranged potentials 2 - Sodium chloride with SPME

Typical usage scenario of coulomb forces in molecular dynamics with a large number of particles.
The potential is split in two parts:
- the short ranged part is calculated in a linked cell fashion as before
- the long ranged part is calculated by Ewald summation in fourier space for father particles
This is suitable for periodic systems of particles.
In this example solid NaCl is simulated and its radial distribution is measured.

1. in the =*.potentials= file
   - set up the short ranged interactions using the Tosi Fumi potential
2. in the =*.data= file
   - set up the starting configuration as a NaCl-structure with small random offset for each atom at 20 degrees celsius.
3. in the =*.parameters= file
   - NPT ensemble,
   - 1000hP pressure maintained by the Parrinello-Barostat, with isotropic constraint
   - Nose-Hoover-Thermostat for fixed temperature
   - =coulomb=-block: specify the parameters for the =spme= method
         - up to =r_cut= the short ranged part of the potential is used (like n2spline)
         - from there it is approximated by bell curves with splitting coefficient =G= (?!)
   - in =analyze=-block the measurement of the radial distribution is set up.

Since the SPME method is used, the parallel version of Tremolo-X has to be used: =tremolo_mpi -v *.tremolo=.

***** TODO Exercises
1. Die radiale Verteilung kann in =*.histogram= abgelesen und dann zum Beispiel mit Excel dargestellt werden. Es zeigt sich, dass es im Anfangszustand nur einzelne winzige Peaks gibt. Im Endzustand wird das Histogramm etwas verwischt. So dass mehrere Bins eine nicht triviale Anzahl von Atomen enthalten.
2. Erhoehe zunaechst die Temperatur auf 5 Grad Celsius. Mit hoeherer Temperatur verteilen sich die Werte fuer die radiale Verteilung auf mehr bins (d.h. die Peaks werden noch verwaschener...)



**** DONE 14.11 Melting point

Example for a common application of molecular dynamics: Determine the melting point of NaCl.
We are goint to use the /Voids method/. Explained [[http://scitation.aip.org/docserver/fulltext/aip/journal/jcp/136/14/1.3702587.pdf%3Fexpires%3D1389619185&id%3Did&accname%3D375729&checksum%3D95953424103DE090EC600A7A00E8088C][here (A comparison of methods for melting point calculation using molecular dynamics
simulations)]].

1. The simulation setup is similar to the previous tutorial apart from the thermostat settings and measurement settings.
2. in the =*.tremolo= file
   In order to carry out a series of simulations one can make use of the defaultpath-option in =*.tremolo=:
   - every simulation is set up in a subdirectory containing only the =*.data= and the =*.parameters= file
   - the remaining files are saved in the parent directory.
   - in this example the subdirectories are named by increasing number of cells with pair defect.



**** TODO The EAM potential - Observing phase transition in Metall

The "embedded atom method" (EAM) is a standard potential used in the analysis of metalls and alloys. In the following the EAM potential is used to analyze a phase transition.
A Fe-Ni nanoparticle is heated from 100K to 800K and the change of its lattice structure from bcc (body-centered cubic) to fcc (face-centered cubic)/ hcp (hexagonal close-packed) is observed.

1. in order to use EAM potentials, the EAM parameters must be provided by a file either with the "eam/fs" format oder the "eam/alloy" format.
   - the unit system of the eam parameters file determines the units which need to be used throughout the simulation.
2. in the =*.potentials= file
   - the particle parameters are inserted as usual.
   - the eam format and the filename is specified.
3. in the =*.parameters= file
   - a =domain= block is set as usual
   - a =dynamics= block is set as usual
   - an =ouput= block is set for measuring the radial ditribution

Beim Start der Simulation erhalte ich folgende Fehlermeldungen:
1. =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.external=
2. =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.exttypes=

**** DONE FRAGEN

1. [ ] Warum genau braucht man die Optimierung bei der Simulation? (Seite 105)

2. [X] Was ist der Unterschied zwischen "optimization" and "dynamic simulation"?

3. [ ] Was heisst, dass Optimierung durch das CG-Verfahren durchgefuehrt werden muss? (Seite 108) Verstehe den ganzen Abschnitt zum Block "optmization" in =*.parameters=-file nicht...

4. [ ] Was sind die pdb files?

5. [ ] Was sind E_kin_group und e_tot+hoover in den ekin bzw. etot files?

6. [ ] Temperaturen koennen im =*.ekin= File betrachtet werden?

7. [ ] Kann es sein, dass ab Kapitel 14.3 die Listings im Tutorial und die Dateien aus =/tutorials= nicht ganz uebereinstimmen? Im Ordner fuer Kapitel 14.4 sind schon Einstellungen fuer das naechste Kapitel....

8. [ ] Bei Box Optimization: Was ist der Unterschied zwischen =standard= und =symmetric=?

9. [ ] In 14.6 laeuft die Simulation nur fuer =delta_T=0.5e-3= und nicht fuer =delta_T=5e-3=. Warum?

10. [ ] Muss ich genau verstehen, was die Parameter der bonded potentials (Seite 122 und 123) sind?

11. [ ] Was sind die Zeilen "outvis", "outdata" und "outm" im =*.parameters= file. Fuer was braucht man "T_Delta" *und* "Step_Delta", zum Beispiel in Kapitel 14.7.

12. [ ] Kapitel 14.7: Verstehe nicht ganz was die "restlichen" Spalten im =*.generalmeas= file sein sollen.

13. [ ] Welches Programm zum Visualisieren verwenden? Habe ich Programme wie VMD-Viewer, Gnu Units?

14. [ ] Aufgaben zu 14.8: Wie fuegt man eine Relaxation Time hinzu? Einfach zusaetzliche Zeile im Stress-Tensor?

15. [ ] In 14.9: Warum wird der =coulomb= Block in das =*.parameters= File und nicht in das =*.potentials= File geschrieben?

16. [ ] In 14.12 Was ist mit den Fehlermeldungen?

17. [ ] Probleme mit den Aufgaben bei 14.6 und 14.9.


**** TODO Summary of problems:

- Kapitel 14.1 :: Programme zum Plotten? Warnung bei der Simulation: =WARNING: Definition of unit system in the tremolo file is deprecated and may not be supported in future versions of tremolo. Define the unit system in the .potentials file instead.=

- Kapitel 14.2 :: -

- Kapitel 14.3 :: -

- Kapitel 4.4 :: Was ist der Unterschied zwischen Nose-Hoover und Berendsen?

- Kapitel 4.5 :: Verstehe nicht ganz die Unterschiede fuer die =constraint types=.

- Kapitel 4.6 :: Erhalte Fehler fuer =delta_T=5e-3=: =Process 0: Error in file ../../src/./helpers.c, line 2066 (0): SomeError: HooverEta is NaN! Error with implicitely solved Hoover-Nose-Thermostat. Please check whether structure is sufficiently and satisfactorily optimized ...: No such file or directory=
                                 Dies ist nicht der Fall fuer =delta_T=0.5e3=.

- Kapitel 4.7 :: Generell: Was ist der Unterschied zwischen /bonded potentials/ und zum Beispiel /lennard jones/?

- Kapitel 4.8 :: in der Aufgabe: wie stellt man die Relaxation-Zeit ein?

- Kapitel 4.9 :: Erhalte keine Werte fuer die Abstaende (Nur nullen).

- Kapitel 4.10 :: -

- Kapitel 4.11 :: Erhalte Fehlermeldungen: =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.external=

* DONE Go through tutorials and manual (find mistakes)
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-21 Tue 12:20
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

** DONE Bemerkungen
- vielleicht eine Hinweis, wie man an das Manual kommt?
- page 7 :: Letzter Satz: missing "of" after "... detailed specification"
- page 11 :: Erster Satz: es heisst =examples/Argon/= nicht =example/Argon/=.
- page 17 :: Verstehe nicht den Satz in der Klammer im Abschnitt /parallelepiped/
- page 105 :: Dritter Satz fehlendes "s" in "exist"
- Erhalte Warnung bei Aufruf von tremolo in Tutorial 14.1: =WARNING: Definition of unit system in the tremolo file is deprecated and may not be supported in future versions of tremolo. Define the unit system in the .potentials file instead.=
- page 107 :: oben, es fehlt "use a" in1 /Since that introduces a discontinuity, we also second potential, which .../
- page 107 :: superfluous colon after /...not a dynamic simulation./ before the second grey box.
- page 108 :: do not understand the part about the /optimization/ block.
- page 108 :: in the part about the /output/ block: what is the difference between visuals and particle data?



** DONE Notizen
*** Overview
Das Tremolo Projekt besteht aus zwei Funktionalitaeten:
a. sequentielle Simulation
b. parallele Simulation

1. Different capabilities of tremolo
   - ensembles
   - integrators
   - thermostats
2. In-depth description of the different potentials
3. Detailed specification of the syntax of options in the parameter file.

*** First steps
Start a tremolo simulation. Example:
Go to =tremole/examples/Argon/= and type =tremolo argon.tremolo=. This starts the simulation specified in the =*.tremolo= file.

*** Ensembles and Thermostats
Es gibt unter anderem folgende Funktionalitaeten:
1. Propagators
2. Thermostats
3. Barostats


*** DONE Tutorial
        Kopie des Ordners =/tremolo/tutorial= befindet sich auf =~/playground/=.

**** DONE 14.1 Optimizing an initial particle setup
         Often optimization of the particle distribution must be done, since the distribution is non-optimal creating local energy spikes which affect stability of the simulation.
         Thus the particle position are slightly modified towards a (static) energy minimum.

         1. Write a =*.tremolo=-file containing:
  - defaultpath (has to be set!)
  - projectname (all files will carry this name)
  - comment
  - systemofunits
  - base magnitudes for the system of units used.

        2. Write a =*.potentials=-file containing the potentials.
  1. particles : Contains all particle types in the simulation:
        - particle_type
        - element_name
        - mass
        - sigma, sigma14, epsilon, epsilo14
  2. potentials to be used in between particles

  3. Write a =*.validates=-file containing:
  - validates the use of particles
  - decide which potential should be used

        4. Write a =*.parameters=-file containing
  - the type of simulation (optimization, dynamic simulation)
  - parameters concerning the domain and the cells
  - options for parametrization (? here optimization...)
  - type and intervals of output

        5. Write a =*.data=-file containing the initial particle positions in a special format
  - in the first line starting with =# ATOMDATA= the layout of the particle lsit ist set.
  - in the second line starting with =# INPUTCONV= some manipulation of the data can be set (here the temperature)

        6. Start the simulation using =tremolo -v *.tremolo=. The optimized particle positions are written to =*.data.9999=.

***** DONE Exercises:
          1. Das Partikel mit ID 12 verlaesst das Gebiet (Positionen mit Koordinaten um die 1e+08). Dies geschiet wahrschenlich dadurch, dass durch den groessen Praefaktor das Partikle direct auf ein benachbartes Partikel gesetzt wird. Durch die Abstossung durch das Potenzial, erhaelt das Partikel ein sehr hohe Geschwindigkeit und verlaesst das Gebiet.
          2. Die Potentielle Energie ist zu Beginn sehr gross (ca. 2.6e+10), allerdings nur wenige Zeitschritte, (hier nur 2.) unmittelbar nach Beginn der Optimierung, nimmt die Energie schlagartig ab (auf ca. -1.78, ab dem 7. Zeitschritt), danach konvigiert die Energie nur noch langsam zu einem Minimum (-1.15e+10).



**** DONE 14.2 Setting up a basic simulation
         After the optimization phase a basic simulation can be done.

         1. in the =*.parameters=-file:
  - change the integration type from "optimization" to "dynamics": =integration: type=dynamics=
  - Add new block to file consisting of the parameters of the dynamics:
        - =ensemble=NVE= particle number, volume, total energy are constant
        - choose integrator (propagator), e.g. =verlet=
        - choose time steps and intervall
  - Add anlysis sub-block to output-block to analyse velocity distribution of the particles:

        2. make sure to use the optimized =*.data=-files:
  - always copy original data file somewhere safe
  - rename =*.data.9999= as =*.data=

        3. run simulation by the usual command

***** DONE Exercises
1. Die Gesamtenergie des Ensembles ist fast vollstaendig durch die kinetische Energie gegeben. Die potentielle Energie ist fast null, waehrend die kinetische Energie etwa 2000 ist. Desweiteren gibt es kleinste Schwankungen in den Energien.
2. ? Wie kann man das anstaendig plotten?
3. Die Simulation bricht sofort ab mit der Fehlermeldung =Particle leaving simulation territory! Me:0 Particle-Id:12 (-8.547802e+05,-1.965304e+06,1.373152e+07) Process 0: Error in file ../../src/./update.c, line 1209 (0): SomeError: Particle leaving across a nonopen border. Simulation aborted.  Maybe the ensemble requires additional optimization?=
4. Die Messung von Durchschnittsenergien, kann duch hinzufuegen von =meanmeasure=on= im =*.parameters=-file aktiviert werden. Die Energien sind wie erwartet gemittelt worden und dabei im wesentlichen konstant. Grob gesehen ergeben sich die gleichen Energien wie schon im ungemittelten Fall.
5. Durch die Temperaturerhoehung erhoeht sich auch die kinetische Energie der Teilchen, waehrend die potentielle Energie unveraendert bleibt. Ansonsten gibt es keine Aenderungen.



**** DONE 14.3 Using the Berendsen thermostat
         Using the first of two defferent thermostats.

         1. in =*.parameters=-file:
                - change the ensemble from =NVE= to =NVT= in order to hold the temperature constant instead of the total energy.
                - add a =thermostat= sub-block in order to supply details for the berendsen thermostat.

***** DONE Exercises
1. Zum Startzeitpunkt ist sowohl die Gesamt- als auch die kinetsiche Energie recht hoch (ueber 2300), einen Zeitschritt spaeter sinken beide Energie schlagartig auf unter 2000 ab und bleibt anschliessend konstant. Die potentielle Energie ist konstant fast 0.
2. Ich sehe gar keinen Unterschied...


**** DONE 14.4 An alternative: The Nose-Hoover-thermostat
         Introduce second type of thermostat.

         1. in =*.parameters=-file:
                - Change the propagator (velocity integrator necessary for the Nose-Hoover thermostat)
                - set state of =berendsen= in the =thermostat= sub-block to off
                - add =nosehoover=-thermostat to =thermostat= block

***** DONE Exercises
1. Die Kinetische und die Gesamtenergie oszillieren jetzt genauso wie die Temperatur. Die potentielle Energie ist weiterhin konstant bei etwa 0.
2. Fuer hoehere Temperaturen vergroessern sich die Amplituden. Fuer hoehere virtuelle Massen steigt die Frequenz der Oszillationen (ersten Grades...)


**** DONE 14.5 Optimizing the domain
         Sometimes it is not possible to determine the optimal size of the domain prior to the simulation.
         We can use the optimization phase to determine the size of the domain. For that we allow to scale the box in order to minimize the potential energy.

         1. in =*.parameters=-file
                - Add =simucell= lines in the =optimization= block. The first line contains the parameters for the cell optimization (in general the as for the particles). The second line can be used to specify some constraints.
                - Add a parameter to the =common= block for an external pressure value (=extpressure=).
         2. after the simulation is finished the =# Box= line contains a box matrix entry. The values must be transfered to the parameter file (will be described in next lesson).

***** DONE Exercises
1. Making a small table:
   |       extpressure | box coordinates                                                                                                                                       |
   |-------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------|
   |      0.0024455185 | # Box    7.457397e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.457397e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.457397e+01 |
   |       0.024455185 | # Box   7.370456e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370456e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370456e+01  |
   |        0.24455185 | # Box   7.370444e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370444e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370444e+01  |
   |         2.4455185 | # Box   7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01  |
   |          24455185 | # Box   7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01  |
   | 0.000000024455185 | # Box  7.774622e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.774622e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.774622e+01   |
   Also, je groesser =extpressure= desto kleiner die Box. Das heißt Box Größe und =extpressure= sind umgekehrt proportional.
2. Setze =XX=0= und erhalte =# Box	7.775000e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.557398e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.557398e+01=.
   Es faellt auf, dass die Box nun nicht mehr quadratisch ist. Durch die Änderung kann sich die x-Komponente des ersten Ecken-Vektors nicht mehr veraendern, so dass eine Dimension fixiert ist. (=Xk= bezeichnet die =k= Komponente des =X=-Ecken-Vektors. Hierbei ist =X= \in {=X=, =Y=, =Z=}).
3. Setze =XY=1=. Betrachte nun folgende Werte fuer =constraint=
   - =isotropic= :: Keine Optimierung moeglich, da fuer =isotropic= die sekundären Achsen auf 0 gesetzt werden müssen. Fehlermeldung: =For isotropic box optimization constraintmap entries must be restricted to xx, yy and zz.=
   - =standard= :: Keine Optimierung moeglich: Fehlermeldung: =Constraintmap entry yx must match xy=. Wenn =XY= und =YX= auf 1 gesetzt werden erhaelt man: =# Box	7.457272e+01	0.000000e+00	0.000000e+00	-7.979795e-04	7.457325e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.457594e+01=.
                                   Das heisst die Box ist kein Quader mehr, sondern ein Parallelepiped, in der die Kanten =Y= nicht mehr parallel zur Achse verlaufen.
   - =symmetric= :: Keine Optimierung moeglich: Fehlermeldung: =Constraintmap entry yx must match xy=. Setze =XY= und =YX= auf 1. Erhalte: =# Box	7.457272e+01	-8.014574e-04	0.000000e+00	-8.014574e-04	7.457325e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.457594e+01=.
                                        Wieder ein Parallepiped. Was ist der Unterschied zu =standard=?



**** DONE 14.6 Introducing barostats.
         Instad of isothermic conditions, one often needs isobaric ones. For this one can allow the volume to change and set a barostat similarly to the thermostat.

         1. in the =*.parameters=-file:
                - add a =barostat= sub-block right under the =thermostat= block. In the block one can set: which barostat is used, if constant pressure is wished (in reduced units!), and constraints regarding the variation of the volume.
         2. in order to start a simulation, the box specifications of the =*.parameters= file and those in the =*.data= file are different. Thus one has to change the box information in the =*.parameters= file.


***** TODO Notes
          - Choosing delta_T=5e-3 I get the following error: =Process 0: Error in file ../../src/./helpers.c, line 2066 (0): SomeError: HooverEta is NaN! Error with implicitely solved Hoover-Nose-Thermostat. Please check whether structure is sufficiently and satisfactorily optimized ...: No such file or directory=
          - I am not receiving any error messages if I set the size of the cube in =*.parameters= to 1 and do not touch the =*.data= file, even if the values are different!

***** DONE Exercises.
          1. Fuer =Pressure=0.0024455185= erhalte ich die folgenden Werte: =# Box	7.579774e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.579774e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.579774e+01=. Mache wieder eine Tabelle:
                 |       Pressure | Box size                                                                                                                                              |
                 |----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------|
                 |   0.0024455185 | # Box    7.579774e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.579774e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.579774e+01 |
                 | 0.000024455185 | # Box  4.071469e+02    0.000000e+00    0.000000e+00    0.000000e+00    4.071469e+02    0.000000e+00    0.000000e+00    0.000000e+00    4.071469e+02   |
                 |    0.024455185 | # Box  5.323637e+01    0.000000e+00    0.000000e+00    0.000000e+00    5.323637e+01    0.000000e+00    0.000000e+00    0.000000e+00    5.323637e+01   |
                 Je groesser also der Druck, desto kleiner wird die Box. Darueber hinaus dauert die Simulation fuer geringe Druecke deutlich laenger, was wohl auf die erhoehte Anzahl an Zellen zurueckzufuehren ist. Fuer sehr hohe Druecke laeuft die Simulation nicht, da die Box dann zu klein wird.
          2. Setze =xx=0=. Erhalte Fehlermeldung: =For isotropic barostat conditon constraintmap entry xx must be set to 1.=. Setze =type=standard=. Erhalte nun folgende Werte: =7.457398e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.653474e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.544635e+01=.
                 Stelle fest, dass die Werte der ersten Koordinate (=xx=) sich nicht veraendert haben, waehrend die Werte von =yy= und =zz= etwas groesser sind (und auch etwas groesser als im vorigen Fall).
          3. Setze =xy=1=. Wie schon bei der Box-Optimierung muss dann =yx= auch auf eins gesetzt werden. Erhalte =# Box	9.568149e+01	0.000000e+00	0.000000e+00	-1.643221e+01	7.152647e+01	0.000000e+00	0.000000e+00	0.000000e+00	6.537388e+01=.
                 In diesem Fall aendert sich auch die =x=-Koordinate des =y=-Vektors.
          4. Setze =f_mass=1000=. Erhalte folgende Werte: =# Box	7.517290e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.517290e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.517290e+01=.
                 Die Box ist also etwas kleiner als im Fall =f_mass=1=. Also je groesser die fiktive Masse, (desto hoeher der Druck?), desto kleiner die Box.




**** DONE 14.7 Bonded potentials and measuring bonds
Till here, only non-bonded interactions has been covered. In order to introduce connected atoms, one has the following to do:
1. set the indices in the appropriate column in the =*.data=-file
2. specify bonded potentials in the =*.potentials=-file.

The bond type covered here is a harmonic potential named =bond= (can be imagined like a spring between the atoms).
This type of bond cannot be broken. It is characterized by a restoring force proportional to the deflection from the minimal energy distance r_0.

In this example: Consider Butane (C_4H_10) and measure bond distances. There are three atom types:
1. C in CH_3: methyl-carbon
2. Ci in CH_2: methylene-carbon
3. H: Hydrogen

We will set up this example.

1. in =*.data= file
   - The atoms data is set as usual.
   - A fourth column =neighbors=4= is added. This 4 new columns contain the indices of the neighboring atoms.
2. in =*.potentials= file
   - first introduce the Lennard Jones potentials acting between the molecules. Tremolo-X handles Lennard Jones in bonded molecules in a way, that the potential is *not* calculated among direct neighbors.
   - second the bonded potentials are set. These are: =bonds=, =angles=, =torsions=. The parameters are taken from AMBER94 force field.
3. in =*.parameters= file
   - in addition to the usual blocks, some bond measurement is introduced in the =analyze= subblock of =output=. Every pair undershooting the specified threshold =distance= is considered bonded.
         The Ids of the bonded pairs are written to the =*.info.bonds= (vis) file.

***** DONE Exercises
1. Erhoehe zunaechst die Temperatur: Eine hoehere Temperatur fuehrt dabei zu groesserer Oszillation. Das selbe sollte auch bei geringerer Verbindungskraft zu beobachten sein.
2. Erhoehe alle Gleichgewichtsabstaende um 1. Dadurch erhoehen sich auch die gemessenen Abstaende, allerdings nicht um den gleichen Abstand. Warum?



**** DONE 14.8 Tersoff potential and stress

Aim: Determine Young's Modulus of a single graphene sheet. Instead of defining fixed individual neighbors, the potential function will determine the spatial configuration of surrounding carbon atoms by itself.

1. in =*.potentials= file
   - A =tersoff= block is introduced containing all necessary parameters for tersoff potentials.
2. in =*.parameters= file
   - A =NPT=-ensemble is used
   - additionally to the external pressure a custom stress tensor is set. The stress tensor stretches the domain in =xx=-direction with linearly increasing strength startin from 0 to 1e5.
   - the box vectors need to be changed individually (why?)
   - in order to analyze the stress distribution along individual particles, one needs the =local_stress= feature.

3. Output: Plotting a *stress-strain diagram*:
   - The values can be found in the =*.mbox=-file:
         - strain: can be found by observing the =xx=-value of the box found in 43rd column
         - stress: can be found in 31st column
         - the =yy=-length of the box can be read in the 44th column

***** DONE Exercises
1. Aendere die stress Richtung in =yy= Richtung durch Aenderung an =stresstensor= im =*.parameters= File.
   Erhalte fuer E = 1.58273 mit einem asymptotischen Standard Fehler von +/- 0.2419 (15.28%). Insgesamt sieht die Kurve ganz anders aus... Verstehe ich nicht?
2. Bin mir nicht sicher, wie man die Relaxation-Zeit einstellt? Habe jetzt im Stresstensor eine dritte Zeile eingefuegt: =(0, 0, linear, 1, 0, 0, 0, 0,), (100, 0, linear, 1, 0, 0, 0, 0, 0), (200, 5e5, linear, 1, 0, 0, 0, 0, 0)];=.
   Hoffentlich stimmt's.
   Die Kurve des Plots waechst zunaechst sehr schnell an, und faellt schliesslich etwas langsamer auf null. Bruch? Als Moudulus erhalte ich =E=147.655= mit Fehler =+/- 1.273 (0.8624%)=



**** DONE 14.9 Long ranged potentials 1 - Halley's Comet with coulombic pair interaction

Covers how to set up simulation to use long ranged potentials like gravity or coulomb potential (characteristic: 1/|x|).
For these potentials, a cutoff produces significant errors on the forces.
Solution: Use an ordinary pair potential.
Here as an example we will calculate when Halley's Comet runs through its perihelion point.

1. Tremolo does not support a gravity potential. Instead of this the Coulomb potential is used (after adapting the units.)
2. in =*.parameters= file
   - in order to simulate the conditions of the solar system, a NVE ensemble with verlet propagator is used.
   - the box is choosen to be three times larger then the solar system and =leaving= boundary conditions are set.
   - the whole system is contained in one single cell, which is not good for parallelization but the only way to obtain accurate results using long ranged potentials.
   - a =coulomb= block is set up
   - in order to measure the distance between the Comet and the Barycenter, the bond distance measurement is used.
3. in =*.potentials= file
   - set up all the objects, note that the charge of the particles is set to its mass.

***** TODO Exercises
Problem: Erhalte keine Werte fuer die Abstaende. Es werden nur Nullen ausgegeben. Was geht da schief? Ausserdem wird waehrend der Simulation mitgeteilt, dass mehrere Partikel das Gebiet verlassen.




**** DONE 14.10 Long ranged potentials 2 - Sodium chloride with SPME

Typical usage scenario of coulomb forces in molecular dynamics with a large number of particles.
The potential is split in two parts:
- the short ranged part is calculated in a linked cell fashion as before
- the long ranged part is calculated by Ewald summation in fourier space for father particles
This is suitable for periodic systems of particles.
In this example solid NaCl is simulated and its radial distribution is measured.

1. in the =*.potentials= file
   - set up the short ranged interactions using the Tosi Fumi potential
2. in the =*.data= file
   - set up the starting configuration as a NaCl-structure with small random offset for each atom at 20 degrees celsius.
3. in the =*.parameters= file
   - NPT ensemble,
   - 1000hP pressure maintained by the Parrinello-Barostat, with isotropic constraint
   - Nose-Hoover-Thermostat for fixed temperature
   - =coulomb=-block: specify the parameters for the =spme= method
         - up to =r_cut= the short ranged part of the potential is used (like n2spline)
         - from there it is approximated by bell curves with splitting coefficient =G= (?!)
   - in =analyze=-block the measurement of the radial distribution is set up.

Since the SPME method is used, the parallel version of Tremolo-X has to be used: =tremolo_mpi -v *.tremolo=.

***** TODO Exercises
1. Die radiale Verteilung kann in =*.histogram= abgelesen und dann zum Beispiel mit Excel dargestellt werden. Es zeigt sich, dass es im Anfangszustand nur einzelne winzige Peaks gibt. Im Endzustand wird das Histogramm etwas verwischt. So dass mehrere Bins eine nicht triviale Anzahl von Atomen enthalten.
2. Erhoehe zunaechst die Temperatur auf 5 Grad Celsius. Mit hoeherer Temperatur verteilen sich die Werte fuer die radiale Verteilung auf mehr bins (d.h. die Peaks werden noch verwaschener...)



**** DONE 14.11 Melting point

Example for a common application of molecular dynamics: Determine the melting point of NaCl.
We are goint to use the /Voids method/. Explained [[http://scitation.aip.org/docserver/fulltext/aip/journal/jcp/136/14/1.3702587.pdf%3Fexpires%3D1389619185&id%3Did&accname%3D375729&checksum%3D95953424103DE090EC600A7A00E8088C][here (A comparison of methods for melting point calculation using molecular dynamics
simulations)]].

1. The simulation setup is similar to the previous tutorial apart from the thermostat settings and measurement settings.
2. in the =*.tremolo= file
   In order to carry out a series of simulations one can make use of the defaultpath-option in =*.tremolo=:
   - every simulation is set up in a subdirectory containing only the =*.data= and the =*.parameters= file
   - the remaining files are saved in the parent directory.
   - in this example the subdirectories are named by increasing number of cells with pair defect.



**** TODO The EAM potential - Observing phase transition in Metall

The "embedded atom method" (EAM) is a standard potential used in the analysis of metalls and alloys. In the following the EAM potential is used to analyze a phase transition.
A Fe-Ni nanoparticle is heated from 100K to 800K and the change of its lattice structure from bcc (body-centered cubic) to fcc (face-centered cubic)/ hcp (hexagonal close-packed) is observed.

1. in order to use EAM potentials, the EAM parameters must be provided by a file either with the "eam/fs" format oder the "eam/alloy" format.
   - the unit system of the eam parameters file determines the units which need to be used throughout the simulation.
2. in the =*.potentials= file
   - the particle parameters are inserted as usual.
   - the eam format and the filename is specified.
3. in the =*.parameters= file
   - a =domain= block is set as usual
   - a =dynamics= block is set as usual
   - an =ouput= block is set for measuring the radial ditribution

Beim Start der Simulation erhalte ich folgende Fehlermeldungen:
1. =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.external=
2. =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.exttypes=

**** DONE FRAGEN

1. [ ] Warum genau braucht man die Optimierung bei der Simulation? (Seite 105)

2. [X] Was ist der Unterschied zwischen "optimization" and "dynamic simulation"?

3. [ ] Was heisst, dass Optimierung durch das CG-Verfahren durchgefuehrt werden muss? (Seite 108) Verstehe den ganzen Abschnitt zum Block "optmization" in =*.parameters=-file nicht...

4. [ ] Was sind die pdb files?

5. [ ] Was sind E_kin_group und e_tot+hoover in den ekin bzw. etot files?

6. [ ] Temperaturen koennen im =*.ekin= File betrachtet werden?

7. [ ] Kann es sein, dass ab Kapitel 14.3 die Listings im Tutorial und die Dateien aus =/tutorials= nicht ganz uebereinstimmen? Im Ordner fuer Kapitel 14.4 sind schon Einstellungen fuer das naechste Kapitel....

8. [ ] Bei Box Optimization: Was ist der Unterschied zwischen =standard= und =symmetric=?

9. [ ] In 14.6 laeuft die Simulation nur fuer =delta_T=0.5e-3= und nicht fuer =delta_T=5e-3=. Warum?

10. [ ] Muss ich genau verstehen, was die Parameter der bonded potentials (Seite 122 und 123) sind?

11. [ ] Was sind die Zeilen "outvis", "outdata" und "outm" im =*.parameters= file. Fuer was braucht man "T_Delta" *und* "Step_Delta", zum Beispiel in Kapitel 14.7.

12. [ ] Kapitel 14.7: Verstehe nicht ganz was die "restlichen" Spalten im =*.generalmeas= file sein sollen.

13. [ ] Welches Programm zum Visualisieren verwenden? Habe ich Programme wie VMD-Viewer, Gnu Units?

14. [ ] Aufgaben zu 14.8: Wie fuegt man eine Relaxation Time hinzu? Einfach zusaetzliche Zeile im Stress-Tensor?

15. [ ] In 14.9: Warum wird der =coulomb= Block in das =*.parameters= File und nicht in das =*.potentials= File geschrieben?

16. [ ] In 14.12 Was ist mit den Fehlermeldungen?

17. [ ] Probleme mit den Aufgaben bei 14.6 und 14.9.


**** TODO Summary of problems:

- Kapitel 14.1 :: Programme zum Plotten? Warnung bei der Simulation: =WARNING: Definition of unit system in the tremolo file is deprecated and may not be supported in future versions of tremolo. Define the unit system in the .potentials file instead.=

- Kapitel 14.2 :: -

- Kapitel 14.3 :: -

- Kapitel 4.4 :: Was ist der Unterschied zwischen Nose-Hoover und Berendsen?

- Kapitel 4.5 :: Verstehe nicht ganz die Unterschiede fuer die =constraint types=.

- Kapitel 4.6 :: Erhalte Fehler fuer =delta_T=5e-3=: =Process 0: Error in file ../../src/./helpers.c, line 2066 (0): SomeError: HooverEta is NaN! Error with implicitely solved Hoover-Nose-Thermostat. Please check whether structure is sufficiently and satisfactorily optimized ...: No such file or directory=
                                 Dies ist nicht der Fall fuer =delta_T=0.5e3=.

- Kapitel 4.7 :: Generell: Was ist der Unterschied zwischen /bonded potentials/ und zum Beispiel /lennard jones/?

- Kapitel 4.8 :: in der Aufgabe: wie stellt man die Relaxation-Zeit ein?

- Kapitel 4.9 :: Erhalte keine Werte fuer die Abstaende (Nur nullen).

- Kapitel 4.10 :: -

- Kapitel 4.11 :: Erhalte Fehlermeldungen: =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.external=
* TODO Repeat this for 14.4
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-23 Thu 13:27
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Manual fixes/Check 1.2: Check 0.0005 and 0.005.
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: TODO
  :END:

* DONE Check 1.2: Check 0.0005 and 0.005.
  SCHEDULED: <2014-01-24 Fri> CLOSED: [2014-01-23 Thu 13:42]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-23 Thu 13:42
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Manual fixes
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

** DONE Make long simulation for 14.3 and plot energies.
   CLOSED: [2014-01-23 Thu 13:26]

* DONE Create new branch for that.
  SCHEDULED: <2014-01-20 Mon> CLOSED: [2014-01-19 Sun 13:12]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-23 Thu 13:43
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Manual fixes
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:


* DONE Check 1.6: Box parameters: What happens for different values in *.parameters and *.data?
  SCHEDULED: <2014-01-20 Mon> CLOSED: [2014-01-20 Mon 18:11]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-23 Thu 13:43
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Manual fixes
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
  Erhalte die folgende Fehlermeldung, wenn die Werte der Box in =*.parameters= und in =*.data= nicht uebereinstimmen: \\
  =Attention: BOX statement in .data file overwrites domain size data in .parameters file suggest correcting moment and angular moment with Max.-Boltz. distribution=.


* DONE Manual fixes
  DEADLINE: <2014-01-25 Sat> CLOSED: [2014-01-23 Thu 13:44]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-23 Thu 13:44
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

  - Created branch *manual-fix* in tremolo directory.

** DONE Fix all things in the Tremolo-Tutorial that are obvious
   SCHEDULED: <2014-01-24 Fri> CLOSED: [2014-01-23 Thu 13:44]

*** Gemachte Aenderungen:
        - Page 108 :: /Visuals shall be created every 5 time units or 10 iteration steps, whereas the particle data shall be written every 500 time units or 10 iteration steps./ \\
                                  "Visuals *(argon.vis.####.[xyz,pdb,data])* shall be created ..."
        - Page 109 :: /The optimized particle positions are written to argon.data.999./ \\
                                  "The optimized particle positions are written to argon.data.999 *9*."
        - Page 110 :: /For this example we can still ignore the extra lines./ \\
                                  "For this example we can still ignore the extra lines *at the top of the file*."
        - Page 111 :: /Take a look at the velocity distribution in the argon.histogram file/ \\
                                  "*Plot a histogram displaying the velocity distribution contained in the argon.histogram file*."
        - Page 112 :: /1.4 An alternative: The Nose-Hoover-thermostat/ \\
                                  "1.4 An alternative: The Nosé-Hoover-thermostat"
        - Page 112 :: /Thus, when using the Nosé-Hoover-thermostat considerations with respect to equilibration are imperative./ \\
                                  "Thus, when using the Nosé-Hoover-thermostat, considerations with respect to equilibration are imperative." (Komma hinzugefuegt)
        - Page 113 :: /We begin by modifying the the optimization of the sample .../ \\
                                  "We begin by modifying *the* optimization of the sample..."
        - Page 114 :: /Again we work in the =argon.parameter= file and enter the thermostat after (or in place of) the thermostat:/ \\
                                  Again we work in the =argon.parameter= file and enter the *barostat* after (or in place of) the thermostat: \\
        - Page 115 :: /So go ahead and change the domain in the appropriate line/ \\
                                  "So go ahead and change the domain in the appropriate line *of the argon.parameters* file."
        - Page 115 :: /Change the extpressure value./ \\
                                  "Change the *Pressure* value."
        - Page 118 :: /... but this time additionally to the external pressure we also support a custom stress tensor, .../ \\
                                  "... but this time additionally to the external pressure we also support a custom stress tensor \sigma, ..."
                                  Die Spannung mit \sigma zu bezeichnen, scheint Standard zu sein: [[http://en.wikipedia.org/wiki/Stress_%28mechanics%29][Wikipedia(Stress)]]
        - Page 119 :: /The strain is defined as the length change .../ \\
                                  "The strain \epsilon is defined as the length change ..."
        - Page 120 :: /Add a 100 [t] relaxation time at the beginning (\sigma = 0)./ \\
                                  "Add a 100 [t] relaxation time (\sigma = 0) at the beginning *of the simulation by inserting an additional line in the =stresstensor= section of the =graphene.parameters= file.*"
        - Page 121 :: /As stated earlier the potential should not be cut off but has to to fit the linked cell structure of the domain./
                                  "As stated earlier the potential should not be cut off but has *to* fit the linked cell structure of the domain."
        - Page 125 :: /TODO/ entfernt (kann keinen Buchstabendreher entdecken).




*** TODO Noch zu machende Aenderungen:
        - Page 110 :: /For the integration of the particle trajectories we choose a standard verlet algorithm with a time step of 0.005 custom time units./ \\

                                  Kann nicht beurteilen, ob deltaT=0.5e-3 oder deltaT=5e-3 richtig ist.
                                  Output fuer die Geschwindigkeitsverteilung in Kapitel 1.2: (oben deltaT=0.5e-3, unten deltaT=5.e-3)\\
                                  [[file:pics/argon.histogram.png]] \\
                                  [[file:pics/argon.short.histogram.png]]\\
                                  - [ ] Werde noch Ausgaben fuer Energien etc. erstellen.

        - Page 114 :: Letzter Punkt in Exercises 14.5.1: Optimierung ist nicht moeglich fuer =constraint=isotropic=, wenn nur eine /secondary axis= geaendert wird.

        - Page 114 :: Das Listing unterscheidet sich vom File im =/tutorials/=-Ordner. Beispielsweise: =ensemble=NPE= im Listing und =ensemble=NPT= im File im Ornder =6sim_npt=

        - Page 115 :: /Should you attempt to start it right away, you will receive an error message./ \\
                                  Ich erhalte keine Fehlermeldung, allerdings die Warnung: =Attention: BOX statement in .data file overwrites domain size data in .parameters file suggest correcting moment and angular moment with Max.-Boltz. distribution=

        - Page 115 :: Dritter Punkt in Exercises 14.6.1: /In the/ =constraintmap= /change one of the secondary axis entries. Check and compare the new box values./ \\
                                  Hier muss auch der =type= der =constraintmap= geaendert werden. Darueber hinaus muessen bei den sekundaeren Achsen immer Paare geaendert werden.

        - Page 122 :: Die Simulation ist fehlerhaft: Die meisten Partikel verlassen das Gebiet. Das =*.generalmeas= file enthaelt nur Nullen.

        - Page 129 :: Erhalte die folgenden Fehlermeldungen:
                                  =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.external= \\
                                  =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.exttypes= \\
                                  In den Kapiteln 14.1 bis 14.11 habe ich diese Meldungen nicht finden koennen.

* DONE Go through tutorials and manual (find mistakes)
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-23 Thu 13:45
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

** DONE Bemerkungen
- vielleicht eine Hinweis, wie man an das Manual kommt?
- page 7 :: Letzter Satz: missing "of" after "... detailed specification"
- page 11 :: Erster Satz: es heisst =examples/Argon/= nicht =example/Argon/=.
- page 17 :: Verstehe nicht den Satz in der Klammer im Abschnitt /parallelepiped/
- page 105 :: Dritter Satz fehlendes "s" in "exist"
- Erhalte Warnung bei Aufruf von tremolo in Tutorial 14.1: =WARNING: Definition of unit system in the tremolo file is deprecated and may not be supported in future versions of tremolo. Define the unit system in the .potentials file instead.=
- page 107 :: oben, es fehlt "use a" in1 /Since that introduces a discontinuity, we also second potential, which .../
- page 107 :: superfluous colon after /...not a dynamic simulation./ before the second grey box.
- page 108 :: do not understand the part about the /optimization/ block.
- page 108 :: in the part about the /output/ block: what is the difference between visuals and particle data?



** DONE Notizen
*** Overview
Das Tremolo Projekt besteht aus zwei Funktionalitaeten:
a. sequentielle Simulation
b. parallele Simulation

1. Different capabilities of tremolo
   - ensembles
   - integrators
   - thermostats
2. In-depth description of the different potentials
3. Detailed specification of the syntax of options in the parameter file.

*** First steps
Start a tremolo simulation. Example:
Go to =tremole/examples/Argon/= and type =tremolo argon.tremolo=. This starts the simulation specified in the =*.tremolo= file.

*** Ensembles and Thermostats
Es gibt unter anderem folgende Funktionalitaeten:
1. Propagators
2. Thermostats
3. Barostats

*** DONE Tutorial
        Kopie des Ordners =/tremolo/tutorial= befindet sich auf =~/playground/=.

**** DONE 14.1 Optimizing an initial particle setup
         Often optimization of the particle distribution must be done, since the distribution is non-optimal creating local energy spikes which affect stability of the simulation.
         Thus the particle position are slightly modified towards a (static) energy minimum.

         1. Write a =*.tremolo=-file containing:
  - defaultpath (has to be set!)
  - projectname (all files will carry this name)
  - comment
  - systemofunits
  - base magnitudes for the system of units used.

        2. Write a =*.potentials=-file containing the potentials.
  1. particles : Contains all particle types in the simulation:
        - particle_type
        - element_name
        - mass
        - sigma, sigma14, epsilon, epsilo14
  2. potentials to be used in between particles

  3. Write a =*.validates=-file containing:
  - validates the use of particles
  - decide which potential should be used

        4. Write a =*.parameters=-file containing
  - the type of simulation (optimization, dynamic simulation)
  - parameters concerning the domain and the cells
  - options for parametrization (? here optimization...)
  - type and intervals of output

        5. Write a =*.data=-file containing the initial particle positions in a special format
  - in the first line starting with =# ATOMDATA= the layout of the particle lsit ist set.
  - in the second line starting with =# INPUTCONV= some manipulation of the data can be set (here the temperature)

        6. Start the simulation using =tremolo -v *.tremolo=. The optimized particle positions are written to =*.data.9999=.

***** DONE Exercises:
          1. Das Partikel mit ID 12 verlaesst das Gebiet (Positionen mit Koordinaten um die 1e+08). Dies geschiet wahrschenlich dadurch, dass durch den groessen Praefaktor das Partikle direct auf ein benachbartes Partikel gesetzt wird. Durch die Abstossung durch das Potenzial, erhaelt das Partikel ein sehr hohe Geschwindigkeit und verlaesst das Gebiet.
          2. Die Potentielle Energie ist zu Beginn sehr gross (ca. 2.6e+10), allerdings nur wenige Zeitschritte, (hier nur 2.) unmittelbar nach Beginn der Optimierung, nimmt die Energie schlagartig ab (auf ca. -1.78, ab dem 7. Zeitschritt), danach konvigiert die Energie nur noch langsam zu einem Minimum (-1.15e+10).



**** DONE 14.2 Setting up a basic simulation
         After the optimization phase a basic simulation can be done.

         1. in the =*.parameters=-file:
  - change the integration type from "optimization" to "dynamics": =integration: type=dynamics=
  - Add new block to file consisting of the parameters of the dynamics:
        - =ensemble=NVE= particle number, volume, total energy are constant
        - choose integrator (propagator), e.g. =verlet=
        - choose time steps and intervall
  - Add anlysis sub-block to output-block to analyse velocity distribution of the particles:

        2. make sure to use the optimized =*.data=-files:
  - always copy original data file somewhere safe
  - rename =*.data.9999= as =*.data=

        3. run simulation by the usual command

***** DONE Exercises
1. Die Gesamtenergie des Ensembles ist fast vollstaendig durch die kinetische Energie gegeben. Die potentielle Energie ist fast null, waehrend die kinetische Energie etwa 2000 ist. Desweiteren gibt es kleinste Schwankungen in den Energien.
2. ? Wie kann man das anstaendig plotten?
3. Die Simulation bricht sofort ab mit der Fehlermeldung =Particle leaving simulation territory! Me:0 Particle-Id:12 (-8.547802e+05,-1.965304e+06,1.373152e+07) Process 0: Error in file ../../src/./update.c, line 1209 (0): SomeError: Particle leaving across a nonopen border. Simulation aborted.  Maybe the ensemble requires additional optimization?=
4. Die Messung von Durchschnittsenergien, kann duch hinzufuegen von =meanmeasure=on= im =*.parameters=-file aktiviert werden. Die Energien sind wie erwartet gemittelt worden und dabei im wesentlichen konstant. Grob gesehen ergeben sich die gleichen Energien wie schon im ungemittelten Fall.
5. Durch die Temperaturerhoehung erhoeht sich auch die kinetische Energie der Teilchen, waehrend die potentielle Energie unveraendert bleibt. Ansonsten gibt es keine Aenderungen.



**** DONE 14.3 Using the Berendsen thermostat
         Using the first of two defferent thermostats.

         1. in =*.parameters=-file:
                - change the ensemble from =NVE= to =NVT= in order to hold the temperature constant instead of the total energy.
                - add a =thermostat= sub-block in order to supply details for the berendsen thermostat.

***** DONE Exercises
1. Zum Startzeitpunkt ist sowohl die Gesamt- als auch die kinetsiche Energie recht hoch (ueber 2300), einen Zeitschritt spaeter sinken beide Energie schlagartig auf unter 2000 ab und bleibt anschliessend konstant. Die potentielle Energie ist konstant fast 0.
2. Ich sehe gar keinen Unterschied...


**** DONE 14.4 An alternative: The Nose-Hoover-thermostat
         Introduce second type of thermostat.

         1. in =*.parameters=-file:
                - Change the propagator (velocity integrator necessary for the Nose-Hoover thermostat)
                - set state of =berendsen= in the =thermostat= sub-block to off
                - add =nosehoover=-thermostat to =thermostat= block

***** DONE Exercises
1. Die Kinetische und die Gesamtenergie oszillieren jetzt genauso wie die Temperatur. Die potentielle Energie ist weiterhin konstant bei etwa 0.
2. Fuer hoehere Temperaturen vergroessern sich die Amplituden. Fuer hoehere virtuelle Massen steigt die Frequenz der Oszillationen (ersten Grades...)


**** DONE 14.5 Optimizing the domain
         Sometimes it is not possible to determine the optimal size of the domain prior to the simulation.
         We can use the optimization phase to determine the size of the domain. For that we allow to scale the box in order to minimize the potential energy.

         1. in =*.parameters=-file
                - Add =simucell= lines in the =optimization= block. The first line contains the parameters for the cell optimization (in general the as for the particles). The second line can be used to specify some constraints.
                - Add a parameter to the =common= block for an external pressure value (=extpressure=).
         2. after the simulation is finished the =# Box= line contains a box matrix entry. The values must be transfered to the parameter file (will be described in next lesson).

***** DONE Exercises
1. Making a small table:
   |       extpressure | box coordinates                                                                                                                                       |
   |-------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------|
   |      0.0024455185 | # Box    7.457397e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.457397e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.457397e+01 |
   |       0.024455185 | # Box   7.370456e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370456e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370456e+01  |
   |        0.24455185 | # Box   7.370444e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370444e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370444e+01  |
   |         2.4455185 | # Box   7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01  |
   |          24455185 | # Box   7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.370443e+01  |
   | 0.000000024455185 | # Box  7.774622e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.774622e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.774622e+01   |
   Also, je groesser =extpressure= desto kleiner die Box. Das heißt Box Größe und =extpressure= sind umgekehrt proportional.
2. Setze =XX=0= und erhalte =# Box	7.775000e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.557398e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.557398e+01=.
   Es faellt auf, dass die Box nun nicht mehr quadratisch ist. Durch die Änderung kann sich die x-Komponente des ersten Ecken-Vektors nicht mehr veraendern, so dass eine Dimension fixiert ist. (=Xk= bezeichnet die =k= Komponente des =X=-Ecken-Vektors. Hierbei ist =X= \in {=X=, =Y=, =Z=}).
3. Setze =XY=1=. Betrachte nun folgende Werte fuer =constraint=
   - =isotropic= :: Keine Optimierung moeglich, da fuer =isotropic= die sekundären Achsen auf 0 gesetzt werden müssen. Fehlermeldung: =For isotropic box optimization constraintmap entries must be restricted to xx, yy and zz.=
   - =standard= :: Keine Optimierung moeglich: Fehlermeldung: =Constraintmap entry yx must match xy=. Wenn =XY= und =YX= auf 1 gesetzt werden erhaelt man: =# Box	7.457272e+01	0.000000e+00	0.000000e+00	-7.979795e-04	7.457325e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.457594e+01=.
                                   Das heisst die Box ist kein Quader mehr, sondern ein Parallelepiped, in der die Kanten =Y= nicht mehr parallel zur Achse verlaufen.
   - =symmetric= :: Keine Optimierung moeglich: Fehlermeldung: =Constraintmap entry yx must match xy=. Setze =XY= und =YX= auf 1. Erhalte: =# Box	7.457272e+01	-8.014574e-04	0.000000e+00	-8.014574e-04	7.457325e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.457594e+01=.
                                        Wieder ein Parallepiped. Was ist der Unterschied zu =standard=?



**** DONE 14.6 Introducing barostats.
         Instad of isothermic conditions, one often needs isobaric ones. For this one can allow the volume to change and set a barostat similarly to the thermostat.

         1. in the =*.parameters=-file:
                - add a =barostat= sub-block right under the =thermostat= block. In the block one can set: which barostat is used, if constant pressure is wished (in reduced units!), and constraints regarding the variation of the volume.
         2. in order to start a simulation, the box specifications of the =*.parameters= file and those in the =*.data= file are different. Thus one has to change the box information in the =*.parameters= file.


***** TODO Notes
          - Choosing delta_T=5e-3 I get the following error: =Process 0: Error in file ../../src/./helpers.c, line 2066 (0): SomeError: HooverEta is NaN! Error with implicitely solved Hoover-Nose-Thermostat. Please check whether structure is sufficiently and satisfactorily optimized ...: No such file or directory=
          - I am not receiving any error messages if I set the size of the cube in =*.parameters= to 1 and do not touch the =*.data= file, even if the values are different!

***** DONE Exercises.
          1. Fuer =Pressure=0.0024455185= erhalte ich die folgenden Werte: =# Box	7.579774e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.579774e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.579774e+01=. Mache wieder eine Tabelle:
                 |       Pressure | Box size                                                                                                                                              |
                 |----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------|
                 |   0.0024455185 | # Box    7.579774e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.579774e+01    0.000000e+00    0.000000e+00    0.000000e+00    7.579774e+01 |
                 | 0.000024455185 | # Box  4.071469e+02    0.000000e+00    0.000000e+00    0.000000e+00    4.071469e+02    0.000000e+00    0.000000e+00    0.000000e+00    4.071469e+02   |
                 |    0.024455185 | # Box  5.323637e+01    0.000000e+00    0.000000e+00    0.000000e+00    5.323637e+01    0.000000e+00    0.000000e+00    0.000000e+00    5.323637e+01   |
                 Je groesser also der Druck, desto kleiner wird die Box. Darueber hinaus dauert die Simulation fuer geringe Druecke deutlich laenger, was wohl auf die erhoehte Anzahl an Zellen zurueckzufuehren ist. Fuer sehr hohe Druecke laeuft die Simulation nicht, da die Box dann zu klein wird.
          2. Setze =xx=0=. Erhalte Fehlermeldung: =For isotropic barostat conditon constraintmap entry xx must be set to 1.=. Setze =type=standard=. Erhalte nun folgende Werte: =7.457398e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.653474e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.544635e+01=.
                 Stelle fest, dass die Werte der ersten Koordinate (=xx=) sich nicht veraendert haben, waehrend die Werte von =yy= und =zz= etwas groesser sind (und auch etwas groesser als im vorigen Fall).
          3. Setze =xy=1=. Wie schon bei der Box-Optimierung muss dann =yx= auch auf eins gesetzt werden. Erhalte =# Box	9.568149e+01	0.000000e+00	0.000000e+00	-1.643221e+01	7.152647e+01	0.000000e+00	0.000000e+00	0.000000e+00	6.537388e+01=.
                 In diesem Fall aendert sich auch die =x=-Koordinate des =y=-Vektors.
          4. Setze =f_mass=1000=. Erhalte folgende Werte: =# Box	7.517290e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.517290e+01	0.000000e+00	0.000000e+00	0.000000e+00	7.517290e+01=.
                 Die Box ist also etwas kleiner als im Fall =f_mass=1=. Also je groesser die fiktive Masse, (desto hoeher der Druck?), desto kleiner die Box.




**** DONE 14.7 Bonded potentials and measuring bonds
Till here, only non-bonded interactions has been covered. In order to introduce connected atoms, one has the following to do:
1. set the indices in the appropriate column in the =*.data=-file
2. specify bonded potentials in the =*.potentials=-file.

The bond type covered here is a harmonic potential named =bond= (can be imagined like a spring between the atoms).
This type of bond cannot be broken. It is characterized by a restoring force proportional to the deflection from the minimal energy distance r_0.

In this example: Consider Butane (C_4H_10) and measure bond distances. There are three atom types:
1. C in CH_3: methyl-carbon
2. Ci in CH_2: methylene-carbon
3. H: Hydrogen

We will set up this example.

1. in =*.data= file
   - The atoms data is set as usual.
   - A fourth column =neighbors=4= is added. This 4 new columns contain the indices of the neighboring atoms.
2. in =*.potentials= file
   - first introduce the Lennard Jones potentials acting between the molecules. Tremolo-X handles Lennard Jones in bonded molecules in a way, that the potential is *not* calculated among direct neighbors.
   - second the bonded potentials are set. These are: =bonds=, =angles=, =torsions=. The parameters are taken from AMBER94 force field.
3. in =*.parameters= file
   - in addition to the usual blocks, some bond measurement is introduced in the =analyze= subblock of =output=. Every pair undershooting the specified threshold =distance= is considered bonded.
         The Ids of the bonded pairs are written to the =*.info.bonds= (vis) file.

***** DONE Exercises
1. Erhoehe zunaechst die Temperatur: Eine hoehere Temperatur fuehrt dabei zu groesserer Oszillation. Das selbe sollte auch bei geringerer Verbindungskraft zu beobachten sein.
2. Erhoehe alle Gleichgewichtsabstaende um 1. Dadurch erhoehen sich auch die gemessenen Abstaende, allerdings nicht um den gleichen Abstand. Warum?



**** DONE 14.8 Tersoff potential and stress

Aim: Determine Young's Modulus of a single graphene sheet. Instead of defining fixed individual neighbors, the potential function will determine the spatial configuration of surrounding carbon atoms by itself.

1. in =*.potentials= file
   - A =tersoff= block is introduced containing all necessary parameters for tersoff potentials.
2. in =*.parameters= file
   - A =NPT=-ensemble is used
   - additionally to the external pressure a custom stress tensor is set. The stress tensor stretches the domain in =xx=-direction with linearly increasing strength startin from 0 to 1e5.
   - the box vectors need to be changed individually (why?)
   - in order to analyze the stress distribution along individual particles, one needs the =local_stress= feature.

3. Output: Plotting a *stress-strain diagram*:
   - The values can be found in the =*.mbox=-file:
         - strain: can be found by observing the =xx=-value of the box found in 43rd column
         - stress: can be found in 31st column
         - the =yy=-length of the box can be read in the 44th column

***** DONE Exercises
1. Aendere die stress Richtung in =yy= Richtung durch Aenderung an =stresstensor= im =*.parameters= File.
   Erhalte fuer E = 1.58273 mit einem asymptotischen Standard Fehler von +/- 0.2419 (15.28%). Insgesamt sieht die Kurve ganz anders aus... Verstehe ich nicht?
2. Bin mir nicht sicher, wie man die Relaxation-Zeit einstellt? Habe jetzt im Stresstensor eine dritte Zeile eingefuegt: =(0, 0, linear, 1, 0, 0, 0, 0,), (100, 0, linear, 1, 0, 0, 0, 0, 0), (200, 5e5, linear, 1, 0, 0, 0, 0, 0)];=.
   Hoffentlich stimmt's.
   Die Kurve des Plots waechst zunaechst sehr schnell an, und faellt schliesslich etwas langsamer auf null. Bruch? Als Moudulus erhalte ich =E=147.655= mit Fehler =+/- 1.273 (0.8624%)=



**** DONE 14.9 Long ranged potentials 1 - Halley's Comet with coulombic pair interaction

Covers how to set up simulation to use long ranged potentials like gravity or coulomb potential (characteristic: 1/|x|).
For these potentials, a cutoff produces significant errors on the forces.
Solution: Use an ordinary pair potential.
Here as an example we will calculate when Halley's Comet runs through its perihelion point.

1. Tremolo does not support a gravity potential. Instead of this the Coulomb potential is used (after adapting the units.)
2. in =*.parameters= file
   - in order to simulate the conditions of the solar system, a NVE ensemble with verlet propagator is used.
   - the box is choosen to be three times larger then the solar system and =leaving= boundary conditions are set.
   - the whole system is contained in one single cell, which is not good for parallelization but the only way to obtain accurate results using long ranged potentials.
   - a =coulomb= block is set up
   - in order to measure the distance between the Comet and the Barycenter, the bond distance measurement is used.
3. in =*.potentials= file
   - set up all the objects, note that the charge of the particles is set to its mass.

***** TODO Exercises
Problem: Erhalte keine Werte fuer die Abstaende. Es werden nur Nullen ausgegeben. Was geht da schief? Ausserdem wird waehrend der Simulation mitgeteilt, dass mehrere Partikel das Gebiet verlassen.




**** DONE 14.10 Long ranged potentials 2 - Sodium chloride with SPME

Typical usage scenario of coulomb forces in molecular dynamics with a large number of particles.
The potential is split in two parts:
- the short ranged part is calculated in a linked cell fashion as before
- the long ranged part is calculated by Ewald summation in fourier space for father particles
This is suitable for periodic systems of particles.
In this example solid NaCl is simulated and its radial distribution is measured.

1. in the =*.potentials= file
   - set up the short ranged interactions using the Tosi Fumi potential
2. in the =*.data= file
   - set up the starting configuration as a NaCl-structure with small random offset for each atom at 20 degrees celsius.
3. in the =*.parameters= file
   - NPT ensemble,
   - 1000hP pressure maintained by the Parrinello-Barostat, with isotropic constraint
   - Nose-Hoover-Thermostat for fixed temperature
   - =coulomb=-block: specify the parameters for the =spme= method
         - up to =r_cut= the short ranged part of the potential is used (like n2spline)
         - from there it is approximated by bell curves with splitting coefficient =G= (?!)
   - in =analyze=-block the measurement of the radial distribution is set up.

Since the SPME method is used, the parallel version of Tremolo-X has to be used: =tremolo_mpi -v *.tremolo=.

***** TODO Exercises
1. Die radiale Verteilung kann in =*.histogram= abgelesen und dann zum Beispiel mit Excel dargestellt werden. Es zeigt sich, dass es im Anfangszustand nur einzelne winzige Peaks gibt. Im Endzustand wird das Histogramm etwas verwischt. So dass mehrere Bins eine nicht triviale Anzahl von Atomen enthalten.
2. Erhoehe zunaechst die Temperatur auf 5 Grad Celsius. Mit hoeherer Temperatur verteilen sich die Werte fuer die radiale Verteilung auf mehr bins (d.h. die Peaks werden noch verwaschener...)



**** DONE 14.11 Melting point

Example for a common application of molecular dynamics: Determine the melting point of NaCl.
We are goint to use the /Voids method/. Explained [[http://scitation.aip.org/docserver/fulltext/aip/journal/jcp/136/14/1.3702587.pdf%3Fexpires%3D1389619185&id%3Did&accname%3D375729&checksum%3D95953424103DE090EC600A7A00E8088C][here (A comparison of methods for melting point calculation using molecular dynamics
simulations)]].

1. The simulation setup is similar to the previous tutorial apart from the thermostat settings and measurement settings.
2. in the =*.tremolo= file
   In order to carry out a series of simulations one can make use of the defaultpath-option in =*.tremolo=:
   - every simulation is set up in a subdirectory containing only the =*.data= and the =*.parameters= file
   - the remaining files are saved in the parent directory.
   - in this example the subdirectories are named by increasing number of cells with pair defect.



**** DONE The EAM potential - Observing phase transition in Metall
          CLOSED: [2014-01-23 Thu 13:43]

The "embedded atom method" (EAM) is a standard potential used in the analysis of metalls and alloys. In the following the EAM potential is used to analyze a phase transition.
A Fe-Ni nanoparticle is heated from 100K to 800K and the change of its lattice structure from bcc (body-centered cubic) to fcc (face-centered cubic)/ hcp (hexagonal close-packed) is observed.

1. in order to use EAM potentials, the EAM parameters must be provided by a file either with the "eam/fs" format oder the "eam/alloy" format.
   - the unit system of the eam parameters file determines the units which need to be used throughout the simulation.
2. in the =*.potentials= file
   - the particle parameters are inserted as usual.
   - the eam format and the filename is specified.
3. in the =*.parameters= file
   - a =domain= block is set as usual
   - a =dynamics= block is set as usual
   - an =ouput= block is set for measuring the radial ditribution

Beim Start der Simulation erhalte ich folgende Fehlermeldungen:
1. =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.external=
2. =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.exttypes=

**** DONE FRAGEN

1. [ ] Warum genau braucht man die Optimierung bei der Simulation? (Seite 105)

2. [X] Was ist der Unterschied zwischen "optimization" and "dynamic simulation"?

3. [ ] Was heisst, dass Optimierung durch das CG-Verfahren durchgefuehrt werden muss? (Seite 108) Verstehe den ganzen Abschnitt zum Block "optmization" in =*.parameters=-file nicht...

4. [ ] Was sind die pdb files?

5. [ ] Was sind E_kin_group und e_tot+hoover in den ekin bzw. etot files?

6. [ ] Temperaturen koennen im =*.ekin= File betrachtet werden?

7. [ ] Kann es sein, dass ab Kapitel 14.3 die Listings im Tutorial und die Dateien aus =/tutorials= nicht ganz uebereinstimmen? Im Ordner fuer Kapitel 14.4 sind schon Einstellungen fuer das naechste Kapitel....

8. [ ] Bei Box Optimization: Was ist der Unterschied zwischen =standard= und =symmetric=?

9. [ ] In 14.6 laeuft die Simulation nur fuer =delta_T=0.5e-3= und nicht fuer =delta_T=5e-3=. Warum?

10. [ ] Muss ich genau verstehen, was die Parameter der bonded potentials (Seite 122 und 123) sind?

11. [ ] Was sind die Zeilen "outvis", "outdata" und "outm" im =*.parameters= file. Fuer was braucht man "T_Delta" *und* "Step_Delta", zum Beispiel in Kapitel 14.7.

12. [ ] Kapitel 14.7: Verstehe nicht ganz was die "restlichen" Spalten im =*.generalmeas= file sein sollen.

13. [ ] Welches Programm zum Visualisieren verwenden? Habe ich Programme wie VMD-Viewer, Gnu Units?

14. [ ] Aufgaben zu 14.8: Wie fuegt man eine Relaxation Time hinzu? Einfach zusaetzliche Zeile im Stress-Tensor?

15. [ ] In 14.9: Warum wird der =coulomb= Block in das =*.parameters= File und nicht in das =*.potentials= File geschrieben?

16. [ ] In 14.12 Was ist mit den Fehlermeldungen?

17. [ ] Probleme mit den Aufgaben bei 14.6 und 14.9.


**** DONE Summary of problems:
          CLOSED: [2014-01-23 Thu 13:43]

- Kapitel 14.1 :: Programme zum Plotten? Warnung bei der Simulation: =WARNING: Definition of unit system in the tremolo file is deprecated and may not be supported in future versions of tremolo. Define the unit system in the .potentials file instead.=
p
- Kapitel 14.2 :: -

- Kapitel 14.3 :: -

- Kapitel 4.4 :: Was ist der Unterschied zwischen Nose-Hoover und Berendsen?

- Kapitel 4.5 :: Verstehe nicht ganz die Unterschiede fuer die =constraint types=.

- Kapitel 4.6 :: Erhalte Fehler fuer =delta_T=5e-3=: =Process 0: Error in file ../../src/./helpers.c, line 2066 (0): SomeError: HooverEta is NaN! Error with implicitely solved Hoover-Nose-Thermostat. Please check whether structure is sufficiently and satisfactorily optimized ...: No such file or directory=
                                 Dies ist nicht der Fall fuer =delta_T=0.5e3=.

- Kapitel 4.7 :: Generell: Was ist der Unterschied zwischen /bonded potentials/ und zum Beispiel /lennard jones/?

- Kapitel 4.8 :: in der Aufgabe: wie stellt man die Relaxation-Zeit ein?

- Kapitel 4.9 :: Erhalte keine Werte fuer die Abstaende (Nur nullen).

- Kapitel 4.10 :: -

- Kapitel 4.11 :: Erhalte Fehlermeldungen: =Error: Cannot open file: /home/neuen/tremolo/tutorial/12eam.external=

* DONE VMD Viewer
  CLOSED: [2014-01-23 Thu 15:53]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-27 Mon 10:39
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Configurations
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

* DONE Colors in git-output [2014-01-05 Sun 14:42]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-01-27 Mon 10:39
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Configurations
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:










* DONE Read online tutorial about Qt (signal, slots)
  CLOSED: [2014-02-01 Sat 15:57] DEADLINE: <2014-02-01 Sat> SCHEDULED: <2014-01-30 Thu>
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-01 Sat 15:57
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:




* DONE Add smart-mode-line to emacs config.
  CLOSED: [2014-02-05 Wed 09:47]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-05 Wed 09:48
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Emacs
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

* DONE What are the remaining problems?
          CLOSED: [2014-02-11 Tue 11:26]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-11 Tue 11:27
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Coulomb-potentials parameters/Make changes/Make necessary changes in solparallel_gui.h and solparallel_gui.cpp
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
          - Note taken on [2014-02-08 Sat 12:53] \\
                There are still some changes missing:
                - When a different longrang solver is clicked the save values method should be called in order to parse the parameter file and update the parameters.
                - When the values are written to the paramter file (by clicking on saving), the parameters of ALL longrange solver should be saved.

Notes:
- Clicking "Save" writes all values to the parameter file: Thus by editing the values of a parameter of a potential, this value is saved to the SolParallel_Data class.
  Most likely the SolParallel_GUI::updateGUI_data() slot ist called.

** DONE When and where is the data written to the SolParallel_Data class.
           CLOSED: [2014-02-10 Mon 13:51]
The data is written to the SolParallel_Data class by the different SolParallel_GUI::*****rp() methods (e.g. R_CLErp()).

The =connect= statments for this are given by:
: connect( r_cutLineEdit, SIGNAL( returnPressed() ), this, SLOT( R_CLErp() ) );
: connect( r_cutLineEdit, SIGNAL( lostFocus() ), this, SLOT( R_CLErp() ) );

This means, that once I press return or loose the Focus of the specific LineEdit, the value is written to the SolParallel_Data class.

** TODO What happen i I click on a longrange solver's radio button?
If a longrange solver's radio button has been clicked, a =hasChanged()= is emitted and the =SolParallel_GUI::updateGUI_data() is called.

** DONE When does the parameter file is parsed?
           CLOSED: [2014-02-11 Tue 11:03]
The hierarchy for SolParallel_Data class is given by:
- TremoloGui has member:
  - SimulationParameterControl has member:
        - SimulationParameterData has member:
          - SolParallel_Data

The =SolParallel_Data::saveValues()= method is called by:
- SimulationParameterControl::fileOpen()
  - SimulationParameterData::readFromFile()
        - ParameterParser::parseFile()
          - SolParallel_Data::saveValues()




* DONE Check if methods in solparallel_data.cpp are correct.
  CLOSED: [2014-02-11 Tue 11:26]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-11 Tue 11:27
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Coulomb-potentials parameters/Make changes/Make necessary changes in solparallel_gui.h and solparallel_gui.cpp
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
  - Note taken on [2014-02-08 Sat 13:00] \\
        In the saveValues() method: Only the values of the selected solver are saved in the SolParallel_Data class.



* DONE Determine which parameters must be replaced and in what way
         CLOSED: [2014-02-05 Wed 14:41]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-11 Tue 11:27
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Coulomb-potentials parameters/Make changes
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

_In "Longrange Algorithms" section:_

- r_cut :: (N2, N2Spline, Ewald, p3m, pme, spme, barneshut, fmm)
- r_l :: (N2Spline)
- splittingCoefficientG :: (Ewald, p3m, pme, spme)
- MAP :: (fmm)
- cellratio :: (Ewald, p3m, pme, spme)
- interpolationDegree :: (N2, N2Spline, Ewald, p3m, pme, spme, barneshut, fmm)
- maxTreeLevel :: (barneshut, fmm)
- poissonsolver :: (p3m pme, spme)

Replacement could be done by
(- individual variables)
- vector


* DONE Replace coulomb parameters in solparallel_data.h
  CLOSED: [2014-02-05 Wed 14:42]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-11 Tue 11:27
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Coulomb-potentials parameters/Make changes
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

** DONE Initialization of vectors in constructor.
   CLOSED: [2014-02-05 Wed 14:41]


* DONE Make necessary changes in solparallel_data.cpp
         CLOSED: [2014-02-08 Sat 11:40]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-11 Tue 11:27
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Coulomb-potentials parameters/Make changes
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

The following methods have to be changed in solparallel_data.cpp:

- [X] toString()
- [X] toParameterFileString()
- [X] saveValues()
  + [X] What is the method doing exactly?
  + [X] What are the arguments?
  + [X] Who calls the method?
- [X] isR_Cut()
- [X] isR_CutUnit()
- [X] isR_L()
- [X] isR_LUnit()
- [X] isSplittingCoefficientG()
- [X] isSplittingCoefficientGUnit()
- [X] isMAP()
- [X] isMAPUnit()
- [X] clear()
  Question is, if the default values have to be changed for all solvers?
- [X] setR_Cut()
- [X] setR_L()
- [X] setSplittingCoefficientG()
- [X] setMap()
- [X] setCellratio()
- [X] setInterpolationDegree()
- [X] setMaxTreeLevel()
- [X] setPoisson_solver()



* DONE Get an overview of the structure of solparallel_gui and solparallel_data.
   CLOSED: [2014-02-07 Fri 11:01]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-19 Wed 09:28
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Coulomb-potentials parameters
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:

** Overall structure

- solparallel_gui.h/cpp contain everything that is related to the gui of "Solver and parallelization"
- solparallel_data.h/cpp contain everything related to the parameters of "Solver and parallelization"

** Structure of solparallel_data

*** class =SolParallel_Data=

**** Important methods of this class
- QStringList getKeyWords() :: Returns a QStringList containing the key words for the Section "Solver and Parallelization" in the =.parameters= file.
- QString toParameterFileString() :: Returns a QString containing all information for the Section "Solver and Parallelization" in the =.paramters= file.
           The method is called in the =writeParameterFileStream= defined in =simulationparameterdata.cpp=.
- QString toString() :: Returns a QString containing information about solver and parallelization (used for debugging purposes).



* DONE Coulomb-potentials parameters
  CLOSED: [2014-02-19 Wed 10:27] DEADLINE: <2014-02-12 Wed> SCHEDULED: <2014-02-09 Sun>
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-19 Wed 10:28
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
  - Note taken on [2014-02-01 Sat 16:26] \\
        There is no doxygen documentation in tremologui.
  - Note taken on [2014-02-01 Sat 15:55] \\
        Meeting with Christian on [2014-01-30 Thu].
        - [X] Enable auto-complete in emacs and overall configuration
        - [X] von testing branch ziehen (in separaten lokalen branch testing)
        - [X] branch in gui machen
        - [X] Benutze Tremolo-parser für die Coulom-potentials parameters in der GUI, die können in spme.c gefunden (werden in coulomb.c, CoulombInit aufgerufen).
  - Note taken on [2014-02-01 Sat 15:53] \\
        Created branch 'fixes' in tremologui and branch 'testing' in tremolo.

  - [ ] Replace parameters with potential specific paramters, e.g. cellration for N^2 by N^2 cellratio etc.
                For this all occurences of these parameters must be found and changed.

  - [ ] The important files for that are solparallel_gui and solparallel_data.

  - [ ] Use tremolo-parser for Coulomb-potentials parameters in GUI found in =spme.c= (called in =CoulombInit= in =coulomb.c=).

** DONE Make changes
        CLOSED: [2014-02-19 Wed 10:27]

*** DONE Write documentation for solparallel_data and solparallel_gui
        CLOSED: [2014-02-12 Wed 15:05]


*** DONE Make necessary changes in solparallel_gui.h and solparallel_gui.cpp
         CLOSED: [2014-02-19 Wed 10:22]
         - Note taken on [2014-02-19 Wed 10:01] \\
           Instead of RadioButtons for the longrange solver selection one could also use:
           - QListWidget
           - QComboBox
         - Note taken on [2014-02-14 Fri 11:10] \\
           Added new branch =solparallel_menu_fix= to local tremologui repository.
         - Note taken on [2014-02-12 Wed 14:30] \\
           In order to hide widgets, one can maybe use the QStackedWidgets class.

The menu in the "Solver and parallelization" section should be changed in the following way:
- Every longrange solver should have an own parameter page.
- Only the parameter page of the selected longrange solver should be displayed. This can be done using a *QStackedLayout* or *QStackedWidget*.
- The different pages should contain the same LineEdits, Labels etc., e.g. the LineEdit for "r_cut" should be a child widget of the parameter pages of N^2, N^2_Spline etc.

The QStackedWidget approach does not work since every child widget can only have one parent. So one would have to create e.g. one r_cut LineEdit for every longrange solver etc...
Instead of this I just changed the visibility options for the different parameters which seems to be enough.

**** DONE Replace Q3GridLayout by QGridLayout
         CLOSED: [2014-02-19 Wed 09:59]

**** DONE Set fixed column width in QGridLayout
          CLOSED: [2014-02-19 Wed 10:00]
Done using
: DataGroupLayout->setColumnMinimumWidth(0, 200);

**** DONE Change space management in QGridLayout such that rows appear at the same positions.
          CLOSED: [2014-02-19 Wed 10:00]
Done using
: DataGroupLayout->setAlignment(Qt::AlignTop);


*** DONE Check if everything is right and add comments in case that they are missing.
        CLOSED: [2014-02-19 Wed 10:23]



* Fragen
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-19 Wed 11:53
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :END:

- [X] What is the load balancing function?
- [X] What is the poissonsolver?
- [X] What about the parallelization parameters? Do I have to differentiate here too?
  Maybe later!
- [X] Why can't I select the remaining longrange solvers?
  They are not implemented yet.
- [X] Can I use the new c++ standard (arrays etc?)
  Rather not.

* Fragen
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-02-19 Wed 12:02
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :END:

- [ ] Was ist der Unterschied zwischen GPL und L-GPL?

- [X] What is the load balancing function?
- [X] What is the poissonsolver?
- [X] What about the parallelization parameters? Do I have to differentiate here too?
  Maybe later!
- [X] Why can't I select the remaining longrange solvers?
  They are not implemented yet.
- [X] Can I use the new c++ standard (arrays etc?)
  Rather not.

* DONE Urlaub beantragen
  CLOSED: [2014-03-06 Thu 09:06]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-03-06 Thu 09:06
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Organization
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:



* DONE ScaFaCos Bibliothek											:ARCHIVE:
  CLOSED: [2014-04-09 Wed 14:55]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-04-09 Wed 14:55
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
  - Note taken on [2014-02-20 Thu 11:43] \\
        Absprache mit Christian:
        - Gehe von fcs_... Methoden aus.
        - Füge nur L-GPL Methoden zur GUI hinzu. (können im README.cmake) eingelesen werden.
        - Keine Unterscheidung ob ScaFaCos installiert ist oder nicht in der GUI.
  - Note taken on [2014-02-18 Tue 16:23] \\
        Treffen mit Christian:
        Funktionalität für ScaFaCoS
        - Finde Beispiel und lese Manual dazu durch.
        - Füge ScaFaCoS hinzu
        - Enable Barnes-Hut etc.

        Danach CMake und Portierung auf Windows.

** DONE Overview
        CLOSED: [2014-02-20 Thu 14:19]

*** The following methods are described in the manual:
1. Ewald summation
2. FMM (Fast multipole method)
3. PEPC (Pretty efficient parallel coulomb solver)
4. VMG (Versatile multigrid)
5. P2NFFT (Particle-Particle NFFT)
6. P3M (Particle-Particle-Particle mesh) (NOT WORKING?)

*** Example with the syntax:
Can be found in
: tremolo/tutorial/10Nacl/nacl.parameters

*** Names of the methods (can be found in =fcs_params.c=)

USE_GPL:
- "direct"
- "ewald"
- "fmm"
- "memd"
- "mmm"
- "pepc"
- "p2nfft"
- "p3m"
- "pp3mg"
- "vmg"

ELSE:
- "direct"
- "ewald"
- "fmm"
- "+emd+"
- "+mmm+"
- "pepc"
- "+p2nfft+"
- "+p3m+"
- "pp3mg"
- "vmg"

Note: in =tremolo-fcs.c= in =ReadFCSCoulombRecord()= an error message is displayed for method not supported.

*** The parameters for the different methods can be found
Either in the manual or in different
: ***_params.c
files.


** DONE Implement ScaFaCoS functionality to GUI [5/5]
        CLOSED: [2014-04-09 Wed 14:55]
   - Note taken on [2014-02-20 Thu 09:37] \\
         Created new branch
         : incorp_scafacos

*** Aim

Add ScaFaCoS methods to tremologui. The following has to be done for this:
1. In SolParallel_Data
   - determine which parameters have to be added to the SolParallel_Data class.
   - determine how the data should be saved
   - determine which methods have to be changed (in particular for writing and parsing)
   - change appropriate methods
   - add error messages in parse-method whenever a parameter does not exist for a fcs method.
2. In SolParallel_GUI
   - determine which Widgets must be added for the LongrangeButtonGroup
   - determine which Widgets must be added for the LongrangeDataGroup
   - Add Widgets and connections.


*** Funktion von saveValues() in SolParallel_Data

The saveValues() method is called by
: ParameterParser::parseFile().
The =parseFile= method passes as arguments a keyword list and an identifier list.
Example of the succession of these lists for the N^2 longrange solver:
1. keyword: coulomb, n2
   identifier: state
2. keyword: coulomb, n2
   identifier: r_cut
3. keyword: coulomb, n2
   identifier: i_degree


*** DONE Add ScaFaCoS methods (only LGPL)
         CLOSED: [2014-04-08 Tue 14:43]

These are:
- FMM
- PEPC
- PP3MG
- VMG
- Ewald
- direct

Note that the P3M method in the ScaFaCoS-library is not working due to a bug in the code.

**** DONE Exclude superfluous longrange solver.
          CLOSED: [2014-02-20 Thu 14:18]

The following longrange solvers can be excluded from the gui:
- P3M
- PME
- Barnes-Hut

**** DONE Add Ewald method
          CLOSED: [2014-04-01 Tue 16:18]

Parameters necessary for =fcs_ewald= method:
- fcs_float alpha (Ewald splitting parameter);
- fcs_int kmax (Kspace cutoff);
- fcs_int maxkmax (maximal Kspace cutoff used by tuning);
- fcs_float r_cut (near field cutoff)
- fcs_float tolerance
- fcs_int tolerance_type

**** DONE Add direct solver
          CLOSED: [2014-04-01 Tue 16:18]

Parameters necessary for =fcs_direct= method:
- fcs_int periodic_images[NDIM] = periodic_images_x, periodic_images_y, periodic_images_z
- fcs_float r_cut (near field cutoff)
- fcs_float tolerance
- fcs_int tolerance_type

**** DONE Add FMM method
          CLOSED: [2014-04-01 Tue 16:18]

Parameters necessary for =fcs_fmm= method:
- long long balanceload
- fcs_int dipole_correction
- long long maxdepth
- fcs_int potential
- fcs_float radius
- long long unroll_limit
- fcs_float r_cut
- fcs_float tolerance
- fcs_int tolerance_type

**** DONE Add PEPC method
          CLOSED: [2014-04-01 Tue 16:18]

Parameters necessary for =fcs_pepc= method:
- fcs_int debuglevel
- fcs_int dipole_correction
- fcs_float epsilon
- fcs_int load_balancing
- fcs_float npm
- fcs_int num_walk_threads
- fcs_float theta
- fcs_float r_cut
- fcs_float tolerance
- fcs_int tolerance_type

**** DONE Add PP3MG method
          CLOSED: [2014-04-01 Tue 16:18]

Parameters necessary for =fcs_pp3mg= method:
- fcs_int degree
- fcs_int ghosts
- fcs_int gridsize[NDIM] = gridsize_x, gridsize_y, gridsize_z
- fcs_int max_iterations
- fcs_float r_cut
- fcs_float tolerance
- fcs_int tolerance_type

**** DONE Add VMG method
          CLOSED: [2014-04-01 Tue 16:18]

Parameters necessary for =fcs_vmg=
- fcs_int cycle_type
- fcs_int discretization_order
- fcs_int interpolation_order
- fcs_int max_iterations
- fcs_int max_level
- fcs_int near_field_cells
- fcs_float precision
- fcs_int smoothing_steps
- fcs_float r_cut
- fcs_float tolerance
- fcs_int tolerance_type


*** DONE Finish all methods in solparallel_data.cpp
         CLOSED: [2014-04-01 Tue 16:18]
This includes toString(), parseToParameterString(), saveValues(), getter, setter.

**** DONE Add getter methods for all new member data.
         CLOSED: [2014-03-06 Thu 13:46]

**** DONE Add setter methods for all new member data.
          CLOSED: [2014-03-19 Wed 11:26]

Wrote all setter declaration in solparallel_data.h. Must still write the definitions.

**** DONE Finish toString().
         CLOSED: [2014-03-19 Wed 14:35]

**** DONE Adapt toParameterString() method.
          CLOSED: [2014-03-27 Thu 14:28]
- The parameter identifiers are written in this todo-file or in the manual given ~/tremolo_test/
- Continue after FMM solver with PP3MG_PMG

**** DONE Adapt saveValues() method.
         CLOSED: [2014-04-01 Tue 14:54]

**** TODO Change clear() method (set new Default values?).


*** DONE Add ScaFaCoS methods to solparallel_gui.h
         CLOSED: [2014-04-03 Thu 15:47]

List of all new parameters:
- tolerance
- tolerance_type
- splittingCoefficientAlpha
- periodic_images_x,y,z
- kmax
- maxkmax
- balanceload
- dipole_correction
- maxdepth
- potential
- radius
- unroll_limit
- degree
- ghosts
- gridsize_x,y,z
- max_iterations
- debuglevel
- epsilon
- load_balancing
- npm
- num_walk_threads
- theta
- cycle_type
- discretization_order
- interpolation_order
- max_level
- near_field_cells
- precision
- smoothing_steps
- epsI
- m
- p
- oversampled_gridsize_x,y,z

**** DONE Add slot defintions for all fcs parameter.
         CLOSED: [2014-04-03 Thu 09:17]

**** DONE Add QRadioButtons for fcs solvers.
         CLOSED: [2014-04-01 Tue 16:51]

**** DONE Add labels and line edits for fcs parameter.
         CLOSED: [2014-04-01 Tue 17:29]


*** DONE Add ScaFaCoS methods to solparallel_gui.cpp
        CLOSED: [2014-04-07 Mon 18:25]

**** DONE Adapt languageChange().
         CLOSED: [2014-04-03 Thu 14:52]

**** DONE Adapt updateGui_data().
         CLOSED: [2014-04-03 Thu 15:47]

**** DONE Implement slots for all fcs parameter.
         CLOSED: [2014-04-03 Thu 16:56]

**** DONE Add new buttons, labels and lineEdits to constructor.
         CLOSED: [2014-04-07 Mon 18:25]


*** DONE Debugging [5/5]
        CLOSED: [2014-04-09 Wed 14:55]

**** DONE Invalid parameter error
          CLOSED: [2014-04-09 Wed 14:55]

First try to update branch in tremolo_gui and tremolo.
Ask Johannes about that. Is this a consequence of the implementation of fcs_solvers?

Ask Christian:
- welche ScaFaCoS Solver sind jetzt implementiert?
- remaining problems due to missing implementation of pp3mg_pmg?

**** DONE What about long long vs int?
          CLOSED: [2014-04-08 Tue 14:55]

- long long balanceload
- long long maxdepth
- long long unroll_limit

Changed everything to int.

**** DONE Find origin of method toString().
          CLOSED: [2014-04-08 Tue 13:40]

- template function defined in Parameter_template class.
- SolParallel_Data::toString() called by simulationParameterData::toString().
- simulationParameterData::toString() called by simulationParameterControl::displayAll which ist a slot.
  The output is send to noExpertModeTextEdit (is displayed in expert mode which does not exist yet??)

**** DONE Check buttons, labels and lineEdits in constructor.
          CLOSED: [2014-04-08 Tue 14:43]
Check Validators.
- range
- type (long long and int)

**** DONE Check load balancing parameter in PEPC.
         CLOSED: [2014-04-08 Tue 14:43]



* Aufgaben
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-04-16 Wed 15:57
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_CATEGORY: todos
  :END:
  - Note taken on [2014-04-09 Wed 14:56] \\
        Besprechung mit Christian:

        Ziel: Hinzufügen einer strain timeline zu tremolo

        Was ich mir anschauen soll:
        1. Code von timeline und external
        2. Paper zu Strain/Stress ensembles
        3. timeline feature

        Was ich langfristig machen soll:
        1. Timeline parser für strain

* DONE Create new branch
   CLOSED: [2014-04-27 Sun 11:53]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-05-07 Wed 16:23
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Refactoring of "Potentials" page [5/7]
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
** DONE First pull all changes from remote repository.
   CLOSED: [2014-04-27 Sun 11:49]
** DONE Create new branch
         CLOSED: [2014-04-27 Sun 11:53]
Created new branch with name
: feature/potentials


* DONE What interfaces are given?
   CLOSED: [2014-05-07 Wed 15:12]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-05-07 Wed 16:23
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Refactoring of "Potentials" page [5/7]
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
** DONE Where is the "Potentials" tab created?
         CLOSED: [2014-05-07 Wed 15:12]
The PotentialParameterUI object is created in the constructor of the main window (see tremologui.h). It is a child object of TremoloGUI:
: PotentialParameterUI* potentialparametertab;
The potentialtab object is used in the following lines of tremologui.cpp
- l.106-109 :: Initialization of potentialparametertab and addition to the maintab widget
- l.110 :: Connect the isChanged(bool) signal of myProject to the setEnabled(bool) signal of potentialparametertab (derived from QWidget)
- l.112 :: Create a new PotentialParameter_Data object from the one saved in potentialparametertab. The copy is then used to construct the simulation tab.
- l.290 :: Connect the newSaveState() signal of potentialparametertab to the dataUpdateSavedStatus slot updating the state of the saveallbutton
- l.459 :: Checks save state of potentialparametertab
- l.651 :: TremoloGUI::projectChanged() sends update requests to all dataclasses. In potentialparametertab the reloadfile() method is called which is doing nothing??
- l.711 :: TremoloGUI::dataUpdateSavedStatus() updates the state of the saveallbutton
- l.719 :: TremoloGUI::dataSaveAllSlot() calls the saveslots from every dataclass. In potentialparametertab the fileSave() method is called.
- l.739,753,764 :: TremoloGUI::checkAndLoad/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject() set the save state of potentialparametertab.
** DONE What signals/slots are given?
         CLOSED: [2014-05-07 Wed 15:12]
In PotentialParameterUI the following slots are needed within tremologui.cpp:
- setEnabled(bool) exists by default (since derived from QWidget)
The following signals are needed within tremologui.cpp:
- newSaveState()
** DONE Where are all the other classes created?
   CLOSED: [2014-05-07 Wed 15:12]
** DONE List of functions that must be present
         CLOSED: [2014-05-07 Wed 15:12]
- bool issaved storing the save-state
- bool isSaved()
  returns issaved
  used in TremoloGUI::unsavedData() (see line 459 of tremologui.cpp)
  used in TremoloGUI::unsavedData() (see line 711 of tremologui.cpp)
- void setSavedStatus(bool status)
  sets the issaved variable to status
  used in TremoloGUI::checkandload/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject (see lines 739, 753 and 764 of tremologui.cpp)
- void reloadfile(QString filename)
  reload potentials file
  used in TremoloGUI::projectChanged() (see line 651 of tremologui.cpp)
- bool fileSave() (slot)
  save file and return true if everything is ok, false otherwise, ask for validity?
  used in TremoloGUI::dataSaveAllSlot() (see line 719 of tremologui.cpp)
- void newSaveState() (signal)
  should be emitted if the save state changes


* DONE Implementation of new "Potentials" tab
   CLOSED: [2014-05-07 Wed 15:12]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-05-07 Wed 16:23
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Refactoring of "Potentials" page [5/7]
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
*** Example: Files for Datafile-tab
parametertextedit.h
parametertextedit.cpp
**** Description of parametertextedit.h and parametertextedit.cpp
- Two classes
  1. class textEditStatusBar : public QWidget
  2. class parameterTextEdit : public QMainWindow

*** Description of textEditStatusBar class

Implements the status bar in the "Datafile"-tab (just at the lower end of the window).

The status bar consists of 4 different frames (QFrame) containing each a QLabel with
+ the current position of the cursor
+ a indicator that shows if the file has been changed
+ the type of the file
+ the name of the file

The layout is managed by a QHBoxLayout for the statusbar itself and for different GridLayouts for each of the frames.

The following slots are implemented:
+ changeCurrentPos
+ setFilename
+ setEditMode
+ languageChange

*** Description of parameterTextEdit class

Implements a texteditor for datafiles in the "Datafile"-tab. It is essentially a QMainWindow with a QTextEdit. Moreover the class has a textEditStatusBar as child object.

The class contains the following children:
+ QTextEdit for the texteditor window
+ QToolBar a toolbar for the texteditor
+ QActions for all buttons on the toolbar
+ QStrings to save the parameter file and a suffix
+ textEditStatusBar
+ bools for different indications

The layout is managed by only one QVBoxLayout.

There are only a few method implemented in the class:
+ bool isSaved() const // returns true if the file is saved
+ void setSavedStatus(bool status) // sets the status of the file
+ void fileLoad(QString File) // loads the file that is supposed to be edited
+ void renewTextEdit2() // ?

Slots:
+ void fileSave() // saves the file
+ void reloadfile(QString parameterFileIn) // reload the file
+ void clearBuffer(bool ask=true) // ?
+ void setLoadingfileStatus(bool status) // ?
+ void enableFileSaveAction(void) // ?
+ void changeCurrentPos (void) // ?
+ void fileOpen() // open new file
+ fileSaveAs() // save file as
+ textEditChanged // action if textEdit has been changed
+ virtual void languageChange() // set language

Signals:
+ void newSaveState() // is send if the save-state of the file changes



* DONE Get overview over all source files that are used for the "Potentials" tab
   CLOSED: [2014-05-07 Wed 15:13]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-05-07 Wed 16:23
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Refactoring of "Potentials" page [5/7]
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
** Main Window : PotentialParameterUI
Can be found in
- potentialparameterui.h
- potentialparameterui.cpp

The class is derived from the PotentialParameterUISuperClass.
It contains
1. =ParticleWidget* particleWidget : public PotentialParameterWidget=
   Widget containing the upper half of the main window ("Particle types").
   The Widget contains
   - ParticleTable* particleTable : public PotentialParameterTable
   - PotentialParameter_Data* myPotentialParameter_Data
   - TremoloGUIConfig* myConfig
   - QPushButtons* disableParticleTypeButton and enableParticleTypeButton
   - QLabel* warningLabel
2. =QTabWidget* potentialsTabWidget=
   This tab widget is the main tab bar for the second half of the main window (potential selection).
   It hosts the following tabs:
   - "Non-bonded Potentials" (-> nonBondedTabWidget)
   - "Bonded Potentials (off)" (-> bondedTabWidget)
   - "TB tapered Potentials (off)" (-> tbTaperedWidget and tbTaperedTabWidget)
3. =QTabWidget* bondedTabWidget=
   This tab widget is the main tab bar for the "Bonded Potentials (off)" page.
   It contains the following widgets (all child objects of the PotentialParamerUI class):
   - AngleWidget* angleWidget
   - BondsWidget* bondsWidget
   - ImproperWidget* improperWidget
4. =QTabWidget* nonBondedTabWidget=
   This tab widget is the main tab bar for the "Non-bonded Potentials" page.
   It contains all widgets for the different potentials (all child objects of the PotentialParameterUI class):
   - QWidget* brennerWidget and Q3Table* brennerTable;
   - EamWidget* eamWidget;
   - Q3VBox* coulomb_ERFCBox and Coulomb_ERFCWidget* coulomb_ERFCWidget;
   - LennardJonesWidget* lennardJonesWidget;
   - M_N_LennardJonesWidget* m_n_lennardJonesWidget;
   - LJSplineWidget* ljSplineWidget;
   - LJSpline2Widget* ljSpline2Widget;
   - RSL2Widget* rsl2Widget;
   - StiWeWidget* stiWeWidget;
   - StiWe3BodyWidget* stiWe3BodyWidget;
   - SuttonChenWidget* suttonChenWidget;
   - Q3VBox* tersoffBox;
5. =QTabWidget* tbTaperedTabWidget=
   This tab widget is the main tab bar for the "TB tapered Potentials (off)".
   It is contained in the QWidget* tbTaperedWidget and contains the following widges (all child object of the PotentialParameterUI class):
   - TBBuckinghamWidget* tbBuckinghamWidget;
   - TBTaperedGen1Widget* tbTaperedGen1Widget;
   - TBTaperedGen2Widget* tbTaperedGen2Widget;
   - TBMorseWidget* tbmorseWidget;
   - BN3bodyWidget* bn3bodyWidget;
   - DampedDispWidget* dampedDispWidget;

** Corresponding data file: PotentialParameter_Data
**** Implements:
class PotentialParameter_Data
**** Description:
The class contains all data that is necessary to write the potentials and the validates file.
***** Members (only important ones)
- instances of all potentials
- pointer to the project (Project_Control* myProject)
- pointer to the configuration (TremoloGUIConfig* myConfig)
- a parser (ParameterParser* myParser)
- pointer to the PotentialParameterUI parent class (PotentialParameterUISuperClass* parentUI)
- booleans to indicate which potentials are going to be used
- boolean loadingFile (if true some tests are skipped -> faster loading)
***** Member functions (only important ones)
- getter and setter methods for all potentials
- saveValues(): uses the Output of the parser and saves all data from the file into the data structure - this method is called within ParameterParser::parseFile()
- writeToFile(): Opens a file for writing, calls toParameterFileString() and writes all data to the file
- writeToValidatesFile(): Analougously to writeToFile() but for the validates data.
- readFromFile(): starts the parser for the given file and then saves all data to the data structure
- projectHasChanged(): important SLOT that is called whenever something in the project changed (sinal of Project_Control* myProject) - it calls clear() and readFromFile()
- SIGNALS: signals that indicate if a potential changed
- SLOTS: slots for removing/setting potential data
- some helper methods for file writing (getPOTENTIALNAMEDataFileString()) for each potential
***** Constructor
1. Set myConfing, myProject, p_parent_UI
2. Create all potential objects
3. Set all m_usePOTENTIALNAME booleans to false
4. Set loadingFile boolean to false
5. Initialize myParser and register data class of this in parser
6. Add some connections
**** Derived classes:
None.
**** Questions:
- By which classes is the PotentialParameter_Data class used?
**** Must be changed?
Yes.
This class reads from the file and writes the potentials/validats files.
- The writing functionality must be deleted
- The parsing functionality must be maintained


* Arbeitszeiten
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-05-13 Tue 17:09
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_CATEGORY: todos
  :END:
- [2013-12-16 Sat 16:30]--[2013-12-16 Mon 18:00]

- [2013-12-18 Wed 17:30]--[2013-12-18 Wed 19:56]
- [2013-12-19 Thu 14:00]--[2013-12-19 Thu 17:02]
- [2014-01-05 Sun 14:30]--[2014-01-05 Sun 19:30]

- [2014-01-07 Tue 12:17]--[2014-01-07 Tue 14:00]
- [2014-01-09 Thu 12:15]--[2014-01-09 Thu 14:00]
- [2014-01-11 Sat 09:17]--[2014-02-11 Tue 13:15]
- [2014-01-12 Sun 13:25]--[2014-02-12 Wed 17:00]

- [2014-01-13 Mon 13:30]--[2014-01-13 Mon 15:15]
- [2014-01-16 Thu 14:15]--[2014-01-16 Thu 16:32]
- [2014-01-19 Sun 09:06]--[2014-01-19 Sun 13:00]

- [2014-01-20 Mon 16:58]--[2014-01-20 Mon 18:30]
- [2014-01-21 Tue 12:00]--[2014-01-21 Tue 13:55]
- [2014-01-23 Thu 12:15]--[2014-01-23 Thu 13:55]
- [2014-01-25 Sat 09:00]--[2014-01-25 Sat 14:00]

- [2014-01-27 Mon 10:21]--[2014-01-27 Mon 11:30]
- [2014-01-27 Mon 13:35]--[2014-01-27 Mon 15:40]
- [2014-01-28 Tue 14:44]--[2014-01-28 Tue 17:30]
- [2014-01-29 Wed 09:19]--[2014-01-29 Wed 12:25]
- [2014-01-30 Thu 10:30]--[2014-01-30 Thu 11:25]
- [2014-01-30 Thu 12:20]--[2014-01-30 Thu 15:35]

- [2014-02-03 Mon 13:58]--[2014-02-03 Mon 15:45]
- [2014-02-05 Wed 09:47]--[2014-02-05 Wed 13:45]
- [2014-02-06 Thu 10:00]--[2014-02-06 Thu 12:00]
- [2014-02-06 Thu 13:00]--[2014-02-06 Thu 14:41]
- [2014-02-07 Fri 10:15]--[2014-02-07 Fri 12:00]
- [2014-02-07 Fri 17:00]--[2014-02-07 Fri 18:28]
- [2014-02-08 Sat 11:20]--[2014-02-08 Sat 13:00]

- [2014-02-10 Mon 12:54]--[2014-02-10 Mon 14:54]
- [2014-02-11 Tue 10:13]--[2014-02-11 Tue 11:40]
- [2014-02-12 Wed 12:46]--[2014-02-12 Wed 15:00]
- [2014-02-13 Thu 12:57]--[2014-02-13 Thu 14:00]
- [2014-02-13 Thu 16:12]--[2014-02-13 Thu 18:40]
- [2014-02-14 Fri 10:53]--[2014-02-14 Fri 11:55]

- [2014-02-18 Tue 12:54]--[2014-02-18 Tue 16:30]
- [2014-02-19 Wed 09:28]--[2014-02-19 Wed 12:15]
- [2014-02-19 Wed 13:30]--[2014-02-19 Wed 16:06]
- [2014-02-20 Thu 09:28]--[2014-02-20 Thu 11:55]

- [2014-03-06 Thu 08:35]--[2014-03-06 Thu 12:19]

- [2014-03-10 Mon 13:15]--[2014-03-10 Mon 14:15]

- [2014-03-28 Fri 16:00]--[2014-03-28 Fri 17:30]

- [2014-04-01 Tue 13:38]--[2014-04-01 Tue 17:40]

- [2014-04-03 Thu 08:45]--[2014-04-03 Thu 09:45]

- [2014-04-03 Thu 13:30]--[2014-04-03 Thu 17:36]
- [2014-04-06 Sun 16:30]--[2014-04-06 Sun 19:38]

- [2014-04-07 Mon 13:57]--[2014-04-07 Mon 18:00]
- [2014-04-08 Tue 12:59]--[2014-04-08 Tue 15:00]
- [2014-04-09 Wed 13:00]--[2014-04-09 Wed 14:54]

- [2014-04-21 Mon 14:00]--[2014-04-21 Mon 18:00]
- [2014-04-15 Tue 14:44]--[2014-04-15 Tue 15:44]
- [2014-04-16 Wed 14:00]--[2014-04-16 Wed 15:30]

- [2014-04-23 Wed 13:28]--[2014-04-23 Wed 16:00]
- [2014-04-24 Thu 16:47]--[2014-04-24 Thu 18:30]
- [2014-04-27 Sun 11:21]--[2014-04-27 Sun 14:00]

- [2014-04-28 Mon]--[2014-05-04 Sun]
  - [2014-04-28 Mon 10:37]--[2014-04-28 Mon 11:40]
  - [2014-04-30 Wed 09:58]--[2014-04-30 Wed 11:58]
  - [2014-04-30 Wed 13:00]--[2014-04-30 Wed 15:30]
  - [2014-05-03 Sat 09:00]--[2014-05-03 Sat 11:00]

- [2014-05-05 Mon]--[2014-05-11 Sun]
  - [2014-05-05 Mon 10:07]--[2014-05-05 Mon 11:40]
  - [2014-05-05 Mon 15:02]--[2014-05-05 Mon 17:30]
  - [2014-05-07 Wed 14:00]--[2014-05-07 Wed 16:30]
  - [2014-05-08 Thu 12:27]--[2014-05-08 Thu 14:00]



* DONE Create new branch
   CLOSED: [2014-04-27 Sun 11:53]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-05-13 Tue 17:28
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Refactoring of "Potentials" page [5/7]
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
** DONE First pull all changes from remote repository.
   CLOSED: [2014-04-27 Sun 11:49]
** DONE Create new branch
         CLOSED: [2014-04-27 Sun 11:53]
Created new branch with name
: feature/potentials


* TODO Debugging [1/7]
  CLOCK: [2014-06-03 Tue 15:24]--[2014-06-03 Tue 15:58] =>  0:34
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-06-04 Wed 12:45
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Refactoring of "Potentials" page [6/11]
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: TODO
  :END:
** DONE Load file at startup
   CLOSED: [2014-06-03 Tue 15:44]
** TODO Fix status bar
- Adapt size of status bar.
- Add connections for the status bar.
** TODO Set connections.
** TODO createFile() slot
After starting tremologui and loading a project. The newFileAction does not give a warning when unsaved data is given in the textedit. (Only at the first time!)
** TODO Need some sort of undo-Action or some option to revert a new potentials file.
If one has opened a potentials file and makes some changes. And then push either the createNewFile button or the openNewFile-button, there is no possibility to go back to the last file.
** TODO Rewrite warning dialogs
The warning is displayed whenever:
- the save button is activated
- the saveAll button is activated
- a new project is created
- a project is opened
** TODO Do I need enable/disable handling?

* TODO Debugging [1/7]
  CLOCK: [2014-06-03 Tue 15:24]--[2014-06-03 Tue 15:58] =>  0:34
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-06-04 Wed 12:46
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Refactoring of "Potentials" page [6/11]
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: TODO
  :END:
** DONE Load file at startup
   CLOSED: [2014-06-03 Tue 15:44]
** TODO Fix status bar
- Adapt size of status bar.
- Add connections for the status bar.
** TODO Set connections.
** TODO createFile() slot
After starting tremologui and loading a project. The newFileAction does not give a warning when unsaved data is given in the textedit. (Only at the first time!)
** TODO Need some sort of undo-Action or some option to revert a new potentials file.
If one has opened a potentials file and makes some changes. And then push either the createNewFile button or the openNewFile-button, there is no possibility to go back to the last file.
** TODO Rewrite warning dialogs
The warning is displayed whenever:
- the save button is activated
- the saveAll button is activated
- a new project is created
- a project is opened
** TODO Do I need enable/disable handling?

* DONE Find bugs in displaying of units
  CLOSED: [2014-06-23 Mon 14:40]
  CLOCK: [2014-05-26 Mon 17:26]--[2014-05-26 Mon 18:58] =>  1:32
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-06-23 Mon 14:40
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
  - Note taken on [2014-05-26 Mon 10:58] \\
        Aufgabe von Johannes
        Bei der Portierung von Tremologui auf Windows werden manche Einheiten nicht korrekt angezeigt.
        Das betrifft zum einen das Angstrom-Zeichen und zum anderen underscores.
        Hier sind zwei Screenshots:
        - [[file:pics/Screenshot.png][TremoloGUI - buggy unit display in Windows]]
        - [[file:pics/Screenshot2.png][TremoloGUI - working unit display in Windows]]

** Unit display for TB Taper x_i(A) in Potentials
- PotentialParameter_Data: getttbTaperxiUnit
- TremologuiConfig: trDisplayUnits(StandardisedDouble)
- UnitsMap[].displayString
- TremoloGUI_CommonTypes: Angstroem.setUtf16(&b,1)

** Unit display for particles table in Potentials
- ParticleType:



* Aufgaben
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-06-24 Tue 12:15
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_CATEGORY: todos
  :END:
  - Note taken on [2014-06-16 Mon 13:36] \\
        Besprechung mit Christian
        Folgende Änderungen müssen noch durchgeführt werden:
        1. Hinzufügen von "undo/redo" buttons
        2. Anpassen des "Solvers and Parallelization" tabs:
           - Benenne tab in "Parallelization" um
           - Entferne alles was mit den Solvern zu tun hat
  - Note taken on [2014-05-07 Wed 15:17] \\
        Besprechung mit Christian am [2014-05-07 Wed]

        Überarbeitung des "Potentials" tab - Zusammenfassung:
        1. Behalte Trennung von Data und GUI bei:
           - PotentialParameter_Data enthält:
                 + Parser
                 + QStringList mit particle types
                 + ggfs. weitere Data
           - PotentialParameter_GUI enthält alle benötigten Widgets:
                 + Menüleiste mit "New", "Open", "Save" Button
                 + Editor-Fenster
                 + Platz für spätere Widgets
        2. Beschreibung der 3 Buttons:
           - "New" ::
                 - gibt Warnung aus
                 - erstellt leeres $Project.potentials file
                 - ruft Parser auf und updated data (particle types etc.)
                 - erstellt zugehöriges $Project.validates file
           - "Open" ::
                 - öffnet eine Öffnen-Dialog
                 - gibt Warnung aus (nach Wahl eines files)
                 - erstellt lokale Kopie des ausgewählten files im Projekt-Ordner
                 - ruft Parser auf und updated data
                 - erstellt zugehöriges $Project.validates file
                 - WICHTIG: soll erweiterbar sein
           - "Save" ::
                 - nur enabled wenn $Project.potentials file sich geändert hat
                 - gibt Warnung aus
                 - speichert Änderungen im $Project.potentials file
                 - ruft Parser auf und updated data
                 - erstellt zugehöriges $Project.validates file
        3. "Save-All" button
           Rufe slot des "Save"-Buttons auf, wenn der "Save-All" button des Main Windows angeklickt wurde.
        4. Eventuell noch "Undo" and "Redo" Buttons?
  - Note taken on [2014-04-16 Wed 15:57] \\
        Besprechung mit Christian um [2014-04-16 Wed 15:57]
        Zwei Aufgabenziele:
        1. Kurzfristiges Ziel:
           Überarbeitung des "potentials" tabs
           - Übernehme Elemente von "Datafile" tab
           - Obere 2/3 des Tabs: Editor-Fenster in das ein Potentials-file geladen werden soll
                 - der Editor soll die Funktionen "open" and "save" bereitstellen
                 - open-button:
                   + soll erweiterbar sein (d.h. es sollen noch mögliche "Suchfunktionen" eingebunden werden können -> handler)
                   + vorerst: einen beliebigen Ordner öffnen
                   + nach .potential files filtern
                   + nachdem der Nutzer ein file ausgewählt hat, soll eine Kopie des files in den Projekt-Ordner gelegt werden mit dem Namen "PROJECTNAME.potentials"
                   + falls nach Sicherung eines .potential-files ein weiteres file geöffnet wird, soll eine Warnung zum "Datenverlust" abgegeben werden.
                 - save-button:
                   + speichert die Änderungen im .potentials file.
           - Stelle sicher, dass immer ein .validates-file erzeugt wird (notfalls auch leer (default)).
        2. Langfristiges Ziel:
           - Verifizieren von Ensembles
           - etwas mit Monte-Carlo Methoden (siehe folgende Links)
                 - [[file:~/Work/literature/Possible%20Master%20topics/Combining%20molecular%20dynamics%20with%20Monte%20Carlo%20simulations.pdf][Combining molecular dynamics and Monte Carlo methods]]
                 - [[file:~/Work/literature/Possible%20Master%20topics/Uniform-acceptance%20force-bias%20Monte%20Carlo%20method%20with%20time%20scale%20to%20study%20solid-state%20diffusion.pdf][Uniform-acceptance force-bias Monte Carlo method]]

** TODO Refactoring of "Potentials" page [14/16]
   CLOCK: [2014-06-03 Tue 12:12]--[2014-06-03 Tue 13:57] =>  1:45
   CLOCK: [2014-06-02 Mon 12:11]--[2014-06-02 Mon 13:22] =>  1:11
   CLOCK: [2014-06-02 Mon 10:21]--[2014-06-02 Mon 11:25] =>  1:04
   CLOCK: [2014-05-28 Wed 14:03]--[2014-05-28 Wed 16:38] =>  2:35
   CLOCK: [2014-05-28 Wed 12:04]--[2014-05-28 Wed 12:45] =>  0:41
   CLOCK: [2014-05-27 Tue 15:15]--[2014-05-27 Tue 15:50] =>  0:35
   CLOCK: [2014-05-27 Tue 12:43]--[2014-05-27 Tue 14:15] =>  1:32
   CLOCK: [2014-05-26 Mon 10:48]--[2014-05-26 Mon 11:48] =>  1:00
   CLOCK: [2014-05-23 Fri 13:43]--[2014-05-23 Fri 15:27] =>  1:44
   CLOCK: [2014-05-22 Thu 16:58]--[2014-05-22 Thu 18:11] =>  1:13
   CLOCK: [2014-05-22 Thu 12:39]--[2014-05-22 Thu 16:10] =>  3:31
   CLOCK: [2014-05-21 Wed 16:20]--[2014-05-21 Wed 17:20] =>  1:00
   CLOCK: [2014-05-21 Wed 14:31]--[2014-05-21 Wed 16:11] =>  1:40
   CLOCK: [2014-05-16 Fri 17:44]--[2014-05-16 Fri 19:16] =>  1:32
   CLOCK: [2014-05-16 Fri 14:31]--[2014-05-16 Fri 16:36] =>  2:05
   CLOCK: [2014-05-15 Thu 12:33]--[2014-05-15 Thu 13:56] =>  1:23
   CLOCK: [2014-05-15 Thu 10:19]--[2014-05-15 Thu 11:24] =>  1:05
   CLOCK: [2014-05-14 Wed 16:51]--[2014-05-14 Wed 18:34] =>  1:43
   CLOCK: [2014-05-14 Wed 14:46]--[2014-05-14 Wed 15:37] =>  0:51
   CLOCK: [2014-05-14 Wed 14:30]--[2014-05-14 Wed 14:46] =>  0:16
   CLOCK: [2014-05-13 Tue 17:26]--[2014-05-13 Tue 19:03] =>  1:37
*** DONE What interfaces are given?
         CLOSED: [2014-05-07 Wed 15:12]
**** DONE Where is the "Potentials" tab created?
         CLOSED: [2014-05-07 Wed 15:12]
The PotentialParameterUI object is created in the constructor of the main window (see tremologui.h). It is a child object of TremoloGUI:
: PotentialParameterUI* potentialparametertab;
The potentialtab object is used in the following lines of tremologui.cpp
- l.106-109 :: Initialization of potentialparametertab and addition to the maintab widget
- l.110 :: Connect the isChanged(bool) signal of myProject to the setEnabled(bool) signal of potentialparametertab (derived from QWidget)
- l.112 :: Create a new PotentialParameter_Data object from the one saved in potentialparametertab. The copy is then used to construct the simulation tab.
- l.290 :: Connect the newSaveState() signal of potentialparametertab to the dataUpdateSavedStatus slot updating the state of the saveallbutton
- l.459 :: Checks save state of potentialparametertab
- l.651 :: TremoloGUI::projectChanged() sends update requests to all dataclasses. In potentialparametertab the reloadfile() method is called which is doing nothing??
- l.711 :: TremoloGUI::dataUpdateSavedStatus() updates the state of the saveallbutton
- l.719 :: TremoloGUI::dataSaveAllSlot() calls the saveslots from every dataclass. In potentialparametertab the fileSave() method is called.
- l.739,753,764 :: TremoloGUI::checkAndLoad/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject() set the save state of potentialparametertab.
**** DONE What signals/slots are given?
         CLOSED: [2014-05-07 Wed 15:12]
In PotentialParameterUI the following slots are needed within tremologui.cpp:
- setEnabled(bool) exists by default (since derived from QWidget)
The following signals are needed within tremologui.cpp:
- newSaveState()
**** DONE Where are all the other classes created?
         CLOSED: [2014-05-07 Wed 15:12]
**** DONE List of functions that must be present
         CLOSED: [2014-05-07 Wed 15:12]
- bool issaved storing the save-state
- bool isSaved()
  returns issaved
  used in TremoloGUI::unsavedData() (see line 459 of tremologui.cpp)
  used in TremoloGUI::unsavedData() (see line 711 of tremologui.cpp)
- void setSavedStatus(bool status)
  sets the issaved variable to status
  used in TremoloGUI::checkandload/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject (see lines 739, 753 and 764 of tremologui.cpp)
- void reloadfile(QString filename)
  reload potentials file
  used in TremoloGUI::projectChanged() (see line 651 of tremologui.cpp)
- bool fileSave() (slot)
  save file and return true if everything is ok, false otherwise, ask for validity?
  used in TremoloGUI::dataSaveAllSlot() (see line 719 of tremologui.cpp)
- void newSaveState() (signal)
  should be emitted if the save state changes

*** DONE Implementation of new "Potentials" tab
         CLOSED: [2014-05-07 Wed 15:12]
***** Example: Files for Datafile-tab
parametertextedit.h
parametertextedit.cpp
****** Description of parametertextedit.h and parametertextedit.cpp
- Two classes
  1. class textEditStatusBar : public QWidget
  2. class parameterTextEdit : public QMainWindow

***** Description of textEditStatusBar class

Implements the status bar in the "Datafile"-tab (just at the lower end of the window).

The status bar consists of 4 different frames (QFrame) containing each a QLabel with
+ the current position of the cursor
+ a indicator that shows if the file has been changed
+ the type of the file
+ the name of the file

The layout is managed by a QHBoxLayout for the statusbar itself and for different GridLayouts for each of the frames.

The following slots are implemented:
+ changeCurrentPos
+ setFilename
+ setEditMode
+ languageChange

***** Description of parameterTextEdit class

Implements a texteditor for datafiles in the "Datafile"-tab. It is essentially a QMainWindow with a QTextEdit. Moreover the class has a textEditStatusBar as child object.

The class contains the following children:
+ QTextEdit for the texteditor window
+ QToolBar a toolbar for the texteditor
+ QActions for all buttons on the toolbar
+ QStrings to save the parameter file and a suffix
+ textEditStatusBar
+ bools for different indications

The layout is managed by only one QVBoxLayout.

There are only a few method implemented in the class:
+ bool isSaved() const // returns true if the file is saved
+ void setSavedStatus(bool status) // sets the status of the file
+ void fileLoad(QString File) // loads the file that is supposed to be edited
+ void renewTextEdit2() // ?

Slots:
+ void fileSave() // saves the file
+ void reloadfile(QString parameterFileIn) // reload the file
+ void clearBuffer(bool ask=true) // ?
+ void setLoadingfileStatus(bool status) // ?
+ void enableFileSaveAction(void) // ?
+ void changeCurrentPos (void) // ?
+ void fileOpen() // open new file
+ fileSaveAs() // save file as
+ textEditChanged // action if textEdit has been changed
+ virtual void languageChange() // set language

Signals:
+ void newSaveState() // is send if the save-state of the file changes

*** DONE Get overview over all source files that are used for the "Potentials" tab
         CLOSED: [2014-05-07 Wed 15:13]
**** Main Window : PotentialParameterUI
Can be found in
- potentialparameterui.h
- potentialparameterui.cpp

The class is derived from the PotentialParameterUISuperClass.
It contains
1. =ParticleWidget* particleWidget : public PotentialParameterWidget=
   Widget containing the upper half of the main window ("Particle types").
   The Widget contains
   - ParticleTable* particleTable : public PotentialParameterTable
   - PotentialParameter_Data* myPotentialParameter_Data
   - TremoloGUIConfig* myConfig
   - QPushButtons* disableParticleTypeButton and enableParticleTypeButton
   - QLabel* warningLabel
2. =QTabWidget* potentialsTabWidget=
   This tab widget is the main tab bar for the second half of the main window (potential selection).
   It hosts the following tabs:
   - "Non-bonded Potentials" (-> nonBondedTabWidget)
   - "Bonded Potentials (off)" (-> bondedTabWidget)
   - "TB tapered Potentials (off)" (-> tbTaperedWidget and tbTaperedTabWidget)
3. =QTabWidget* bondedTabWidget=
   This tab widget is the main tab bar for the "Bonded Potentials (off)" page.
   It contains the following widgets (all child objects of the PotentialParamerUI class):
   - AngleWidget* angleWidget
   - BondsWidget* bondsWidget
   - ImproperWidget* improperWidget
4. =QTabWidget* nonBondedTabWidget=
   This tab widget is the main tab bar for the "Non-bonded Potentials" page.
   It contains all widgets for the different potentials (all child objects of the PotentialParameterUI class):
   - QWidget* brennerWidget and Q3Table* brennerTable;
   - EamWidget* eamWidget;
   - Q3VBox* coulomb_ERFCBox and Coulomb_ERFCWidget* coulomb_ERFCWidget;
   - LennardJonesWidget* lennardJonesWidget;
   - M_N_LennardJonesWidget* m_n_lennardJonesWidget;
   - LJSplineWidget* ljSplineWidget;
   - LJSpline2Widget* ljSpline2Widget;
   - RSL2Widget* rsl2Widget;
   - StiWeWidget* stiWeWidget;
   - StiWe3BodyWidget* stiWe3BodyWidget;
   - SuttonChenWidget* suttonChenWidget;
   - Q3VBox* tersoffBox;
5. =QTabWidget* tbTaperedTabWidget=
   This tab widget is the main tab bar for the "TB tapered Potentials (off)".
   It is contained in the QWidget* tbTaperedWidget and contains the following widges (all child object of the PotentialParameterUI class):
   - TBBuckinghamWidget* tbBuckinghamWidget;
   - TBTaperedGen1Widget* tbTaperedGen1Widget;
   - TBTaperedGen2Widget* tbTaperedGen2Widget;
   - TBMorseWidget* tbmorseWidget;
   - BN3bodyWidget* bn3bodyWidget;
   - DampedDispWidget* dampedDispWidget;

**** Corresponding data file: PotentialParameter_Data
****** Implements:
class PotentialParameter_Data
****** Description:
The class contains all data that is necessary to write the potentials and the validates file.
******* Members (only important ones)
- instances of all potentials
- pointer to the project (Project_Control* myProject)
- pointer to the configuration (TremoloGUIConfig* myConfig)
- a parser (ParameterParser* myParser)
- pointer to the PotentialParameterUI parent class (PotentialParameterUISuperClass* parentUI)
- booleans to indicate which potentials are going to be used
- boolean loadingFile (if true some tests are skipped -> faster loading)
******* Member functions (only important ones)
- getter and setter methods for all potentials
- saveValues(): uses the Output of the parser and saves all data from the file into the data structure - this method is called within ParameterParser::parseFile()
- writeToFile(): Opens a file for writing, calls toParameterFileString() and writes all data to the file
- writeToValidatesFile(): Analougously to writeToFile() but for the validates data.
- readFromFile(): starts the parser for the given file and then saves all data to the data structure
- projectHasChanged(): important SLOT that is called whenever something in the project changed (sinal of Project_Control* myProject) - it calls clear() and readFromFile()
- SIGNALS: signals that indicate if a potential changed
- SLOTS: slots for removing/setting potential data
- some helper methods for file writing (getPOTENTIALNAMEDataFileString()) for each potential
******* Constructor
1. Set myConfing, myProject, p_parent_UI
2. Create all potential objects
3. Set all m_usePOTENTIALNAME booleans to false
4. Set loadingFile boolean to false
5. Initialize myParser and register data class of this in parser
6. Add some connections
****** Derived classes:
None.
****** Questions:
- By which classes is the PotentialParameter_Data class used?
****** Must be changed?
Yes.
This class reads from the file and writes the potentials/validats files.
- The writing functionality must be deleted
- The parsing functionality must be maintained
*** DONE Draft for the new "Potentials" tab
         CLOSED: [2014-06-02 Mon 10:23]
        - Note taken on [2014-05-13 Tue 19:00] \\
          Questions:
          - How is the content of a file stored in QTextEdit?
          - Does it needs the underlying file?
          - Can a file be savely loaded by QTextEdit and changes made in the QTextEdit without modifying the initial file?
          Answers:
          It seems that QTextEdit does not need an underlying file:
          The text of a QFile is loaded in the QTextEdit using setText() which only needs a QString.
          The underlying file can be closed after loading and is not modified afterwards. This only depends on the save method.
        - Note taken on [2014-05-13 Tue 17:28] \\
          1. At creation of a new project -> create empty .potentials and .validates files.
          2. Warning at "Save" button: try to avoid warnings at "New" and "Open" buttons.
             - For the "New" button: NO warning necessary -> only warning when hitting "Save" button
             - For the "Open" button: Depends how the editor loads the file.
**** DONE Draft for PotentialTextEditStatusBar : public QWidget
         CLOSED: [2014-05-14 Wed 18:05]
***** Specifications:
Status bar having the following fields: (from left to right)
1. Current position in line and column
2. Save status
3. Current status (File loaded + name, file saved, created new file, file modified)
4. Name of the file
***** Members:
QHBoxLayout* textEditStatusBarLayout
QGridLayout* frame1Layout
QGridLayout* frame2Layout
QGridLayout* frame3Layout
QGridLayout* frame4Layout
QFrame* frame1 // for current position
QFrame* frame2 // for save status
QFrame* frame3 // for current status
QFrame* frame4 // for name of the file
QLabel* label1 // for current position
QLabel* label2 // for save status
QLabel* label3 // for current status
QLabel* label4 // for name of the file
***** Slots:
void setCurrentPos(int lin = 0, int col = 0)
void setSaveStatus(bool saved = true)
void setCurrentStatus(QString message)
void setFileName(QString filename)
void languageChange()
*** DONE Change ParticleType class
*** DONE Make a list of all files that are not needed anymore
         CLOSED: [2014-05-28 Wed 15:30]
        1. [X] anglewidget.h
        2. [X] angletable.h
        3. [X] angle.h
        4. [X] bn3bodywidget.h
        5. [X] bn3bodytable.h
        6. [X] bn3body.h
        7. [X] bondswidget.h
        8. [X] bondtable.h
        9. [X] bond.h
        10. [X] eamwidget.h
        11. [X] eam.h
        12. [X] dampeddispwidget.h
        13. [X] dampeddisptable.h
        14. [X] dampeddisp.h
        15. [X] particlewidget.h
        16. [X] particletable.h
        17. [X] torsionwidget.h
        18. [X] torsiontable.h
        19. [X] torsion.h
        20. [X] m_n_lennardjoneswidget.h
        21. [X] m_n_lennardjonestable.h
        22. [X] m_n_lennardjones.h
        23. [X] lennardjoneswidget.h
        24. [X] lennardjonestable.h
        25. [X] lennardjones.h
        26. [X] ljsplinewidget.h
        27. [X] ljsplinetable.h
        28. [X] ljspline.h
        29. [X] ljspline2widget.h
        30. [X] ljspline2table.h
        31. [X] ljspline2.h
        32. [X] improperwidget.h
        33. [X] impropertable.h
        34. [X] improper_datatype.h
        35. [X] coulomb_erfcwidget.h
        36. [X] coulomb_erfctable.h
        37. [X] coulomb_erfc_datatype.h
        38. [X] qtaperwidget.h
        39. [X] qtapertable.h
        40. [X] qtaper_datatype.h
        41. [X] rsl2widget.h
        42. [X] rsl2table.h
        43. [X] rsl2.h
        44. [X] stiwewidget.h
        45. [X] stiwetable.h
        46. [X] stiwe.h
        47. [X] stiwe3bodywidget.h
        48. [X] stiwe3bodytable.h
        49. [X] stiwe3body.h
        50. [X] suttonchenwidget.h
        51. [X] suttonchentable.h
        52. [X] suttonchen.h
        53. [X] tbbuckinghamwidget.h
        54. [X] tbbuckinghamtable.h
        55. [X] tbbuckingham.h
        56. [X] tbmorsewidget.h
        57. [X] tbmorsetable.h
        58. [X] morse.h
        59. [X] tbtaperedgen1widget.h
        60. [X] tbtaperedgen1table.h
        61. [X] tbtaperedgen1.h
        62. [X] tbtaperedgen2widget.h
        63. [X] tbtaperedgen2table.h
        64. [X] tbtaperedgen2.h
        65. [X] tersoffwidget.h
        66. [X] tersoffparticletable.h
        67. [X] tersoffparticle.h
        68. [X] tersoffmixitwidget.h
        69. [X] tersoffmixittable.h
        70. [X] tersoffmixit.h
*** DONE Change Makefile?
         CLOSED: [2014-06-11 Wed 12:31]
        - Note taken on [2014-05-15 Thu 13:51] \\
          In order to add/remove source files of cmake configuration.
          1. Go to cmake folder.
          2. in CMakeLists.txt add/remove corresponding source files.
          3. call ccmake and add local installation path.
          4. run cmake, make, and make install.
*** DONE Adapt all interfaces to PotentialParameterUI
         CLOSED: [2014-06-11 Wed 12:31]
**** DONE In tremologui.cpp
         CLOSED: [2014-06-02 Mon 11:11]

**** DONE Outputmeasurement?
         CLOSED: [2014-06-11 Wed 12:31]
*** DONE Proper error handling in PotentialParameter_Data class.
         CLOSED: [2014-06-11 Wed 12:30]
This concerns the methods:
- void PotentialParameter_Data::writeValidatesFile(QString filename)
- bool PotentialParameter_Data::saveValues( QStringList keywordsIn, QStringList identifierListIn, ParseReturnList returnValueListIn )

*** DONE Determine if QFileDialog::openFileName() works properly (in particular the filter)
         CLOSED: [2014-06-11 Wed 12:30]
*** DONE Debugging [7/7]
         CLOSED: [2014-06-16 Mon 18:02]
        CLOCK: [2014-06-11 Wed 10:00]--[2014-06-11 Wed 12:41] =>  2:41
        CLOCK: [2014-06-05 Thu 12:19]--[2014-06-05 Thu 13:21] =>  1:02
        CLOCK: [2014-06-05 Thu 10:28]--[2014-06-05 Thu 11:30] =>  1:02
        CLOCK: [2014-06-04 Wed 15:00]--[2014-06-04 Wed 18:02] =>  3:02
        CLOCK: [2014-06-04 Wed 12:48]--[2014-06-04 Wed 13:57] =>  1:09
        CLOCK: [2014-06-03 Tue 15:24]--[2014-06-03 Tue 15:58] =>  0:34
**** DONE Load file at startup
         CLOSED: [2014-06-03 Tue 15:44]
**** DONE createFile() slot
         CLOSED: [2014-06-04 Wed 16:38]
After starting tremologui and loading a project. The newFileAction does not give a warning when unsaved data is given in the textedit. (Only at the first time!)
**** DONE Rewrite warning dialogs
         CLOSED: [2014-06-04 Wed 17:51]
The warning is displayed whenever:
- the save button is activated
- the saveAll button is activated
- a new project is created
- a project is opened
**** DONE Fix status bar
         CLOSED: [2014-06-05 Thu 13:12]
- [X] Adapt size of status bar.
- [X] Add connections for the status bar.
**** DONE Set connections.
         CLOSED: [2014-06-05 Thu 13:12]
Missing connections:
- [X] file name in status bar
- [X] connection for dataChanged() signal
**** DONE Rewrite tooltips for buttons
         CLOSED: [2014-06-05 Thu 13:12]
**** DONE Write getter and setter for lastError member.
         CLOSED: [2014-06-11 Wed 12:10]
*** DONE Add "open project file" action
         CLOSED: [2014-06-18 Wed 16:42]
        CLOCK: [2014-06-18 Wed 16:00]--[2014-06-18 Wed 16:42] =>  0:42
*** DONE Add "undo/redo" actions
         CLOSED: [2014-06-18 Wed 16:42]
        CLOCK: [2014-06-16 Mon 18:03]--[2014-06-16 Mon 18:46] =>  0:43
        CLOCK: [2014-06-16 Mon 13:30]--[2014-06-16 Mon 13:55] =>  0:25
*** DONE Clean "Solvers and Parallelization tab"
         CLOSED: [2014-06-18 Wed 17:54]
        CLOCK: [2014-06-18 Wed 16:43]--[2014-06-18 Wed 17:54] =>  1:11
*** TODO Adapt Manual
The source files for the manual are written in file:~/tremologui/doc/.

** TODO Enable mpi-capable simulation in tremologui.
   CLOCK: [2014-06-23 Mon 14:35]--[2014-06-23 Mon 14:50] =>  0:15
   - Note taken on [2014-06-23 Mon 14:41] \\
         Enable parallel-simulation functionality to tremologui.
         The following tasks have to be done:
         - Add option for local MPI-command to preference panel (has to be investigated) s.t. he local MPI command can be stated (xxx)
         - The "Start" button on the simulation tab should be capable to differentiate between the sequentiel and the parallel simulation by means of the number of processes given in the parallelization tab.
           The starting command is =xxx -np x*y*z tremolo_mpi -p x,y,z, (-vx) project.tremolo=.



* Aufgaben
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-06-24 Tue 12:15
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_CATEGORY: todos
  :END:
  - Note taken on [2014-06-16 Mon 13:36] \\
        Besprechung mit Christian
        Folgende Änderungen müssen noch durchgeführt werden:
        1. Hinzufügen von "undo/redo" buttons
        2. Anpassen des "Solvers and Parallelization" tabs:
           - Benenne tab in "Parallelization" um
           - Entferne alles was mit den Solvern zu tun hat
  - Note taken on [2014-05-07 Wed 15:17] \\
        Besprechung mit Christian am [2014-05-07 Wed]

        Überarbeitung des "Potentials" tab - Zusammenfassung:
        1. Behalte Trennung von Data und GUI bei:
           - PotentialParameter_Data enthält:
                 + Parser
                 + QStringList mit particle types
                 + ggfs. weitere Data
           - PotentialParameter_GUI enthält alle benötigten Widgets:
                 + Menüleiste mit "New", "Open", "Save" Button
                 + Editor-Fenster
                 + Platz für spätere Widgets
        2. Beschreibung der 3 Buttons:
           - "New" ::
                 - gibt Warnung aus
                 - erstellt leeres $Project.potentials file
                 - ruft Parser auf und updated data (particle types etc.)
                 - erstellt zugehöriges $Project.validates file
           - "Open" ::
                 - öffnet eine Öffnen-Dialog
                 - gibt Warnung aus (nach Wahl eines files)
                 - erstellt lokale Kopie des ausgewählten files im Projekt-Ordner
                 - ruft Parser auf und updated data
                 - erstellt zugehöriges $Project.validates file
                 - WICHTIG: soll erweiterbar sein
           - "Save" ::
                 - nur enabled wenn $Project.potentials file sich geändert hat
                 - gibt Warnung aus
                 - speichert Änderungen im $Project.potentials file
                 - ruft Parser auf und updated data
                 - erstellt zugehöriges $Project.validates file
        3. "Save-All" button
           Rufe slot des "Save"-Buttons auf, wenn der "Save-All" button des Main Windows angeklickt wurde.
        4. Eventuell noch "Undo" and "Redo" Buttons?
  - Note taken on [2014-04-16 Wed 15:57] \\
        Besprechung mit Christian um [2014-04-16 Wed 15:57]
        Zwei Aufgabenziele:
        1. Kurzfristiges Ziel:
           Überarbeitung des "potentials" tabs
           - Übernehme Elemente von "Datafile" tab
           - Obere 2/3 des Tabs: Editor-Fenster in das ein Potentials-file geladen werden soll
                 - der Editor soll die Funktionen "open" and "save" bereitstellen
                 - open-button:
                   + soll erweiterbar sein (d.h. es sollen noch mögliche "Suchfunktionen" eingebunden werden können -> handler)
                   + vorerst: einen beliebigen Ordner öffnen
                   + nach .potential files filtern
                   + nachdem der Nutzer ein file ausgewählt hat, soll eine Kopie des files in den Projekt-Ordner gelegt werden mit dem Namen "PROJECTNAME.potentials"
                   + falls nach Sicherung eines .potential-files ein weiteres file geöffnet wird, soll eine Warnung zum "Datenverlust" abgegeben werden.
                 - save-button:
                   + speichert die Änderungen im .potentials file.
           - Stelle sicher, dass immer ein .validates-file erzeugt wird (notfalls auch leer (default)).
        2. Langfristiges Ziel:
           - Verifizieren von Ensembles
           - etwas mit Monte-Carlo Methoden (siehe folgende Links)
                 - [[file:~/Work/literature/Possible%20Master%20topics/Combining%20molecular%20dynamics%20with%20Monte%20Carlo%20simulations.pdf][Combining molecular dynamics and Monte Carlo methods]]
                 - [[file:~/Work/literature/Possible%20Master%20topics/Uniform-acceptance%20force-bias%20Monte%20Carlo%20method%20with%20time%20scale%20to%20study%20solid-state%20diffusion.pdf][Uniform-acceptance force-bias Monte Carlo method]]

** TODO Refactoring of "Potentials" page [14/16]
   CLOCK: [2014-06-03 Tue 12:12]--[2014-06-03 Tue 13:57] =>  1:45
   CLOCK: [2014-06-02 Mon 12:11]--[2014-06-02 Mon 13:22] =>  1:11
   CLOCK: [2014-06-02 Mon 10:21]--[2014-06-02 Mon 11:25] =>  1:04
   CLOCK: [2014-05-28 Wed 14:03]--[2014-05-28 Wed 16:38] =>  2:35
   CLOCK: [2014-05-28 Wed 12:04]--[2014-05-28 Wed 12:45] =>  0:41
   CLOCK: [2014-05-27 Tue 15:15]--[2014-05-27 Tue 15:50] =>  0:35
   CLOCK: [2014-05-27 Tue 12:43]--[2014-05-27 Tue 14:15] =>  1:32
   CLOCK: [2014-05-26 Mon 10:48]--[2014-05-26 Mon 11:48] =>  1:00
   CLOCK: [2014-05-23 Fri 13:43]--[2014-05-23 Fri 15:27] =>  1:44
   CLOCK: [2014-05-22 Thu 16:58]--[2014-05-22 Thu 18:11] =>  1:13
   CLOCK: [2014-05-22 Thu 12:39]--[2014-05-22 Thu 16:10] =>  3:31
   CLOCK: [2014-05-21 Wed 16:20]--[2014-05-21 Wed 17:20] =>  1:00
   CLOCK: [2014-05-21 Wed 14:31]--[2014-05-21 Wed 16:11] =>  1:40
   CLOCK: [2014-05-16 Fri 17:44]--[2014-05-16 Fri 19:16] =>  1:32
   CLOCK: [2014-05-16 Fri 14:31]--[2014-05-16 Fri 16:36] =>  2:05
   CLOCK: [2014-05-15 Thu 12:33]--[2014-05-15 Thu 13:56] =>  1:23
   CLOCK: [2014-05-15 Thu 10:19]--[2014-05-15 Thu 11:24] =>  1:05
   CLOCK: [2014-05-14 Wed 16:51]--[2014-05-14 Wed 18:34] =>  1:43
   CLOCK: [2014-05-14 Wed 14:46]--[2014-05-14 Wed 15:37] =>  0:51
   CLOCK: [2014-05-14 Wed 14:30]--[2014-05-14 Wed 14:46] =>  0:16
   CLOCK: [2014-05-13 Tue 17:26]--[2014-05-13 Tue 19:03] =>  1:37
*** DONE What interfaces are given?
         CLOSED: [2014-05-07 Wed 15:12]
**** DONE Where is the "Potentials" tab created?
         CLOSED: [2014-05-07 Wed 15:12]
The PotentialParameterUI object is created in the constructor of the main window (see tremologui.h). It is a child object of TremoloGUI:
: PotentialParameterUI* potentialparametertab;
The potentialtab object is used in the following lines of tremologui.cpp
- l.106-109 :: Initialization of potentialparametertab and addition to the maintab widget
- l.110 :: Connect the isChanged(bool) signal of myProject to the setEnabled(bool) signal of potentialparametertab (derived from QWidget)
- l.112 :: Create a new PotentialParameter_Data object from the one saved in potentialparametertab. The copy is then used to construct the simulation tab.
- l.290 :: Connect the newSaveState() signal of potentialparametertab to the dataUpdateSavedStatus slot updating the state of the saveallbutton
- l.459 :: Checks save state of potentialparametertab
- l.651 :: TremoloGUI::projectChanged() sends update requests to all dataclasses. In potentialparametertab the reloadfile() method is called which is doing nothing??
- l.711 :: TremoloGUI::dataUpdateSavedStatus() updates the state of the saveallbutton
- l.719 :: TremoloGUI::dataSaveAllSlot() calls the saveslots from every dataclass. In potentialparametertab the fileSave() method is called.
- l.739,753,764 :: TremoloGUI::checkAndLoad/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject() set the save state of potentialparametertab.
**** DONE What signals/slots are given?
         CLOSED: [2014-05-07 Wed 15:12]
In PotentialParameterUI the following slots are needed within tremologui.cpp:
- setEnabled(bool) exists by default (since derived from QWidget)
The following signals are needed within tremologui.cpp:
- newSaveState()
**** DONE Where are all the other classes created?
         CLOSED: [2014-05-07 Wed 15:12]
**** DONE List of functions that must be present
         CLOSED: [2014-05-07 Wed 15:12]
- bool issaved storing the save-state
- bool isSaved()
  returns issaved
  used in TremoloGUI::unsavedData() (see line 459 of tremologui.cpp)
  used in TremoloGUI::unsavedData() (see line 711 of tremologui.cpp)
- void setSavedStatus(bool status)
  sets the issaved variable to status
  used in TremoloGUI::checkandload/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject (see lines 739, 753 and 764 of tremologui.cpp)
- void reloadfile(QString filename)
  reload potentials file
  used in TremoloGUI::projectChanged() (see line 651 of tremologui.cpp)
- bool fileSave() (slot)
  save file and return true if everything is ok, false otherwise, ask for validity?
  used in TremoloGUI::dataSaveAllSlot() (see line 719 of tremologui.cpp)
- void newSaveState() (signal)
  should be emitted if the save state changes

*** DONE Implementation of new "Potentials" tab
         CLOSED: [2014-05-07 Wed 15:12]
***** Example: Files for Datafile-tab
parametertextedit.h
parametertextedit.cpp
****** Description of parametertextedit.h and parametertextedit.cpp
- Two classes
  1. class textEditStatusBar : public QWidget
  2. class parameterTextEdit : public QMainWindow

***** Description of textEditStatusBar class

Implements the status bar in the "Datafile"-tab (just at the lower end of the window).

The status bar consists of 4 different frames (QFrame) containing each a QLabel with
+ the current position of the cursor
+ a indicator that shows if the file has been changed
+ the type of the file
+ the name of the file

The layout is managed by a QHBoxLayout for the statusbar itself and for different GridLayouts for each of the frames.

The following slots are implemented:
+ changeCurrentPos
+ setFilename
+ setEditMode
+ languageChange

***** Description of parameterTextEdit class

Implements a texteditor for datafiles in the "Datafile"-tab. It is essentially a QMainWindow with a QTextEdit. Moreover the class has a textEditStatusBar as child object.

The class contains the following children:
+ QTextEdit for the texteditor window
+ QToolBar a toolbar for the texteditor
+ QActions for all buttons on the toolbar
+ QStrings to save the parameter file and a suffix
+ textEditStatusBar
+ bools for different indications

The layout is managed by only one QVBoxLayout.

There are only a few method implemented in the class:
+ bool isSaved() const // returns true if the file is saved
+ void setSavedStatus(bool status) // sets the status of the file
+ void fileLoad(QString File) // loads the file that is supposed to be edited
+ void renewTextEdit2() // ?

Slots:
+ void fileSave() // saves the file
+ void reloadfile(QString parameterFileIn) // reload the file
+ void clearBuffer(bool ask=true) // ?
+ void setLoadingfileStatus(bool status) // ?
+ void enableFileSaveAction(void) // ?
+ void changeCurrentPos (void) // ?
+ void fileOpen() // open new file
+ fileSaveAs() // save file as
+ textEditChanged // action if textEdit has been changed
+ virtual void languageChange() // set language

Signals:
+ void newSaveState() // is send if the save-state of the file changes

*** DONE Get overview over all source files that are used for the "Potentials" tab
         CLOSED: [2014-05-07 Wed 15:13]
**** Main Window : PotentialParameterUI
Can be found in
- potentialparameterui.h
- potentialparameterui.cpp

The class is derived from the PotentialParameterUISuperClass.
It contains
1. =ParticleWidget* particleWidget : public PotentialParameterWidget=
   Widget containing the upper half of the main window ("Particle types").
   The Widget contains
   - ParticleTable* particleTable : public PotentialParameterTable
   - PotentialParameter_Data* myPotentialParameter_Data
   - TremoloGUIConfig* myConfig
   - QPushButtons* disableParticleTypeButton and enableParticleTypeButton
   - QLabel* warningLabel
2. =QTabWidget* potentialsTabWidget=
   This tab widget is the main tab bar for the second half of the main window (potential selection).
   It hosts the following tabs:
   - "Non-bonded Potentials" (-> nonBondedTabWidget)
   - "Bonded Potentials (off)" (-> bondedTabWidget)
   - "TB tapered Potentials (off)" (-> tbTaperedWidget and tbTaperedTabWidget)
3. =QTabWidget* bondedTabWidget=
   This tab widget is the main tab bar for the "Bonded Potentials (off)" page.
   It contains the following widgets (all child objects of the PotentialParamerUI class):
   - AngleWidget* angleWidget
   - BondsWidget* bondsWidget
   - ImproperWidget* improperWidget
4. =QTabWidget* nonBondedTabWidget=
   This tab widget is the main tab bar for the "Non-bonded Potentials" page.
   It contains all widgets for the different potentials (all child objects of the PotentialParameterUI class):
   - QWidget* brennerWidget and Q3Table* brennerTable;
   - EamWidget* eamWidget;
   - Q3VBox* coulomb_ERFCBox and Coulomb_ERFCWidget* coulomb_ERFCWidget;
   - LennardJonesWidget* lennardJonesWidget;
   - M_N_LennardJonesWidget* m_n_lennardJonesWidget;
   - LJSplineWidget* ljSplineWidget;
   - LJSpline2Widget* ljSpline2Widget;
   - RSL2Widget* rsl2Widget;
   - StiWeWidget* stiWeWidget;
   - StiWe3BodyWidget* stiWe3BodyWidget;
   - SuttonChenWidget* suttonChenWidget;
   - Q3VBox* tersoffBox;
5. =QTabWidget* tbTaperedTabWidget=
   This tab widget is the main tab bar for the "TB tapered Potentials (off)".
   It is contained in the QWidget* tbTaperedWidget and contains the following widges (all child object of the PotentialParameterUI class):
   - TBBuckinghamWidget* tbBuckinghamWidget;
   - TBTaperedGen1Widget* tbTaperedGen1Widget;
   - TBTaperedGen2Widget* tbTaperedGen2Widget;
   - TBMorseWidget* tbmorseWidget;
   - BN3bodyWidget* bn3bodyWidget;
   - DampedDispWidget* dampedDispWidget;

**** Corresponding data file: PotentialParameter_Data
****** Implements:
class PotentialParameter_Data
****** Description:
The class contains all data that is necessary to write the potentials and the validates file.
******* Members (only important ones)
- instances of all potentials
- pointer to the project (Project_Control* myProject)
- pointer to the configuration (TremoloGUIConfig* myConfig)
- a parser (ParameterParser* myParser)
- pointer to the PotentialParameterUI parent class (PotentialParameterUISuperClass* parentUI)
- booleans to indicate which potentials are going to be used
- boolean loadingFile (if true some tests are skipped -> faster loading)
******* Member functions (only important ones)
- getter and setter methods for all potentials
- saveValues(): uses the Output of the parser and saves all data from the file into the data structure - this method is called within ParameterParser::parseFile()
- writeToFile(): Opens a file for writing, calls toParameterFileString() and writes all data to the file
- writeToValidatesFile(): Analougously to writeToFile() but for the validates data.
- readFromFile(): starts the parser for the given file and then saves all data to the data structure
- projectHasChanged(): important SLOT that is called whenever something in the project changed (sinal of Project_Control* myProject) - it calls clear() and readFromFile()
- SIGNALS: signals that indicate if a potential changed
- SLOTS: slots for removing/setting potential data
- some helper methods for file writing (getPOTENTIALNAMEDataFileString()) for each potential
******* Constructor
1. Set myConfing, myProject, p_parent_UI
2. Create all potential objects
3. Set all m_usePOTENTIALNAME booleans to false
4. Set loadingFile boolean to false
5. Initialize myParser and register data class of this in parser
6. Add some connections
****** Derived classes:
None.
****** Questions:
- By which classes is the PotentialParameter_Data class used?
****** Must be changed?
Yes.
This class reads from the file and writes the potentials/validats files.
- The writing functionality must be deleted
- The parsing functionality must be maintained
*** DONE Draft for the new "Potentials" tab
         CLOSED: [2014-06-02 Mon 10:23]
        - Note taken on [2014-05-13 Tue 19:00] \\
          Questions:
          - How is the content of a file stored in QTextEdit?
          - Does it needs the underlying file?
          - Can a file be savely loaded by QTextEdit and changes made in the QTextEdit without modifying the initial file?
          Answers:
          It seems that QTextEdit does not need an underlying file:
          The text of a QFile is loaded in the QTextEdit using setText() which only needs a QString.
          The underlying file can be closed after loading and is not modified afterwards. This only depends on the save method.
        - Note taken on [2014-05-13 Tue 17:28] \\
          1. At creation of a new project -> create empty .potentials and .validates files.
          2. Warning at "Save" button: try to avoid warnings at "New" and "Open" buttons.
             - For the "New" button: NO warning necessary -> only warning when hitting "Save" button
             - For the "Open" button: Depends how the editor loads the file.
**** DONE Draft for PotentialTextEditStatusBar : public QWidget
         CLOSED: [2014-05-14 Wed 18:05]
***** Specifications:
Status bar having the following fields: (from left to right)
1. Current position in line and column
2. Save status
3. Current status (File loaded + name, file saved, created new file, file modified)
4. Name of the file
***** Members:
QHBoxLayout* textEditStatusBarLayout
QGridLayout* frame1Layout
QGridLayout* frame2Layout
QGridLayout* frame3Layout
QGridLayout* frame4Layout
QFrame* frame1 // for current position
QFrame* frame2 // for save status
QFrame* frame3 // for current status
QFrame* frame4 // for name of the file
QLabel* label1 // for current position
QLabel* label2 // for save status
QLabel* label3 // for current status
QLabel* label4 // for name of the file
***** Slots:
void setCurrentPos(int lin = 0, int col = 0)
void setSaveStatus(bool saved = true)
void setCurrentStatus(QString message)
void setFileName(QString filename)
void languageChange()
*** DONE Change ParticleType class
*** DONE Make a list of all files that are not needed anymore
         CLOSED: [2014-05-28 Wed 15:30]
        1. [X] anglewidget.h
        2. [X] angletable.h
        3. [X] angle.h
        4. [X] bn3bodywidget.h
        5. [X] bn3bodytable.h
        6. [X] bn3body.h
        7. [X] bondswidget.h
        8. [X] bondtable.h
        9. [X] bond.h
        10. [X] eamwidget.h
        11. [X] eam.h
        12. [X] dampeddispwidget.h
        13. [X] dampeddisptable.h
        14. [X] dampeddisp.h
        15. [X] particlewidget.h
        16. [X] particletable.h
        17. [X] torsionwidget.h
        18. [X] torsiontable.h
        19. [X] torsion.h
        20. [X] m_n_lennardjoneswidget.h
        21. [X] m_n_lennardjonestable.h
        22. [X] m_n_lennardjones.h
        23. [X] lennardjoneswidget.h
        24. [X] lennardjonestable.h
        25. [X] lennardjones.h
        26. [X] ljsplinewidget.h
        27. [X] ljsplinetable.h
        28. [X] ljspline.h
        29. [X] ljspline2widget.h
        30. [X] ljspline2table.h
        31. [X] ljspline2.h
        32. [X] improperwidget.h
        33. [X] impropertable.h
        34. [X] improper_datatype.h
        35. [X] coulomb_erfcwidget.h
        36. [X] coulomb_erfctable.h
        37. [X] coulomb_erfc_datatype.h
        38. [X] qtaperwidget.h
        39. [X] qtapertable.h
        40. [X] qtaper_datatype.h
        41. [X] rsl2widget.h
        42. [X] rsl2table.h
        43. [X] rsl2.h
        44. [X] stiwewidget.h
        45. [X] stiwetable.h
        46. [X] stiwe.h
        47. [X] stiwe3bodywidget.h
        48. [X] stiwe3bodytable.h
        49. [X] stiwe3body.h
        50. [X] suttonchenwidget.h
        51. [X] suttonchentable.h
        52. [X] suttonchen.h
        53. [X] tbbuckinghamwidget.h
        54. [X] tbbuckinghamtable.h
        55. [X] tbbuckingham.h
        56. [X] tbmorsewidget.h
        57. [X] tbmorsetable.h
        58. [X] morse.h
        59. [X] tbtaperedgen1widget.h
        60. [X] tbtaperedgen1table.h
        61. [X] tbtaperedgen1.h
        62. [X] tbtaperedgen2widget.h
        63. [X] tbtaperedgen2table.h
        64. [X] tbtaperedgen2.h
        65. [X] tersoffwidget.h
        66. [X] tersoffparticletable.h
        67. [X] tersoffparticle.h
        68. [X] tersoffmixitwidget.h
        69. [X] tersoffmixittable.h
        70. [X] tersoffmixit.h
*** DONE Change Makefile?
         CLOSED: [2014-06-11 Wed 12:31]
        - Note taken on [2014-05-15 Thu 13:51] \\
          In order to add/remove source files of cmake configuration.
          1. Go to cmake folder.
          2. in CMakeLists.txt add/remove corresponding source files.
          3. call ccmake and add local installation path.
          4. run cmake, make, and make install.
*** DONE Adapt all interfaces to PotentialParameterUI
         CLOSED: [2014-06-11 Wed 12:31]
**** DONE In tremologui.cpp
         CLOSED: [2014-06-02 Mon 11:11]

**** DONE Outputmeasurement?
         CLOSED: [2014-06-11 Wed 12:31]
*** DONE Proper error handling in PotentialParameter_Data class.
         CLOSED: [2014-06-11 Wed 12:30]
This concerns the methods:
- void PotentialParameter_Data::writeValidatesFile(QString filename)
- bool PotentialParameter_Data::saveValues( QStringList keywordsIn, QStringList identifierListIn, ParseReturnList returnValueListIn )

*** DONE Determine if QFileDialog::openFileName() works properly (in particular the filter)
         CLOSED: [2014-06-11 Wed 12:30]
*** DONE Debugging [7/7]
         CLOSED: [2014-06-16 Mon 18:02]
        CLOCK: [2014-06-11 Wed 10:00]--[2014-06-11 Wed 12:41] =>  2:41
        CLOCK: [2014-06-05 Thu 12:19]--[2014-06-05 Thu 13:21] =>  1:02
        CLOCK: [2014-06-05 Thu 10:28]--[2014-06-05 Thu 11:30] =>  1:02
        CLOCK: [2014-06-04 Wed 15:00]--[2014-06-04 Wed 18:02] =>  3:02
        CLOCK: [2014-06-04 Wed 12:48]--[2014-06-04 Wed 13:57] =>  1:09
        CLOCK: [2014-06-03 Tue 15:24]--[2014-06-03 Tue 15:58] =>  0:34
**** DONE Load file at startup
         CLOSED: [2014-06-03 Tue 15:44]
**** DONE createFile() slot
         CLOSED: [2014-06-04 Wed 16:38]
After starting tremologui and loading a project. The newFileAction does not give a warning when unsaved data is given in the textedit. (Only at the first time!)
**** DONE Rewrite warning dialogs
         CLOSED: [2014-06-04 Wed 17:51]
The warning is displayed whenever:
- the save button is activated
- the saveAll button is activated
- a new project is created
- a project is opened
**** DONE Fix status bar
         CLOSED: [2014-06-05 Thu 13:12]
- [X] Adapt size of status bar.
- [X] Add connections for the status bar.
**** DONE Set connections.
         CLOSED: [2014-06-05 Thu 13:12]
Missing connections:
- [X] file name in status bar
- [X] connection for dataChanged() signal
**** DONE Rewrite tooltips for buttons
         CLOSED: [2014-06-05 Thu 13:12]
**** DONE Write getter and setter for lastError member.
         CLOSED: [2014-06-11 Wed 12:10]
*** DONE Add "open project file" action
         CLOSED: [2014-06-18 Wed 16:42]
        CLOCK: [2014-06-18 Wed 16:00]--[2014-06-18 Wed 16:42] =>  0:42
*** DONE Add "undo/redo" actions
         CLOSED: [2014-06-18 Wed 16:42]
        CLOCK: [2014-06-16 Mon 18:03]--[2014-06-16 Mon 18:46] =>  0:43
        CLOCK: [2014-06-16 Mon 13:30]--[2014-06-16 Mon 13:55] =>  0:25
*** DONE Clean "Solvers and Parallelization tab"
         CLOSED: [2014-06-18 Wed 17:54]
        CLOCK: [2014-06-18 Wed 16:43]--[2014-06-18 Wed 17:54] =>  1:11
*** TODO Adapt Manual
The source files for the manual are written in file:~/tremologui/doc/.

** TODO Enable mpi-capable simulation in tremologui.
   CLOCK: [2014-06-23 Mon 14:35]--[2014-06-23 Mon 14:50] =>  0:15
   - Note taken on [2014-06-23 Mon 14:41] \\
         Enable parallel-simulation functionality to tremologui.
         The following tasks have to be done:
         - Add option for local MPI-command to preference panel (has to be investigated) s.t. he local MPI command can be stated (xxx)
         - The "Start" button on the simulation tab should be capable to differentiate between the sequentiel and the parallel simulation by means of the number of processes given in the parallelization tab.
           The starting command is =xxx -np x*y*z tremolo_mpi -p x,y,z, (-vx) project.tremolo=.



* Aufgaben
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-06-24 Tue 12:17
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_CATEGORY: todos
  :END:
  - Note taken on [2014-06-16 Mon 13:36] \\
        Besprechung mit Christian
        Folgende Änderungen müssen noch durchgeführt werden:
        1. Hinzufügen von "undo/redo" buttons
        2. Anpassen des "Solvers and Parallelization" tabs:
           - Benenne tab in "Parallelization" um
           - Entferne alles was mit den Solvern zu tun hat
  - Note taken on [2014-05-07 Wed 15:17] \\
        Besprechung mit Christian am [2014-05-07 Wed]

        Überarbeitung des "Potentials" tab - Zusammenfassung:
        1. Behalte Trennung von Data und GUI bei:
           - PotentialParameter_Data enthält:
                 + Parser
                 + QStringList mit particle types
                 + ggfs. weitere Data
           - PotentialParameter_GUI enthält alle benötigten Widgets:
                 + Menüleiste mit "New", "Open", "Save" Button
                 + Editor-Fenster
                 + Platz für spätere Widgets
        2. Beschreibung der 3 Buttons:
           - "New" ::
                 - gibt Warnung aus
                 - erstellt leeres $Project.potentials file
                 - ruft Parser auf und updated data (particle types etc.)
                 - erstellt zugehöriges $Project.validates file
           - "Open" ::
                 - öffnet eine Öffnen-Dialog
                 - gibt Warnung aus (nach Wahl eines files)
                 - erstellt lokale Kopie des ausgewählten files im Projekt-Ordner
                 - ruft Parser auf und updated data
                 - erstellt zugehöriges $Project.validates file
                 - WICHTIG: soll erweiterbar sein
           - "Save" ::
                 - nur enabled wenn $Project.potentials file sich geändert hat
                 - gibt Warnung aus
                 - speichert Änderungen im $Project.potentials file
                 - ruft Parser auf und updated data
                 - erstellt zugehöriges $Project.validates file
        3. "Save-All" button
           Rufe slot des "Save"-Buttons auf, wenn der "Save-All" button des Main Windows angeklickt wurde.
        4. Eventuell noch "Undo" and "Redo" Buttons?
  - Note taken on [2014-04-16 Wed 15:57] \\
        Besprechung mit Christian um [2014-04-16 Wed 15:57]
        Zwei Aufgabenziele:
        1. Kurzfristiges Ziel:
           Überarbeitung des "potentials" tabs
           - Übernehme Elemente von "Datafile" tab
           - Obere 2/3 des Tabs: Editor-Fenster in das ein Potentials-file geladen werden soll
                 - der Editor soll die Funktionen "open" and "save" bereitstellen
                 - open-button:
                   + soll erweiterbar sein (d.h. es sollen noch mögliche "Suchfunktionen" eingebunden werden können -> handler)
                   + vorerst: einen beliebigen Ordner öffnen
                   + nach .potential files filtern
                   + nachdem der Nutzer ein file ausgewählt hat, soll eine Kopie des files in den Projekt-Ordner gelegt werden mit dem Namen "PROJECTNAME.potentials"
                   + falls nach Sicherung eines .potential-files ein weiteres file geöffnet wird, soll eine Warnung zum "Datenverlust" abgegeben werden.
                 - save-button:
                   + speichert die Änderungen im .potentials file.
           - Stelle sicher, dass immer ein .validates-file erzeugt wird (notfalls auch leer (default)).
        2. Langfristiges Ziel:
           - Verifizieren von Ensembles
           - etwas mit Monte-Carlo Methoden (siehe folgende Links)
                 - [[file:~/Work/literature/Possible%20Master%20topics/Combining%20molecular%20dynamics%20with%20Monte%20Carlo%20simulations.pdf][Combining molecular dynamics and Monte Carlo methods]]
                 - [[file:~/Work/literature/Possible%20Master%20topics/Uniform-acceptance%20force-bias%20Monte%20Carlo%20method%20with%20time%20scale%20to%20study%20solid-state%20diffusion.pdf][Uniform-acceptance force-bias Monte Carlo method]]

** TODO Refactoring of "Potentials" page [14/16]
   CLOCK: [2014-06-03 Tue 12:12]--[2014-06-03 Tue 13:57] =>  1:45
   CLOCK: [2014-06-02 Mon 12:11]--[2014-06-02 Mon 13:22] =>  1:11
   CLOCK: [2014-06-02 Mon 10:21]--[2014-06-02 Mon 11:25] =>  1:04
   CLOCK: [2014-05-28 Wed 14:03]--[2014-05-28 Wed 16:38] =>  2:35
   CLOCK: [2014-05-28 Wed 12:04]--[2014-05-28 Wed 12:45] =>  0:41
   CLOCK: [2014-05-27 Tue 15:15]--[2014-05-27 Tue 15:50] =>  0:35
   CLOCK: [2014-05-27 Tue 12:43]--[2014-05-27 Tue 14:15] =>  1:32
   CLOCK: [2014-05-26 Mon 10:48]--[2014-05-26 Mon 11:48] =>  1:00
   CLOCK: [2014-05-23 Fri 13:43]--[2014-05-23 Fri 15:27] =>  1:44
   CLOCK: [2014-05-22 Thu 16:58]--[2014-05-22 Thu 18:11] =>  1:13
   CLOCK: [2014-05-22 Thu 12:39]--[2014-05-22 Thu 16:10] =>  3:31
   CLOCK: [2014-05-21 Wed 16:20]--[2014-05-21 Wed 17:20] =>  1:00
   CLOCK: [2014-05-21 Wed 14:31]--[2014-05-21 Wed 16:11] =>  1:40
   CLOCK: [2014-05-16 Fri 17:44]--[2014-05-16 Fri 19:16] =>  1:32
   CLOCK: [2014-05-16 Fri 14:31]--[2014-05-16 Fri 16:36] =>  2:05
   CLOCK: [2014-05-15 Thu 12:33]--[2014-05-15 Thu 13:56] =>  1:23
   CLOCK: [2014-05-15 Thu 10:19]--[2014-05-15 Thu 11:24] =>  1:05
   CLOCK: [2014-05-14 Wed 16:51]--[2014-05-14 Wed 18:34] =>  1:43
   CLOCK: [2014-05-14 Wed 14:46]--[2014-05-14 Wed 15:37] =>  0:51
   CLOCK: [2014-05-14 Wed 14:30]--[2014-05-14 Wed 14:46] =>  0:16
   CLOCK: [2014-05-13 Tue 17:26]--[2014-05-13 Tue 19:03] =>  1:37
*** DONE What interfaces are given?
         CLOSED: [2014-05-07 Wed 15:12]
**** DONE Where is the "Potentials" tab created?
         CLOSED: [2014-05-07 Wed 15:12]
The PotentialParameterUI object is created in the constructor of the main window (see tremologui.h). It is a child object of TremoloGUI:
: PotentialParameterUI* potentialparametertab;
The potentialtab object is used in the following lines of tremologui.cpp
- l.106-109 :: Initialization of potentialparametertab and addition to the maintab widget
- l.110 :: Connect the isChanged(bool) signal of myProject to the setEnabled(bool) signal of potentialparametertab (derived from QWidget)
- l.112 :: Create a new PotentialParameter_Data object from the one saved in potentialparametertab. The copy is then used to construct the simulation tab.
- l.290 :: Connect the newSaveState() signal of potentialparametertab to the dataUpdateSavedStatus slot updating the state of the saveallbutton
- l.459 :: Checks save state of potentialparametertab
- l.651 :: TremoloGUI::projectChanged() sends update requests to all dataclasses. In potentialparametertab the reloadfile() method is called which is doing nothing??
- l.711 :: TremoloGUI::dataUpdateSavedStatus() updates the state of the saveallbutton
- l.719 :: TremoloGUI::dataSaveAllSlot() calls the saveslots from every dataclass. In potentialparametertab the fileSave() method is called.
- l.739,753,764 :: TremoloGUI::checkAndLoad/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject() set the save state of potentialparametertab.
**** DONE What signals/slots are given?
         CLOSED: [2014-05-07 Wed 15:12]
In PotentialParameterUI the following slots are needed within tremologui.cpp:
- setEnabled(bool) exists by default (since derived from QWidget)
The following signals are needed within tremologui.cpp:
- newSaveState()
**** DONE Where are all the other classes created?
         CLOSED: [2014-05-07 Wed 15:12]
**** DONE List of functions that must be present
         CLOSED: [2014-05-07 Wed 15:12]
- bool issaved storing the save-state
- bool isSaved()
  returns issaved
  used in TremoloGUI::unsavedData() (see line 459 of tremologui.cpp)
  used in TremoloGUI::unsavedData() (see line 711 of tremologui.cpp)
- void setSavedStatus(bool status)
  sets the issaved variable to status
  used in TremoloGUI::checkandload/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject (see lines 739, 753 and 764 of tremologui.cpp)
- void reloadfile(QString filename)
  reload potentials file
  used in TremoloGUI::projectChanged() (see line 651 of tremologui.cpp)
- bool fileSave() (slot)
  save file and return true if everything is ok, false otherwise, ask for validity?
  used in TremoloGUI::dataSaveAllSlot() (see line 719 of tremologui.cpp)
- void newSaveState() (signal)
  should be emitted if the save state changes

*** DONE Implementation of new "Potentials" tab
         CLOSED: [2014-05-07 Wed 15:12]
***** Example: Files for Datafile-tab
parametertextedit.h
parametertextedit.cpp
****** Description of parametertextedit.h and parametertextedit.cpp
- Two classes
  1. class textEditStatusBar : public QWidget
  2. class parameterTextEdit : public QMainWindow

***** Description of textEditStatusBar class

Implements the status bar in the "Datafile"-tab (just at the lower end of the window).

The status bar consists of 4 different frames (QFrame) containing each a QLabel with
+ the current position of the cursor
+ a indicator that shows if the file has been changed
+ the type of the file
+ the name of the file

The layout is managed by a QHBoxLayout for the statusbar itself and for different GridLayouts for each of the frames.

The following slots are implemented:
+ changeCurrentPos
+ setFilename
+ setEditMode
+ languageChange

***** Description of parameterTextEdit class

Implements a texteditor for datafiles in the "Datafile"-tab. It is essentially a QMainWindow with a QTextEdit. Moreover the class has a textEditStatusBar as child object.

The class contains the following children:
+ QTextEdit for the texteditor window
+ QToolBar a toolbar for the texteditor
+ QActions for all buttons on the toolbar
+ QStrings to save the parameter file and a suffix
+ textEditStatusBar
+ bools for different indications

The layout is managed by only one QVBoxLayout.

There are only a few method implemented in the class:
+ bool isSaved() const // returns true if the file is saved
+ void setSavedStatus(bool status) // sets the status of the file
+ void fileLoad(QString File) // loads the file that is supposed to be edited
+ void renewTextEdit2() // ?

Slots:
+ void fileSave() // saves the file
+ void reloadfile(QString parameterFileIn) // reload the file
+ void clearBuffer(bool ask=true) // ?
+ void setLoadingfileStatus(bool status) // ?
+ void enableFileSaveAction(void) // ?
+ void changeCurrentPos (void) // ?
+ void fileOpen() // open new file
+ fileSaveAs() // save file as
+ textEditChanged // action if textEdit has been changed
+ virtual void languageChange() // set language

Signals:
+ void newSaveState() // is send if the save-state of the file changes

*** DONE Get overview over all source files that are used for the "Potentials" tab
         CLOSED: [2014-05-07 Wed 15:13]
**** Main Window : PotentialParameterUI
Can be found in
- potentialparameterui.h
- potentialparameterui.cpp

The class is derived from the PotentialParameterUISuperClass.
It contains
1. =ParticleWidget* particleWidget : public PotentialParameterWidget=
   Widget containing the upper half of the main window ("Particle types").
   The Widget contains
   - ParticleTable* particleTable : public PotentialParameterTable
   - PotentialParameter_Data* myPotentialParameter_Data
   - TremoloGUIConfig* myConfig
   - QPushButtons* disableParticleTypeButton and enableParticleTypeButton
   - QLabel* warningLabel
2. =QTabWidget* potentialsTabWidget=
   This tab widget is the main tab bar for the second half of the main window (potential selection).
   It hosts the following tabs:
   - "Non-bonded Potentials" (-> nonBondedTabWidget)
   - "Bonded Potentials (off)" (-> bondedTabWidget)
   - "TB tapered Potentials (off)" (-> tbTaperedWidget and tbTaperedTabWidget)
3. =QTabWidget* bondedTabWidget=
   This tab widget is the main tab bar for the "Bonded Potentials (off)" page.
   It contains the following widgets (all child objects of the PotentialParamerUI class):
   - AngleWidget* angleWidget
   - BondsWidget* bondsWidget
   - ImproperWidget* improperWidget
4. =QTabWidget* nonBondedTabWidget=
   This tab widget is the main tab bar for the "Non-bonded Potentials" page.
   It contains all widgets for the different potentials (all child objects of the PotentialParameterUI class):
   - QWidget* brennerWidget and Q3Table* brennerTable;
   - EamWidget* eamWidget;
   - Q3VBox* coulomb_ERFCBox and Coulomb_ERFCWidget* coulomb_ERFCWidget;
   - LennardJonesWidget* lennardJonesWidget;
   - M_N_LennardJonesWidget* m_n_lennardJonesWidget;
   - LJSplineWidget* ljSplineWidget;
   - LJSpline2Widget* ljSpline2Widget;
   - RSL2Widget* rsl2Widget;
   - StiWeWidget* stiWeWidget;
   - StiWe3BodyWidget* stiWe3BodyWidget;
   - SuttonChenWidget* suttonChenWidget;
   - Q3VBox* tersoffBox;
5. =QTabWidget* tbTaperedTabWidget=
   This tab widget is the main tab bar for the "TB tapered Potentials (off)".
   It is contained in the QWidget* tbTaperedWidget and contains the following widges (all child object of the PotentialParameterUI class):
   - TBBuckinghamWidget* tbBuckinghamWidget;
   - TBTaperedGen1Widget* tbTaperedGen1Widget;
   - TBTaperedGen2Widget* tbTaperedGen2Widget;
   - TBMorseWidget* tbmorseWidget;
   - BN3bodyWidget* bn3bodyWidget;
   - DampedDispWidget* dampedDispWidget;

**** Corresponding data file: PotentialParameter_Data
****** Implements:
class PotentialParameter_Data
****** Description:
The class contains all data that is necessary to write the potentials and the validates file.
******* Members (only important ones)
- instances of all potentials
- pointer to the project (Project_Control* myProject)
- pointer to the configuration (TremoloGUIConfig* myConfig)
- a parser (ParameterParser* myParser)
- pointer to the PotentialParameterUI parent class (PotentialParameterUISuperClass* parentUI)
- booleans to indicate which potentials are going to be used
- boolean loadingFile (if true some tests are skipped -> faster loading)
******* Member functions (only important ones)
- getter and setter methods for all potentials
- saveValues(): uses the Output of the parser and saves all data from the file into the data structure - this method is called within ParameterParser::parseFile()
- writeToFile(): Opens a file for writing, calls toParameterFileString() and writes all data to the file
- writeToValidatesFile(): Analougously to writeToFile() but for the validates data.
- readFromFile(): starts the parser for the given file and then saves all data to the data structure
- projectHasChanged(): important SLOT that is called whenever something in the project changed (sinal of Project_Control* myProject) - it calls clear() and readFromFile()
- SIGNALS: signals that indicate if a potential changed
- SLOTS: slots for removing/setting potential data
- some helper methods for file writing (getPOTENTIALNAMEDataFileString()) for each potential
******* Constructor
1. Set myConfing, myProject, p_parent_UI
2. Create all potential objects
3. Set all m_usePOTENTIALNAME booleans to false
4. Set loadingFile boolean to false
5. Initialize myParser and register data class of this in parser
6. Add some connections
****** Derived classes:
None.
****** Questions:
- By which classes is the PotentialParameter_Data class used?
****** Must be changed?
Yes.
This class reads from the file and writes the potentials/validats files.
- The writing functionality must be deleted
- The parsing functionality must be maintained
*** DONE Draft for the new "Potentials" tab
         CLOSED: [2014-06-02 Mon 10:23]
        - Note taken on [2014-05-13 Tue 19:00] \\
          Questions:
          - How is the content of a file stored in QTextEdit?
          - Does it needs the underlying file?
          - Can a file be savely loaded by QTextEdit and changes made in the QTextEdit without modifying the initial file?
          Answers:
          It seems that QTextEdit does not need an underlying file:
          The text of a QFile is loaded in the QTextEdit using setText() which only needs a QString.
          The underlying file can be closed after loading and is not modified afterwards. This only depends on the save method.
        - Note taken on [2014-05-13 Tue 17:28] \\
          1. At creation of a new project -> create empty .potentials and .validates files.
          2. Warning at "Save" button: try to avoid warnings at "New" and "Open" buttons.
             - For the "New" button: NO warning necessary -> only warning when hitting "Save" button
             - For the "Open" button: Depends how the editor loads the file.
**** DONE Draft for PotentialTextEditStatusBar : public QWidget
         CLOSED: [2014-05-14 Wed 18:05]
***** Specifications:
Status bar having the following fields: (from left to right)
1. Current position in line and column
2. Save status
3. Current status (File loaded + name, file saved, created new file, file modified)
4. Name of the file
***** Members:
QHBoxLayout* textEditStatusBarLayout
QGridLayout* frame1Layout
QGridLayout* frame2Layout
QGridLayout* frame3Layout
QGridLayout* frame4Layout
QFrame* frame1 // for current position
QFrame* frame2 // for save status
QFrame* frame3 // for current status
QFrame* frame4 // for name of the file
QLabel* label1 // for current position
QLabel* label2 // for save status
QLabel* label3 // for current status
QLabel* label4 // for name of the file
***** Slots:
void setCurrentPos(int lin = 0, int col = 0)
void setSaveStatus(bool saved = true)
void setCurrentStatus(QString message)
void setFileName(QString filename)
void languageChange()
*** DONE Change ParticleType class
*** DONE Make a list of all files that are not needed anymore
         CLOSED: [2014-05-28 Wed 15:30]
        1. [X] anglewidget.h
        2. [X] angletable.h
        3. [X] angle.h
        4. [X] bn3bodywidget.h
        5. [X] bn3bodytable.h
        6. [X] bn3body.h
        7. [X] bondswidget.h
        8. [X] bondtable.h
        9. [X] bond.h
        10. [X] eamwidget.h
        11. [X] eam.h
        12. [X] dampeddispwidget.h
        13. [X] dampeddisptable.h
        14. [X] dampeddisp.h
        15. [X] particlewidget.h
        16. [X] particletable.h
        17. [X] torsionwidget.h
        18. [X] torsiontable.h
        19. [X] torsion.h
        20. [X] m_n_lennardjoneswidget.h
        21. [X] m_n_lennardjonestable.h
        22. [X] m_n_lennardjones.h
        23. [X] lennardjoneswidget.h
        24. [X] lennardjonestable.h
        25. [X] lennardjones.h
        26. [X] ljsplinewidget.h
        27. [X] ljsplinetable.h
        28. [X] ljspline.h
        29. [X] ljspline2widget.h
        30. [X] ljspline2table.h
        31. [X] ljspline2.h
        32. [X] improperwidget.h
        33. [X] impropertable.h
        34. [X] improper_datatype.h
        35. [X] coulomb_erfcwidget.h
        36. [X] coulomb_erfctable.h
        37. [X] coulomb_erfc_datatype.h
        38. [X] qtaperwidget.h
        39. [X] qtapertable.h
        40. [X] qtaper_datatype.h
        41. [X] rsl2widget.h
        42. [X] rsl2table.h
        43. [X] rsl2.h
        44. [X] stiwewidget.h
        45. [X] stiwetable.h
        46. [X] stiwe.h
        47. [X] stiwe3bodywidget.h
        48. [X] stiwe3bodytable.h
        49. [X] stiwe3body.h
        50. [X] suttonchenwidget.h
        51. [X] suttonchentable.h
        52. [X] suttonchen.h
        53. [X] tbbuckinghamwidget.h
        54. [X] tbbuckinghamtable.h
        55. [X] tbbuckingham.h
        56. [X] tbmorsewidget.h
        57. [X] tbmorsetable.h
        58. [X] morse.h
        59. [X] tbtaperedgen1widget.h
        60. [X] tbtaperedgen1table.h
        61. [X] tbtaperedgen1.h
        62. [X] tbtaperedgen2widget.h
        63. [X] tbtaperedgen2table.h
        64. [X] tbtaperedgen2.h
        65. [X] tersoffwidget.h
        66. [X] tersoffparticletable.h
        67. [X] tersoffparticle.h
        68. [X] tersoffmixitwidget.h
        69. [X] tersoffmixittable.h
        70. [X] tersoffmixit.h
*** DONE Change Makefile?
         CLOSED: [2014-06-11 Wed 12:31]
        - Note taken on [2014-05-15 Thu 13:51] \\
          In order to add/remove source files of cmake configuration.
          1. Go to cmake folder.
          2. in CMakeLists.txt add/remove corresponding source files.
          3. call ccmake and add local installation path.
          4. run cmake, make, and make install.
*** DONE Adapt all interfaces to PotentialParameterUI
         CLOSED: [2014-06-11 Wed 12:31]
**** DONE In tremologui.cpp
         CLOSED: [2014-06-02 Mon 11:11]

**** DONE Outputmeasurement?
         CLOSED: [2014-06-11 Wed 12:31]
*** DONE Proper error handling in PotentialParameter_Data class.
         CLOSED: [2014-06-11 Wed 12:30]
This concerns the methods:
- void PotentialParameter_Data::writeValidatesFile(QString filename)
- bool PotentialParameter_Data::saveValues( QStringList keywordsIn, QStringList identifierListIn, ParseReturnList returnValueListIn )

*** DONE Determine if QFileDialog::openFileName() works properly (in particular the filter)
         CLOSED: [2014-06-11 Wed 12:30]
*** DONE Debugging [7/7]
         CLOSED: [2014-06-16 Mon 18:02]
        CLOCK: [2014-06-11 Wed 10:00]--[2014-06-11 Wed 12:41] =>  2:41
        CLOCK: [2014-06-05 Thu 12:19]--[2014-06-05 Thu 13:21] =>  1:02
        CLOCK: [2014-06-05 Thu 10:28]--[2014-06-05 Thu 11:30] =>  1:02
        CLOCK: [2014-06-04 Wed 15:00]--[2014-06-04 Wed 18:02] =>  3:02
        CLOCK: [2014-06-04 Wed 12:48]--[2014-06-04 Wed 13:57] =>  1:09
        CLOCK: [2014-06-03 Tue 15:24]--[2014-06-03 Tue 15:58] =>  0:34
**** DONE Load file at startup
         CLOSED: [2014-06-03 Tue 15:44]
**** DONE createFile() slot
         CLOSED: [2014-06-04 Wed 16:38]
After starting tremologui and loading a project. The newFileAction does not give a warning when unsaved data is given in the textedit. (Only at the first time!)
**** DONE Rewrite warning dialogs
         CLOSED: [2014-06-04 Wed 17:51]
The warning is displayed whenever:
- the save button is activated
- the saveAll button is activated
- a new project is created
- a project is opened
**** DONE Fix status bar
         CLOSED: [2014-06-05 Thu 13:12]
- [X] Adapt size of status bar.
- [X] Add connections for the status bar.
**** DONE Set connections.
         CLOSED: [2014-06-05 Thu 13:12]
Missing connections:
- [X] file name in status bar
- [X] connection for dataChanged() signal
**** DONE Rewrite tooltips for buttons
         CLOSED: [2014-06-05 Thu 13:12]
**** DONE Write getter and setter for lastError member.
         CLOSED: [2014-06-11 Wed 12:10]
*** DONE Add "open project file" action
         CLOSED: [2014-06-18 Wed 16:42]
        CLOCK: [2014-06-18 Wed 16:00]--[2014-06-18 Wed 16:42] =>  0:42
*** DONE Add "undo/redo" actions
         CLOSED: [2014-06-18 Wed 16:42]
        CLOCK: [2014-06-16 Mon 18:03]--[2014-06-16 Mon 18:46] =>  0:43
        CLOCK: [2014-06-16 Mon 13:30]--[2014-06-16 Mon 13:55] =>  0:25
*** DONE Clean "Solvers and Parallelization tab"
         CLOSED: [2014-06-18 Wed 17:54]
        CLOCK: [2014-06-18 Wed 16:43]--[2014-06-18 Wed 17:54] =>  1:11
*** TODO Adapt Manual
The source files for the manual are written in file:~/tremologui/doc/.

** TODO Enable mpi-capable simulation in tremologui.
   CLOCK: [2014-06-23 Mon 14:35]--[2014-06-23 Mon 14:50] =>  0:15
   - Note taken on [2014-06-23 Mon 14:41] \\
         Enable parallel-simulation functionality to tremologui.
         The following tasks have to be done:
         - Add option for local MPI-command to preference panel (has to be investigated) s.t. he local MPI command can be stated (xxx)
         - The "Start" button on the simulation tab should be capable to differentiate between the sequentiel and the parallel simulation by means of the number of processes given in the parallelization tab.
           The starting command is =xxx -np x*y*z tremolo_mpi -p x,y,z, (-vx) project.tremolo=.



* DONE Refactoring of "Potentials" page [16/16]
  CLOSED: [2014-07-22 Tue 16:59]
  CLOCK: [2014-06-03 Tue 12:12]--[2014-06-03 Tue 13:57] =>  1:45
  CLOCK: [2014-06-02 Mon 12:11]--[2014-06-02 Mon 13:22] =>  1:11
  CLOCK: [2014-06-02 Mon 10:21]--[2014-06-02 Mon 11:25] =>  1:04
  CLOCK: [2014-05-28 Wed 14:03]--[2014-05-28 Wed 16:38] =>  2:35
  CLOCK: [2014-05-28 Wed 12:04]--[2014-05-28 Wed 12:45] =>  0:41
  CLOCK: [2014-05-27 Tue 15:15]--[2014-05-27 Tue 15:50] =>  0:35
  CLOCK: [2014-05-27 Tue 12:43]--[2014-05-27 Tue 14:15] =>  1:32
  CLOCK: [2014-05-26 Mon 10:48]--[2014-05-26 Mon 11:48] =>  1:00
  CLOCK: [2014-05-23 Fri 13:43]--[2014-05-23 Fri 15:27] =>  1:44
  CLOCK: [2014-05-22 Thu 16:58]--[2014-05-22 Thu 18:11] =>  1:13
  CLOCK: [2014-05-22 Thu 12:39]--[2014-05-22 Thu 16:10] =>  3:31
  CLOCK: [2014-05-21 Wed 16:20]--[2014-05-21 Wed 17:20] =>  1:00
  CLOCK: [2014-05-21 Wed 14:31]--[2014-05-21 Wed 16:11] =>  1:40
  CLOCK: [2014-05-16 Fri 17:44]--[2014-05-16 Fri 19:16] =>  1:32
  CLOCK: [2014-05-16 Fri 14:31]--[2014-05-16 Fri 16:36] =>  2:05
  CLOCK: [2014-05-15 Thu 12:33]--[2014-05-15 Thu 13:56] =>  1:23
  CLOCK: [2014-05-15 Thu 10:19]--[2014-05-15 Thu 11:24] =>  1:05
  CLOCK: [2014-05-14 Wed 16:51]--[2014-05-14 Wed 18:34] =>  1:43
  CLOCK: [2014-05-14 Wed 14:46]--[2014-05-14 Wed 15:37] =>  0:51
  CLOCK: [2014-05-14 Wed 14:30]--[2014-05-14 Wed 14:46] =>  0:16
  CLOCK: [2014-05-13 Tue 17:26]--[2014-05-13 Tue 19:03] =>  1:37
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-07-22 Tue 16:59
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
 - Note taken on [2014-06-16 Mon 13:36] \\
       Besprechung mit Christian
       Folgende Änderungen müssen noch durchgeführt werden:
       1. Hinzufügen von "undo/redo" buttons
       2. Anpassen des "Solvers and Parallelization" tabs:
          - Benenne tab in "Parallelization" um
          - Entferne alles was mit den Solvern zu tun hat
 - Note taken on [2014-05-07 Wed 15:17] \\
       Besprechung mit Christian am [2014-05-07 Wed]

       Überarbeitung des "Potentials" tab - Zusammenfassung:
       1. Behalte Trennung von Data und GUI bei:
          - PotentialParameter_Data enthält:
                + Parser
                + QStringList mit particle types
                + ggfs. weitere Data
          - PotentialParameter_GUI enthält alle benötigten Widgets:
                + Menüleiste mit "New", "Open", "Save" Button
                + Editor-Fenster
                + Platz für spätere Widgets
       2. Beschreibung der 3 Buttons:
          - "New" ::
                - gibt Warnung aus
                - erstellt leeres $Project.potentials file
                - ruft Parser auf und updated data (particle types etc.)
                - erstellt zugehöriges $Project.validates file
          - "Open" ::
                - öffnet eine Öffnen-Dialog
                - gibt Warnung aus (nach Wahl eines files)
                - erstellt lokale Kopie des ausgewählten files im Projekt-Ordner
                - ruft Parser auf und updated data
                - erstellt zugehöriges $Project.validates file
                - WICHTIG: soll erweiterbar sein
          - "Save" ::
                - nur enabled wenn $Project.potentials file sich geändert hat
                - gibt Warnung aus
                - speichert Änderungen im $Project.potentials file
                - ruft Parser auf und updated data
                - erstellt zugehöriges $Project.validates file
       3. "Save-All" button
          Rufe slot des "Save"-Buttons auf, wenn der "Save-All" button des Main Windows angeklickt wurde.
       4. Eventuell noch "Undo" and "Redo" Buttons?
** DONE What interfaces are given?
        CLOSED: [2014-05-07 Wed 15:12]
*** DONE Where is the "Potentials" tab created?
         CLOSED: [2014-05-07 Wed 15:12]
The PotentialParameterUI object is created in the constructor of the main window (see tremologui.h). It is a child object of TremoloGUI:
: PotentialParameterUI* potentialparametertab;
The potentialtab object is used in the following lines of tremologui.cpp
- l.106-109 :: Initialization of potentialparametertab and addition to the maintab widget
- l.110 :: Connect the isChanged(bool) signal of myProject to the setEnabled(bool) signal of potentialparametertab (derived from QWidget)
- l.112 :: Create a new PotentialParameter_Data object from the one saved in potentialparametertab. The copy is then used to construct the simulation tab.
- l.290 :: Connect the newSaveState() signal of potentialparametertab to the dataUpdateSavedStatus slot updating the state of the saveallbutton
- l.459 :: Checks save state of potentialparametertab
- l.651 :: TremoloGUI::projectChanged() sends update requests to all dataclasses. In potentialparametertab the reloadfile() method is called which is doing nothing??
- l.711 :: TremoloGUI::dataUpdateSavedStatus() updates the state of the saveallbutton
- l.719 :: TremoloGUI::dataSaveAllSlot() calls the saveslots from every dataclass. In potentialparametertab the fileSave() method is called.
- l.739,753,764 :: TremoloGUI::checkAndLoad/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject() set the save state of potentialparametertab.
*** DONE What signals/slots are given?
         CLOSED: [2014-05-07 Wed 15:12]
In PotentialParameterUI the following slots are needed within tremologui.cpp:
- setEnabled(bool) exists by default (since derived from QWidget)
The following signals are needed within tremologui.cpp:
- newSaveState()
*** DONE Where are all the other classes created?
        CLOSED: [2014-05-07 Wed 15:12]
*** DONE List of functions that must be present
         CLOSED: [2014-05-07 Wed 15:12]
- bool issaved storing the save-state
- bool isSaved()
  returns issaved
  used in TremoloGUI::unsavedData() (see line 459 of tremologui.cpp)
  used in TremoloGUI::unsavedData() (see line 711 of tremologui.cpp)
- void setSavedStatus(bool status)
  sets the issaved variable to status
  used in TremoloGUI::checkandload/checkSavedStatusAndNewProject/checkSavedStatusAndOpenProject (see lines 739, 753 and 764 of tremologui.cpp)
- void reloadfile(QString filename)
  reload potentials file
  used in TremoloGUI::projectChanged() (see line 651 of tremologui.cpp)
- bool fileSave() (slot)
  save file and return true if everything is ok, false otherwise, ask for validity?
  used in TremoloGUI::dataSaveAllSlot() (see line 719 of tremologui.cpp)
- void newSaveState() (signal)
  should be emitted if the save state changes

** DONE Implementation of new "Potentials" tab
        CLOSED: [2014-05-07 Wed 15:12]
**** Example: Files for Datafile-tab
parametertextedit.h
parametertextedit.cpp
***** Description of parametertextedit.h and parametertextedit.cpp
- Two classes
  1. class textEditStatusBar : public QWidget
  2. class parameterTextEdit : public QMainWindow

**** Description of textEditStatusBar class

Implements the status bar in the "Datafile"-tab (just at the lower end of the window).

The status bar consists of 4 different frames (QFrame) containing each a QLabel with
+ the current position of the cursor
+ a indicator that shows if the file has been changed
+ the type of the file
+ the name of the file

The layout is managed by a QHBoxLayout for the statusbar itself and for different GridLayouts for each of the frames.

The following slots are implemented:
+ changeCurrentPos
+ setFilename
+ setEditMode
+ languageChange

**** Description of parameterTextEdit class

Implements a texteditor for datafiles in the "Datafile"-tab. It is essentially a QMainWindow with a QTextEdit. Moreover the class has a textEditStatusBar as child object.

The class contains the following children:
+ QTextEdit for the texteditor window
+ QToolBar a toolbar for the texteditor
+ QActions for all buttons on the toolbar
+ QStrings to save the parameter file and a suffix
+ textEditStatusBar
+ bools for different indications

The layout is managed by only one QVBoxLayout.

There are only a few method implemented in the class:
+ bool isSaved() const // returns true if the file is saved
+ void setSavedStatus(bool status) // sets the status of the file
+ void fileLoad(QString File) // loads the file that is supposed to be edited
+ void renewTextEdit2() // ?

Slots:
+ void fileSave() // saves the file
+ void reloadfile(QString parameterFileIn) // reload the file
+ void clearBuffer(bool ask=true) // ?
+ void setLoadingfileStatus(bool status) // ?
+ void enableFileSaveAction(void) // ?
+ void changeCurrentPos (void) // ?
+ void fileOpen() // open new file
+ fileSaveAs() // save file as
+ textEditChanged // action if textEdit has been changed
+ virtual void languageChange() // set language

Signals:
+ void newSaveState() // is send if the save-state of the file changes

** DONE Get overview over all source files that are used for the "Potentials" tab
        CLOSED: [2014-05-07 Wed 15:13]
*** Main Window : PotentialParameterUI
Can be found in
- potentialparameterui.h
- potentialparameterui.cpp

The class is derived from the PotentialParameterUISuperClass.
It contains
1. =ParticleWidget* particleWidget : public PotentialParameterWidget=
   Widget containing the upper half of the main window ("Particle types").
   The Widget contains
   - ParticleTable* particleTable : public PotentialParameterTable
   - PotentialParameter_Data* myPotentialParameter_Data
   - TremoloGUIConfig* myConfig
   - QPushButtons* disableParticleTypeButton and enableParticleTypeButton
   - QLabel* warningLabel
2. =QTabWidget* potentialsTabWidget=
   This tab widget is the main tab bar for the second half of the main window (potential selection).
   It hosts the following tabs:
   - "Non-bonded Potentials" (-> nonBondedTabWidget)
   - "Bonded Potentials (off)" (-> bondedTabWidget)
   - "TB tapered Potentials (off)" (-> tbTaperedWidget and tbTaperedTabWidget)
3. =QTabWidget* bondedTabWidget=
   This tab widget is the main tab bar for the "Bonded Potentials (off)" page.
   It contains the following widgets (all child objects of the PotentialParamerUI class):
   - AngleWidget* angleWidget
   - BondsWidget* bondsWidget
   - ImproperWidget* improperWidget
4. =QTabWidget* nonBondedTabWidget=
   This tab widget is the main tab bar for the "Non-bonded Potentials" page.
   It contains all widgets for the different potentials (all child objects of the PotentialParameterUI class):
   - QWidget* brennerWidget and Q3Table* brennerTable;
   - EamWidget* eamWidget;
   - Q3VBox* coulomb_ERFCBox and Coulomb_ERFCWidget* coulomb_ERFCWidget;
   - LennardJonesWidget* lennardJonesWidget;
   - M_N_LennardJonesWidget* m_n_lennardJonesWidget;
   - LJSplineWidget* ljSplineWidget;
   - LJSpline2Widget* ljSpline2Widget;
   - RSL2Widget* rsl2Widget;
   - StiWeWidget* stiWeWidget;
   - StiWe3BodyWidget* stiWe3BodyWidget;
   - SuttonChenWidget* suttonChenWidget;
   - Q3VBox* tersoffBox;
5. =QTabWidget* tbTaperedTabWidget=
   This tab widget is the main tab bar for the "TB tapered Potentials (off)".
   It is contained in the QWidget* tbTaperedWidget and contains the following widges (all child object of the PotentialParameterUI class):
   - TBBuckinghamWidget* tbBuckinghamWidget;
   - TBTaperedGen1Widget* tbTaperedGen1Widget;
   - TBTaperedGen2Widget* tbTaperedGen2Widget;
   - TBMorseWidget* tbmorseWidget;
   - BN3bodyWidget* bn3bodyWidget;
   - DampedDispWidget* dampedDispWidget;

*** Corresponding data file: PotentialParameter_Data
***** Implements:
class PotentialParameter_Data
***** Description:
The class contains all data that is necessary to write the potentials and the validates file.
****** Members (only important ones)
- instances of all potentials
- pointer to the project (Project_Control* myProject)
- pointer to the configuration (TremoloGUIConfig* myConfig)
- a parser (ParameterParser* myParser)
- pointer to the PotentialParameterUI parent class (PotentialParameterUISuperClass* parentUI)
- booleans to indicate which potentials are going to be used
- boolean loadingFile (if true some tests are skipped -> faster loading)
****** Member functions (only important ones)
- getter and setter methods for all potentials
- saveValues(): uses the Output of the parser and saves all data from the file into the data structure - this method is called within ParameterParser::parseFile()
- writeToFile(): Opens a file for writing, calls toParameterFileString() and writes all data to the file
- writeToValidatesFile(): Analougously to writeToFile() but for the validates data.
- readFromFile(): starts the parser for the given file and then saves all data to the data structure
- projectHasChanged(): important SLOT that is called whenever something in the project changed (sinal of Project_Control* myProject) - it calls clear() and readFromFile()
- SIGNALS: signals that indicate if a potential changed
- SLOTS: slots for removing/setting potential data
- some helper methods for file writing (getPOTENTIALNAMEDataFileString()) for each potential
****** Constructor
1. Set myConfing, myProject, p_parent_UI
2. Create all potential objects
3. Set all m_usePOTENTIALNAME booleans to false
4. Set loadingFile boolean to false
5. Initialize myParser and register data class of this in parser
6. Add some connections
***** Derived classes:
None.
***** Questions:
- By which classes is the PotentialParameter_Data class used?
***** Must be changed?
Yes.
This class reads from the file and writes the potentials/validats files.
- The writing functionality must be deleted
- The parsing functionality must be maintained
** DONE Draft for the new "Potentials" tab
        CLOSED: [2014-06-02 Mon 10:23]
       - Note taken on [2014-05-13 Tue 19:00] \\
         Questions:
         - How is the content of a file stored in QTextEdit?
         - Does it needs the underlying file?
         - Can a file be savely loaded by QTextEdit and changes made in the QTextEdit without modifying the initial file?
         Answers:
         It seems that QTextEdit does not need an underlying file:
         The text of a QFile is loaded in the QTextEdit using setText() which only needs a QString.
         The underlying file can be closed after loading and is not modified afterwards. This only depends on the save method.
       - Note taken on [2014-05-13 Tue 17:28] \\
         1. At creation of a new project -> create empty .potentials and .validates files.
         2. Warning at "Save" button: try to avoid warnings at "New" and "Open" buttons.
            - For the "New" button: NO warning necessary -> only warning when hitting "Save" button
            - For the "Open" button: Depends how the editor loads the file.
*** DONE Draft for PotentialTextEditStatusBar : public QWidget
        CLOSED: [2014-05-14 Wed 18:05]
**** Specifications:
Status bar having the following fields: (from left to right)
1. Current position in line and column
2. Save status
3. Current status (File loaded + name, file saved, created new file, file modified)
4. Name of the file
**** Members:
QHBoxLayout* textEditStatusBarLayout
QGridLayout* frame1Layout
QGridLayout* frame2Layout
QGridLayout* frame3Layout
QGridLayout* frame4Layout
QFrame* frame1 // for current position
QFrame* frame2 // for save status
QFrame* frame3 // for current status
QFrame* frame4 // for name of the file
QLabel* label1 // for current position
QLabel* label2 // for save status
QLabel* label3 // for current status
QLabel* label4 // for name of the file
**** Slots:
void setCurrentPos(int lin = 0, int col = 0)
void setSaveStatus(bool saved = true)
void setCurrentStatus(QString message)
void setFileName(QString filename)
void languageChange()
** DONE Change ParticleType class
** DONE Make a list of all files that are not needed anymore
        CLOSED: [2014-05-28 Wed 15:30]
       1. [X] anglewidget.h
       2. [X] angletable.h
       3. [X] angle.h
       4. [X] bn3bodywidget.h
       5. [X] bn3bodytable.h
       6. [X] bn3body.h
       7. [X] bondswidget.h
       8. [X] bondtable.h
       9. [X] bond.h
       10. [X] eamwidget.h
       11. [X] eam.h
       12. [X] dampeddispwidget.h
       13. [X] dampeddisptable.h
       14. [X] dampeddisp.h
       15. [X] particlewidget.h
       16. [X] particletable.h
       17. [X] torsionwidget.h
       18. [X] torsiontable.h
       19. [X] torsion.h
       20. [X] m_n_lennardjoneswidget.h
       21. [X] m_n_lennardjonestable.h
       22. [X] m_n_lennardjones.h
       23. [X] lennardjoneswidget.h
       24. [X] lennardjonestable.h
       25. [X] lennardjones.h
       26. [X] ljsplinewidget.h
       27. [X] ljsplinetable.h
       28. [X] ljspline.h
       29. [X] ljspline2widget.h
       30. [X] ljspline2table.h
       31. [X] ljspline2.h
       32. [X] improperwidget.h
       33. [X] impropertable.h
       34. [X] improper_datatype.h
       35. [X] coulomb_erfcwidget.h
       36. [X] coulomb_erfctable.h
       37. [X] coulomb_erfc_datatype.h
       38. [X] qtaperwidget.h
       39. [X] qtapertable.h
       40. [X] qtaper_datatype.h
       41. [X] rsl2widget.h
       42. [X] rsl2table.h
       43. [X] rsl2.h
       44. [X] stiwewidget.h
       45. [X] stiwetable.h
       46. [X] stiwe.h
       47. [X] stiwe3bodywidget.h
       48. [X] stiwe3bodytable.h
       49. [X] stiwe3body.h
       50. [X] suttonchenwidget.h
       51. [X] suttonchentable.h
       52. [X] suttonchen.h
       53. [X] tbbuckinghamwidget.h
       54. [X] tbbuckinghamtable.h
       55. [X] tbbuckingham.h
       56. [X] tbmorsewidget.h
       57. [X] tbmorsetable.h
       58. [X] morse.h
       59. [X] tbtaperedgen1widget.h
       60. [X] tbtaperedgen1table.h
       61. [X] tbtaperedgen1.h
       62. [X] tbtaperedgen2widget.h
       63. [X] tbtaperedgen2table.h
       64. [X] tbtaperedgen2.h
       65. [X] tersoffwidget.h
       66. [X] tersoffparticletable.h
       67. [X] tersoffparticle.h
       68. [X] tersoffmixitwidget.h
       69. [X] tersoffmixittable.h
       70. [X] tersoffmixit.h
** DONE Change Makefile?
        CLOSED: [2014-06-11 Wed 12:31]
       - Note taken on [2014-05-15 Thu 13:51] \\
         In order to add/remove source files of cmake configuration.
         1. Go to cmake folder.
         2. in CMakeLists.txt add/remove corresponding source files.
         3. call ccmake and add local installation path.
         4. run cmake, make, and make install.
** DONE Adapt all interfaces to PotentialParameterUI
        CLOSED: [2014-06-11 Wed 12:31]
*** DONE In tremologui.cpp
        CLOSED: [2014-06-02 Mon 11:11]

*** DONE Outputmeasurement?
        CLOSED: [2014-06-11 Wed 12:31]
** DONE Proper error handling in PotentialParameter_Data class.
         CLOSED: [2014-06-11 Wed 12:30]
This concerns the methods:
- void PotentialParameter_Data::writeValidatesFile(QString filename)
- bool PotentialParameter_Data::saveValues( QStringList keywordsIn, QStringList identifierListIn, ParseReturnList returnValueListIn )

** DONE Determine if QFileDialog::openFileName() works properly (in particular the filter)
        CLOSED: [2014-06-11 Wed 12:30]
** DONE Debugging [7/7]
        CLOSED: [2014-06-16 Mon 18:02]
       CLOCK: [2014-06-11 Wed 10:00]--[2014-06-11 Wed 12:41] =>  2:41
       CLOCK: [2014-06-05 Thu 12:19]--[2014-06-05 Thu 13:21] =>  1:02
       CLOCK: [2014-06-05 Thu 10:28]--[2014-06-05 Thu 11:30] =>  1:02
       CLOCK: [2014-06-04 Wed 15:00]--[2014-06-04 Wed 18:02] =>  3:02
       CLOCK: [2014-06-04 Wed 12:48]--[2014-06-04 Wed 13:57] =>  1:09
       CLOCK: [2014-06-03 Tue 15:24]--[2014-06-03 Tue 15:58] =>  0:34
*** DONE Load file at startup
        CLOSED: [2014-06-03 Tue 15:44]
*** DONE createFile() slot
         CLOSED: [2014-06-04 Wed 16:38]
After starting tremologui and loading a project. The newFileAction does not give a warning when unsaved data is given in the textedit. (Only at the first time!)
*** DONE Rewrite warning dialogs
         CLOSED: [2014-06-04 Wed 17:51]
The warning is displayed whenever:
- the save button is activated
- the saveAll button is activated
- a new project is created
- a project is opened
*** DONE Fix status bar
         CLOSED: [2014-06-05 Thu 13:12]
- [X] Adapt size of status bar.
- [X] Add connections for the status bar.
*** DONE Set connections.
         CLOSED: [2014-06-05 Thu 13:12]
Missing connections:
- [X] file name in status bar
- [X] connection for dataChanged() signal
*** DONE Rewrite tooltips for buttons
        CLOSED: [2014-06-05 Thu 13:12]
*** DONE Write getter and setter for lastError member.
        CLOSED: [2014-06-11 Wed 12:10]
** DONE Add "open project file" action
        CLOSED: [2014-06-18 Wed 16:42]
       CLOCK: [2014-06-18 Wed 16:00]--[2014-06-18 Wed 16:42] =>  0:42
** DONE Add "undo/redo" actions
        CLOSED: [2014-06-18 Wed 16:42]
       CLOCK: [2014-06-16 Mon 18:03]--[2014-06-16 Mon 18:46] =>  0:43
       CLOCK: [2014-06-16 Mon 13:30]--[2014-06-16 Mon 13:55] =>  0:25
** DONE Clean "Solvers and Parallelization tab"
        CLOSED: [2014-06-18 Wed 17:54]
       CLOCK: [2014-06-18 Wed 16:43]--[2014-06-18 Wed 17:54] =>  1:11
** DONE Change font in text edit (for example in ubuntu)
        CLOSED: [2014-06-24 Tue 13:31]
** DONE Adapt Manual
         CLOSED: [2014-06-30 Mon 11:03]
        CLOCK: [2014-06-25 Wed 16:01]--[2014-06-25 Wed 17:50] =>  1:49
        CLOCK: [2014-06-25 Wed 13:31]--[2014-06-25 Wed 15:00] =>  1:29
        CLOCK: [2014-06-24 Tue 13:34]--[2014-06-24 Tue 13:58] =>  0:24
        CLOCK: [2014-06-24 Tue 12:10]--[2014-06-24 Tue 13:34] =>  1:24
The source files for the manual are written in file:~/tremologui/doc/.
*** Example text for the manual
The potential parameter tab provides a text editor for editing the potential file of your current project.
<figure1>
The text editor allows basic text editing functionalities.
The statusbar at the foot of the editor displays information about the cursor position, whether the file is modified or not, status messages and the path to the potential file.
The toolbar provides loading and saving functionalities for potential files.
- Revert To Project Stage: loads the potential file of your current project directory to the text editor.
- Clear File: Deletes all the text in the text editor. Note that the undo/redo history is cleared by this action.
- Open File: Opens a dialog window for potential file selection.
- Save File To Project: Saves the current state of the text editor to the potential file of your current project. Note that your current potential file is overwritten by this action.

Additional information about the structure of potential files can be found in the Tremolo manual.

* DONE Enable mpi-capable simulation in tremologui.
  CLOSED: [2014-07-22 Tue 17:10]
  CLOCK: [2014-07-21 Mon 18:11]--[2014-07-21 Mon 19:00] =>  0:49
  CLOCK: [2014-07-21 Mon 14:00]--[2014-07-21 Mon 16:30] =>  2:30
  CLOCK: [2014-07-21 Mon 11:19]--[2014-07-21 Mon 13:00] =>  1:41
  CLOCK: [2014-07-16 Wed 14:52]--[2014-07-16 Wed 15:15] =>  0:23
  CLOCK: [2014-07-09 Wed 14:12]--[2014-07-09 Wed 15:47] =>  1:35
  CLOCK: [2014-07-08 Tue 12:28]--[2014-07-08 Tue 14:03] =>  1:35
  CLOCK: [2014-07-07 Mon 13:56]--[2014-07-07 Mon 15:19] =>  1:23
  CLOCK: [2014-07-02 Wed 14:08]--[2014-07-02 Wed 16:05] =>  1:57
  CLOCK: [2014-06-30 Mon 12:02]--[2014-06-30 Mon 12:35] =>  0:33
  CLOCK: [2014-06-30 Mon 11:00]--[2014-06-30 Mon 12:01] =>  1:01
  CLOCK: [2014-06-23 Mon 14:35]--[2014-06-23 Mon 14:50] =>  0:15
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-07-22 Tue 17:24
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
  - Note taken on [2014-06-23 Mon 14:41] \\
        Enable parallel-simulation functionality to tremologui.
        The following tasks have to be done:
        - Add option for local MPI-command to preference panel (has to be investigated) s.t. the local MPI command can be stated (xxx)
        - The "Start" button on the simulation tab should be capable to differentiate between the sequentiel and the parallel simulation by means of the number of processes given in the parallelization tab.
          The starting command is =xxx -np x*y*z tremolo_mpi -p x,y,z, (-vx) project.tremolo=.
** DONE Add text edit for local MPI-command to preference panel
         CLOSED: [2014-07-08 Tue 12:29]
        - Note taken on [2014-07-07 Mon 13:58] \\
          The interface for the preference panel is stored in the class TGCCange in tgcchange.h
For this the following has to be done:
1. [X] in tgCCange:
   - [X] add appropriate members
   - [X] add appropriate slot -> /not necessary/
   - [X] adapt constructor and languageChange()
2. [-] in TremoloGUIConfig:
   - [ ] maybe add an extern variable
   - [X] add appropriate members and key for QSettings object
   - [ ] slot for testing the command?
   - [X] appropriate signals
   - [X] adapt constructor
   - [X] adapt destructor
   - [X] appropriate getter and setter methods
   - [X] adapt changeConfig()
** DONE Fix storing of "Parallel simulation executable" in the Preference Panel
        CLOSED: [2014-07-03 Thu 14:47]
       CLOCK: [2014-07-03 Thu 12:35]--[2014-07-03 Thu 14:47] =>  2:12
** DONE Continue to edit runsimulationui.h and runsimulationui.cpp
        CLOSED: [2014-07-09 Wed 15:06]
** DONE Review runsimulation.h and runsimulation.cpp
        CLOSED: [2014-07-21 Mon 18:35]
       - Note taken on [2014-07-16 Wed 14:59] \\
         The following has to be done:
         1. Determine which data has to be transferred to the runsimulation class such that it can start the right simulation.
            - add parallelProgram to argument list
            - add localMPICommand to argument list
            - number of processes
         2. Change writeArguments, such that
            - the number of processes is counted
            - the right processName is selected
            - the right argument list is selected
** DONE Add parallel simulation functionality to tremologui using the given MPI command and the number of processes indicated in the "Parallelization" tab.
        CLOSED: [2014-07-21 Mon 18:35]

** DONE Ask Christian about default value of local MPI command. Should there be a hint in which order the flags are supposed to be used?
   CLOSED: [2014-07-22 Tue 17:10]

* DONE Installiere Dakota
    CLOSED: [2014-07-23 Wed 16:56]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-08-07 Thu 09:06
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Learn Dakota
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
Problem: Falsche Boost Version?

* DONE Make short overview about Dakota
  CLOSED: [2014-08-05 Tue 10:13] SCHEDULED: <2014-07-24 Thu>
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-08-07 Thu 09:07
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Learn Dakota
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
** DONE Do Second Part of Dakota Tutorial (Chapter two of the manual)
   CLOSED: [2014-08-04 Mon 10:43] SCHEDULED: <2014-07-31 Thu 8:00-12:00>
   CLOCK: [2014-08-04 Mon 10:19]--[2014-08-04 Mon 10:43] =>  0:24
   CLOCK: [2014-07-31 Thu 10:04]--[2014-07-31 Thu 11:55] =>  1:51
   CLOCK: [2014-07-30 Wed 17:52]--[2014-07-30 Wed 19:34] =>  1:42
   CLOCK: [2014-07-30 Wed 15:45]--[2014-07-30 Wed 16:25] =>  0:40
   CLOCK: [2014-07-30 Wed 15:20]--[2014-07-30 Wed 15:30] =>  0:10
   CLOCK: [2014-07-30 Wed 14:34]--[2014-07-30 Wed 15:20] =>  0:46

* DONE Learn about the Poisson-Nernst-Planck Equation and ionic migration
    CLOSED: [2014-08-06 Wed 09:08] SCHEDULED: <2014-08-02 Sat>
    CLOCK: [2014-08-04 Mon 09:09]--[2014-08-04 Mon 10:12] =>  1:03
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-08-07 Thu 09:07
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben/Learn Dakota
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
The theory can be found in [[file:~/dakota/dakota-notes/diplom_neuen.pdf][Christians diploma thesis]].

* Aufgaben
  CLOCK: [2014-08-20 Wed 15:55]--[2014-08-20 Wed 15:55] =>  0:00
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-10-07 Tue 14:25
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_CATEGORY: todos
  :END:
  - Note taken on [2014-04-16 Wed 15:57] \\
        Besprechung mit Christian um [2014-04-16 Wed 15:57]
        Zwei Aufgabenziele:
        1. Kurzfristiges Ziel:
           Überarbeitung des "potentials" tabs
           - Übernehme Elemente von "Datafile" tab
           - Obere 2/3 des Tabs: Editor-Fenster in das ein Potentials-file geladen werden soll
                 - der Editor soll die Funktionen "open" and "save" bereitstellen
                 - open-button:
                   + soll erweiterbar sein (d.h. es sollen noch mögliche "Suchfunktionen" eingebunden werden können -> handler)
                   + vorerst: einen beliebigen Ordner öffnen
                   + nach .potential files filtern
                   + nachdem der Nutzer ein file ausgewählt hat, soll eine Kopie des files in den Projekt-Ordner gelegt werden mit dem Namen "PROJECTNAME.potentials"
                   + falls nach Sicherung eines .potential-files ein weiteres file geöffnet wird, soll eine Warnung zum "Datenverlust" abgegeben werden.
                 - save-button:
                   + speichert die Änderungen im .potentials file.
           - Stelle sicher, dass immer ein .validates-file erzeugt wird (notfalls auch leer (default)).
        2. Langfristiges Ziel:
           - Verifizieren von Ensembles
           - etwas mit Monte-Carlo Methoden (siehe folgende Links)
                 - [[file:~/Work/literature/Possible%20Master%20topics/Combining%20molecular%20dynamics%20with%20Monte%20Carlo%20simulations.pdf][Combining molecular dynamics and Monte Carlo methods]]
                 - [[file:~/Work/literature/Possible%20Master%20topics/Uniform-acceptance%20force-bias%20Monte%20Carlo%20method%20with%20time%20scale%20to%20study%20solid-state%20diffusion.pdf][Uniform-acceptance force-bias Monte Carlo method]]

** DONE Learn Dakota
   CLOSED: [2014-09-12 Fri 11:27]
   CLOCK: [2014-07-29 Tue 14:09]--[2014-07-29 Tue 17:48] =>  3:39
   CLOCK: [2014-07-23 Wed 14:00]--[2014-07-23 Wed 16:56] =>  2:56
   CLOCK: [2014-07-22 Tue 14:00]--[2014-07-22 Tue 17:22] =>  3:22
   - Note taken on [2014-08-20 Wed 15:56] \\
     Treffen mit Christian am 20.08.2014

     Weiteres Vorgehen:
     1. Abschluss der Sampling Methoden
     2. Details zu den Intervall-Methoden:
        - Kosten
        - Lokale vs. Global (beides ausprobieren)
     3. Weitere Recherche zu sensitivity analysis: Main variables...
   - Note taken on [2014-08-13 Wed 15:38] \\
     Besprechung mit Christian am 13.08.2014, 15:00 Uhr
     1. Festlegung der Parameter Variablen und Response functions.
        Wird die Simulation als Blackbox betrachtet, ist folgender Input für die Analyse von Bedeutung:
        - (1 - n) Diffusionskoeffizienten + Unschärfe, d.h.
          D_0 + \Delta D_0, D_1 + \Delta D_1, D_2 + \Delta D_2, ... ,
          wobei n wahrscheinlich bei 1 - 10 liegt.
        - (1 - n) Gradienten von Chemischen Potenzialen + Unschärfe, d.h.
          \nable \mu_0 + \Delta \nabla \mu_0, \nable \mu_1 + \Delta \nabla \mu_1, \nable \mu_2 + \Delta \nabla \mu_2,...
        Als Output erhalten wir den (elektrischen) Fluss.
        Notizen: Die Diffusionskoeffizienten sind in der Simulation von der Konzentration abhängig. Wir erhalten als Datensätze die Werte von Diffusionskoeffizient+Unschärfe und vom chemischen Potenzial+Unschärfe für verschiedene Konzentrationswerte.
        Die Anzahl der Input Variablen hängt somit auch von der Genauigkeit der Datensätze ab: Bei geringer Genauigkeit kann es sein, dass eine Änderung der Konzentration nicht einen anderen Wert des Diffusionskoeffizienten erfordert.
        Mögliches Szenario wäre also z. Bsp.
        - Input:
          - D_0, D_1, D_2, D_3
          - mu_0, mu_1, mu_2
        - Output:
          - Fluss
        Die Samples müssen dann dem durch die Unschärfen definierten Bereichen entnommen werden.
     2. Aufgabe.
        Ich soll die von Dakota bereitgestellten Methoden von UQ, Parameter Studies, DoE, Sensitivity Analysis durchsuchen und nach geeigneten Methoden suchen.
        Es sollen folgende Aussagen gemacht werden können:
        - Welche Parameter (welche Diffusionskoeffizienten, welche Potentiale) sind entscheidend für den Fluss?
        - Wie sensibel ist der Output gegenüber den Veränderungen an den Input Variablen?
   - Note taken on [2014-07-23 Wed 17:00] \\
     All notes can be found in [[file:~/dakota/dakota-notes/notes.org][this]] org file.
   - Note taken on [2014-07-22 Tue 17:11] \\
     Aufgabenbeschreibung:

     Im Zuge einer Software zur Ionen-Migration (Berechnung über die Poisson-Nernst-Planck Gleichung) soll ein script geschrieben werden, dass als Input Diffusionswerte, chemisches Potential und erwartete Fehler entgegennimmt und anschließend den elektrischen Fluß bestimmt.
     Dazu soll das Optimierungsprogramm DAKOTA (Design Analysis Kit for Optimization and Terascale Applications) von den SNL verwendet werden.

     Meine Aufgabe ist es nun
     1. Mache mich Dakota vertraut
        + Lese das gesamte Manual (Version 5.4).
        + Schaue, was für das obige Problem wichtig sein kann.
     2. Schreibe ein Script (nach Absprache mit Christian)

     _Poisson-Nernst-Planck Gleichung_
     \partial_t c = \nabla [D (\nabla c + \alpha \nabla \phi + \beta c \nabla \mu )]
     \Delta \phi = \sum_i z_i c_i
*** DONE Installiere Dakota
    CLOSED: [2014-07-23 Wed 16:56]
Problem: Falsche Boost Version?

*** DONE Make short overview about Dakota
    CLOSED: [2014-08-05 Tue 10:13] SCHEDULED: <2014-07-24 Thu>
**** DONE Do Second Part of Dakota Tutorial (Chapter two of the manual)
     CLOSED: [2014-08-04 Mon 10:43] SCHEDULED: <2014-07-31 Thu 8:00-12:00>
     CLOCK: [2014-08-04 Mon 10:19]--[2014-08-04 Mon 10:43] =>  0:24
     CLOCK: [2014-07-31 Thu 10:04]--[2014-07-31 Thu 11:55] =>  1:51
     CLOCK: [2014-07-30 Wed 17:52]--[2014-07-30 Wed 19:34] =>  1:42
     CLOCK: [2014-07-30 Wed 15:45]--[2014-07-30 Wed 16:25] =>  0:40
     CLOCK: [2014-07-30 Wed 15:20]--[2014-07-30 Wed 15:30] =>  0:10
     CLOCK: [2014-07-30 Wed 14:34]--[2014-07-30 Wed 15:20] =>  0:46
*** DONE Learn about the Poisson-Nernst-Planck Equation and ionic migration
    CLOSED: [2014-08-06 Wed 09:08] SCHEDULED: <2014-08-02 Sat>
    CLOCK: [2014-08-04 Mon 09:09]--[2014-08-04 Mon 10:12] =>  1:03
The theory can be found in [[file:~/dakota/dakota-notes/diplom_neuen.pdf][Christians diploma thesis]].

*** TODO Read Chapter about Parameter studies and UQ
    SCHEDULED: <2014-08-04 Mon 8:00-12:00>
    CLOCK: [2014-08-06 Wed 14:00]--[2014-08-06 Wed 14:38] =>  0:38
    CLOCK: [2014-08-04 Mon 11:41]--[2014-08-04 Mon 12:49] =>  1:08
    CLOCK: [2014-08-04 Mon 10:44]--[2014-08-04 Mon 11:12] =>  0:28
    - Note taken on [2014-07-31 Thu 11:51] \\
      Meeting with Christian Thu, 31 Jul 2014 11:30

      - How to read correlation matrices in Figure 2.10
      - Read everything about parameter studies and uncertainty quantification (design of experiments)
      - aim: star correlations for diffusion D and chemical potential \mu in dependance of the concentration
        - are there such a thing?
        - want to know: if D differs 5% to above, how much does the flux F change?
**** DONE Finish Chapter about Parameter Studies (do some examples)
     CLOSED: [2014-08-05 Tue 12:44] SCHEDULED: <2014-08-05 Tue 8:00-13:00>
     CLOCK: [2014-08-05 Tue 10:00]--[2014-08-05 Tue 12:43] =>  2:43
**** DONE What does the correlation matrices mean?
     CLOSED: [2014-08-13 Wed 15:58]
     CLOCK: [2014-08-13 Wed 13:20]--[2014-08-13 Wed 15:58] =>  2:38
     CLOCK: [2014-08-13 Wed 10:35]--[2014-08-13 Wed 12:20] =>  1:45
     Notes can be found in the [[file:~/dakota/dakota-notes/notes.org][Dakota-Notes-file]].
**** DONE Read Chapter 5 about Uncertainty Quantification Capabilites [3/3]
     CLOSED: [2014-08-23 Sat 14:18] SCHEDULED: <2014-08-20 Wed 08:00-13:00>
     CLOCK: [2014-08-21 Thu 09:18]--[2014-08-21 Thu 10:19] =>  1:01
     CLOCK: [2014-08-20 Wed 15:00]--[2014-08-20 Wed 15:55] =>  0:55
     CLOCK: [2014-08-19 Tue 13:30]--[2014-08-19 Tue 14:59] =>  1:29
     CLOCK: [2014-08-19 Tue 11:06]--[2014-08-19 Tue 12:30] =>  1:24
     CLOCK: [2014-08-16 Sat 10:25]--[2014-08-16 Sat 12:03] =>  1:38
     CLOCK: [2014-08-15 Fri 09:30]--[2014-08-15 Fri 11:37] =>  2:07
     CLOCK: [2014-08-14 Thu 13:30]--[2014-08-14 Thu 14:09] =>  0:39
     CLOCK: [2014-08-14 Thu 10:42]--[2014-08-14 Thu 12:12] =>  1:30
     CLOCK: [2014-08-13 Wed 16:43]--[2014-08-13 Wed 16:47] =>  0:04
     CLOCK: [2014-08-13 Wed 16:00]--[2014-08-13 Wed 16:43] =>  0:43
***** DONE Read Chapter 5.5 about Importance Sampling
      CLOSED: [2014-08-21 Thu 13:38] SCHEDULED: <2014-08-21 Thu 8:00-12:00>
      CLOCK: [2014-08-21 Thu 13:15]--[2014-08-21 Thu 13:37] =>  0:22
      CLOCK: [2014-08-21 Thu 10:19]--[2014-08-21 Thu 12:24] =>  2:05
***** DONE Read Chapter 5.6 about Adaptive Sampling
      CLOSED: [2014-08-21 Thu 13:38] SCHEDULED: <2014-08-21 Thu 08:00-12:00>
***** DONE Investigate Interval Analysis again
      CLOSED: [2014-08-23 Sat 14:18] SCHEDULED: <2014-08-22 Fri 08:00-12:00>
      CLOCK: [2014-08-23 Sat 10:00]--[2014-08-23 Sat 14:18] =>  4:18

**** DONE Read userguidlines for sampling, DACE, see Chapter 4.7, Table 4.4
     CLOSED: [2014-08-24 Sun 12:22]
**** TODO Read Chapter 4 about Design of Experiments (do some examples)
     SCHEDULED: <2014-08-07 Thu 08:00-13:00>
     CLOCK: [2014-08-25 Mon 09:30]--[2014-08-25 Mon 12:10] =>  2:40
     CLOCK: [2014-08-06 Wed 09:49]--[2014-08-06 Wed 12:00] =>  2:11
***** DONE Read Chapter 4.6 about Sensitivity Analysis
      CLOSED: [2014-08-24 Sun 12:06]
      CLOCK: [2014-08-24 Sun 09:00]--[2014-08-24 Sun 12:30] =>  3:30
***** DONE Read again Chapter about Orthogonal Arrays and make an example
      CLOSED: [2014-08-26 Tue 20:17]
      CLOCK: [2014-08-26 Tue 15:00]--[2014-08-26 Tue 20:17] =>  5:17
***** DONE Write down the summaries
      CLOSED: [2014-08-26 Tue 20:17]
***** TODO Check on VBD + stochastic expansion (section 5.4)
***** TODO Review everything related to Sensitivity Analysis and finish the other third party software
      CLOCK: [2014-08-28 Thu 13:44]--[2014-08-28 Thu 17:10] =>  3:26
**** TODO Write out all methods that display correlation matrices etc.


** DONE Write Dakota Files for CCD/BB and interval analysis
   CLOSED: [2014-09-24 Wed 10:08] SCHEDULED: <2014-09-16 Tue>
   CLOCK: [2014-09-23 Tue 14:30]--[2014-09-23 Tue 15:35] =>  1:05
   CLOCK: [2014-09-22 Mon 13:30]--[2014-09-22 Mon 17:30] =>  4:00
   CLOCK: [2014-09-22 Mon 10:55]--[2014-09-22 Mon 12:30] =>  1:35
   CLOCK: [2014-09-21 Sun 19:00]--[2014-09-21 Sun 20:50] =>  1:50
   CLOCK: [2014-09-19 Fri 14:00]--[2014-09-19 Fri 17:00] =>  3:00
   CLOCK: [2014-09-19 Fri 10:30]--[2014-09-19 Fri 12:44] =>  2:14
   CLOCK: [2014-09-18 Thu 15:00]--[2014-09-18 Thu 16:05] =>  1:05
Write two dakota input files with good documentation
- one for sensitivity analysis CCD or BB
- one for interval analysis
Both files should use as interface a shell script called "npnp" and should have two dimensional parameters \(D\) and \(\mu\).
Furthermore I should investigate if both analysis can be combined.
It seems that both methods can be written into one file. See this example [[file:~/dummi/rosen_ccd.in][here]].
*** TODO Examine differences between hybrid etc.


** TODO Add Hessians to tremolo
   - Note taken on [2014-10-01 Wed 15:00] \\
     Aufgabenbesprechung mit Christian am [2014-10-01 Wed 15:00]

     1. Grundaufgabe:
        - Füge Datenstrukturen für lokale Hesse-Matrizen und zugehörige particle-Matrix-Map (Hashmap) zum Particle-struct hinzu.
        - Die Berechnung der Hesse-Matrix sollte für das Lennard-Jones-Potential in CalcLCForceForParticle aus lcforces.c geschehen. Beachte dabei:
          + Flag-Abfrage: Hessian or noHessian?
          + Finde heraus was und wo die Registrierung der Kraftfunktion dabei ist.

     2. Anmerkungen:
        - hash-tables etc. finden sich in [[file:~/tremolo/src/hash/hashtab.h]]

     3. Sonstiges:
        - Vertragsverlängerung: Christian und ich haben jetzt erst einmal eine Vertragsverlängerung von 3 Monaten festgelegt. Wir wraten jetzt zunächst die nächsten 2 Wochen zum endgültigen Entschluss ab.
   CLOCK: [2014-09-23 Tue 15:35]--[2014-09-23 Tue 17:23] =>  1:48
*** Overview
**** Basics:
Consider a system of \(N\) particles \(p_1, ..., p_N\). Then a (simple) general potential \(V\) can be written as:
\[V(p_1, ..., p_N) = \sum_{i=1}^N \sum_{j = i+1}^N U_{i,j}(p_i, p_j),\]
where \(U_{i,j}\) is the pair potential between the particles \(i\) and \(j\).

**** Ideas:
1. It is enough to consider pair potentials for the Hessians:
\[ \partial_p \partial_q V = \partial_p \partial_q U_{p,q}, \]
\[ \partial_p \partial_p V = \partial_p \partial_p \sum_{q\neq p} U_{p,q}. \]
2. Storing of the Hessians.
   - Every particle stores an array of matrices with the name 'Hessians'
   - Every particle stores a map, which mpas particle indices to array indices of 'Hessians'.

**** Questions: [1/2]
1. [X] What are the access times for map-containers?
   /Ordered map: logarithmic in size. Unordered map: constant (average case), linear in size (worst case).
2. [ ] Which operations should be possible for the Hessians?

*** DONE Understand what potentials exist, how and where they are computed.
    CLOSED: [2014-10-01 Wed 15:05]
    CLOCK: [2014-10-01 Wed 09:00]--[2014-10-01 Wed 13:19] =>  4:19
    CLOCK: [2014-09-24 Wed 10:00]--[2014-09-24 Wed 12:45] =>  2:45
A summary can be found [[file:hessians.pdf][here. ]]
*** TODO Overview of Particle struct and force computation in tremolo.
    CLOCK: [2014-09-24 Wed 13:30]--[2014-09-24 Wed 14:30] =>  1:00

**** TODO Have a look at particle.c and particle.h
     CLOCK: [2014-10-01 Wed 14:25]--[2014-10-01 Wed 15:06] =>  0:41

**** TODO Have a look at the force computation in tremolo.


*** TODO Have a look at the hash-table implementation in tremololo and hash-map implementations in general

*** TODO Add data structures to Particle struct in data.h

*** TODO Write Hessian calculation in lcforces.c

* Langfristige Aufgaben
 CLOCK: [2014-08-20 Wed 15:55]--[2014-08-20 Wed 15:55] =>  0:00
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-10-07 Tue 14:25
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :END:
 - Note taken on [2014-04-16 Wed 15:57] \\
       Besprechung mit Christian um [2014-04-16 Wed 15:57]
       Zwei Aufgabenziele:
       1. Kurzfristiges Ziel:
          Überarbeitung des "potentials" tabs
          - Übernehme Elemente von "Datafile" tab
          - Obere 2/3 des Tabs: Editor-Fenster in das ein Potentials-file geladen werden soll
                - der Editor soll die Funktionen "open" and "save" bereitstellen
                - open-button:
                  + soll erweiterbar sein (d.h. es sollen noch mögliche "Suchfunktionen" eingebunden werden können -> handler)
                  + vorerst: einen beliebigen Ordner öffnen
                  + nach .potential files filtern
                  + nachdem der Nutzer ein file ausgewählt hat, soll eine Kopie des files in den Projekt-Ordner gelegt werden mit dem Namen "PROJECTNAME.potentials"
                  + falls nach Sicherung eines .potential-files ein weiteres file geöffnet wird, soll eine Warnung zum "Datenverlust" abgegeben werden.
                - save-button:
                  + speichert die Änderungen im .potentials file.
          - Stelle sicher, dass immer ein .validates-file erzeugt wird (notfalls auch leer (default)).
       2. Langfristiges Ziel:
          - Verifizieren von Ensembles
          - etwas mit Monte-Carlo Methoden (siehe folgende Links)
                - [[file:~/Work/literature/Possible%20Master%20topics/Combining%20molecular%20dynamics%20with%20Monte%20Carlo%20simulations.pdf][Combining molecular dynamics and Monte Carlo methods]]
                - [[file:~/Work/literature/Possible%20Master%20topics/Uniform-acceptance%20force-bias%20Monte%20Carlo%20method%20with%20time%20scale%20to%20study%20solid-state%20diffusion.pdf][Uniform-acceptance force-bias Monte Carlo method]]

* DONE Add CTags to my tremolo file.
   CLOSED: [2014-11-05 Wed 16:05]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-11-05 Wed 16:06
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
In order to create the tags I ran the following command:
: find. -type f -iname "*.[xhS]" |xargs etags -a

In emacs ctags can be handled with the following commands:
- =M-. <RET>= :: Jump to the tag underneath the cursor.
- =M-. <tag> <RET>= :: Search for a particular tag.
- =C-u M-.= :: Find the next definition for the last tag.
- =M-*= :: Pop back where you previously invoked "M-.".

* DONE Learn Dakota
  CLOSED: [2014-09-12 Fri 11:27]
  CLOCK: [2014-07-29 Tue 14:09]--[2014-07-29 Tue 17:48] =>  3:39
  CLOCK: [2014-07-23 Wed 14:00]--[2014-07-23 Wed 16:56] =>  2:56
  CLOCK: [2014-07-22 Tue 14:00]--[2014-07-22 Tue 17:22] =>  3:22
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-12-12 Fri 09:54
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
  - Note taken on [2014-08-20 Wed 15:56] \\
    Treffen mit Christian am 20.08.2014

    Weiteres Vorgehen:
    1. Abschluss der Sampling Methoden
    2. Details zu den Intervall-Methoden:
       - Kosten
       - Lokale vs. Global (beides ausprobieren)
    3. Weitere Recherche zu sensitivity analysis: Main variables...
  - Note taken on [2014-08-13 Wed 15:38] \\
    Besprechung mit Christian am 13.08.2014, 15:00 Uhr
    1. Festlegung der Parameter Variablen und Response functions.
       Wird die Simulation als Blackbox betrachtet, ist folgender Input für die Analyse von Bedeutung:
       - (1 - n) Diffusionskoeffizienten + Unschärfe, d.h.
         D_0 + \Delta D_0, D_1 + \Delta D_1, D_2 + \Delta D_2, ... ,
         wobei n wahrscheinlich bei 1 - 10 liegt.
       - (1 - n) Gradienten von Chemischen Potenzialen + Unschärfe, d.h.
         \nable \mu_0 + \Delta \nabla \mu_0, \nable \mu_1 + \Delta \nabla \mu_1, \nable \mu_2 + \Delta \nabla \mu_2,...
       Als Output erhalten wir den (elektrischen) Fluss.
       Notizen: Die Diffusionskoeffizienten sind in der Simulation von der Konzentration abhängig. Wir erhalten als Datensätze die Werte von Diffusionskoeffizient+Unschärfe und vom chemischen Potenzial+Unschärfe für verschiedene Konzentrationswerte.
       Die Anzahl der Input Variablen hängt somit auch von der Genauigkeit der Datensätze ab: Bei geringer Genauigkeit kann es sein, dass eine Änderung der Konzentration nicht einen anderen Wert des Diffusionskoeffizienten erfordert.
       Mögliches Szenario wäre also z. Bsp.
       - Input:
         - D_0, D_1, D_2, D_3
         - mu_0, mu_1, mu_2
       - Output:
         - Fluss
       Die Samples müssen dann dem durch die Unschärfen definierten Bereichen entnommen werden.
    2. Aufgabe.
       Ich soll die von Dakota bereitgestellten Methoden von UQ, Parameter Studies, DoE, Sensitivity Analysis durchsuchen und nach geeigneten Methoden suchen.
       Es sollen folgende Aussagen gemacht werden können:
       - Welche Parameter (welche Diffusionskoeffizienten, welche Potentiale) sind entscheidend für den Fluss?
       - Wie sensibel ist der Output gegenüber den Veränderungen an den Input Variablen?
  - Note taken on [2014-07-23 Wed 17:00] \\
    All notes can be found in [[file:~/dakota/dakota-notes/notes.org][this]] org file.
  - Note taken on [2014-07-22 Tue 17:11] \\
    Aufgabenbeschreibung:

    Im Zuge einer Software zur Ionen-Migration (Berechnung über die Poisson-Nernst-Planck Gleichung) soll ein script geschrieben werden, dass als Input Diffusionswerte, chemisches Potential und erwartete Fehler entgegennimmt und anschließend den elektrischen Fluß bestimmt.
    Dazu soll das Optimierungsprogramm DAKOTA (Design Analysis Kit for Optimization and Terascale Applications) von den SNL verwendet werden.

    Meine Aufgabe ist es nun
    1. Mache mich Dakota vertraut
       + Lese das gesamte Manual (Version 5.4).
       + Schaue, was für das obige Problem wichtig sein kann.
    2. Schreibe ein Script (nach Absprache mit Christian)

    _Poisson-Nernst-Planck Gleichung_
    \partial_t c = \nabla [D (\nabla c + \alpha \nabla \phi + \beta c \nabla \mu )]
    \Delta \phi = \sum_i z_i c_i
** DONE Installiere Dakota
    CLOSED: [2014-07-23 Wed 16:56]
Problem: Falsche Boost Version?

** DONE Make short overview about Dakota
   CLOSED: [2014-08-05 Tue 10:13] SCHEDULED: <2014-07-24 Thu>
*** DONE Do Second Part of Dakota Tutorial (Chapter two of the manual)
    CLOSED: [2014-08-04 Mon 10:43] SCHEDULED: <2014-07-31 Thu 8:00-12:00>
    CLOCK: [2014-08-04 Mon 10:19]--[2014-08-04 Mon 10:43] =>  0:24
    CLOCK: [2014-07-31 Thu 10:04]--[2014-07-31 Thu 11:55] =>  1:51
    CLOCK: [2014-07-30 Wed 17:52]--[2014-07-30 Wed 19:34] =>  1:42
    CLOCK: [2014-07-30 Wed 15:45]--[2014-07-30 Wed 16:25] =>  0:40
    CLOCK: [2014-07-30 Wed 15:20]--[2014-07-30 Wed 15:30] =>  0:10
    CLOCK: [2014-07-30 Wed 14:34]--[2014-07-30 Wed 15:20] =>  0:46
** DONE Learn about the Poisson-Nernst-Planck Equation and ionic migration
    CLOSED: [2014-08-06 Wed 09:08] SCHEDULED: <2014-08-02 Sat>
    CLOCK: [2014-08-04 Mon 09:09]--[2014-08-04 Mon 10:12] =>  1:03
The theory can be found in [[file:~/dakota/dakota-notes/diplom_neuen.pdf][Christians diploma thesis]].

** TODO Read Chapter about Parameter studies and UQ
   SCHEDULED: <2014-08-04 Mon 8:00-12:00>
   CLOCK: [2014-08-06 Wed 14:00]--[2014-08-06 Wed 14:38] =>  0:38
   CLOCK: [2014-08-04 Mon 11:41]--[2014-08-04 Mon 12:49] =>  1:08
   CLOCK: [2014-08-04 Mon 10:44]--[2014-08-04 Mon 11:12] =>  0:28
   - Note taken on [2014-07-31 Thu 11:51] \\
     Meeting with Christian Thu, 31 Jul 2014 11:30

     - How to read correlation matrices in Figure 2.10
     - Read everything about parameter studies and uncertainty quantification (design of experiments)
     - aim: star correlations for diffusion D and chemical potential \mu in dependance of the concentration
       - are there such a thing?
       - want to know: if D differs 5% to above, how much does the flux F change?
*** DONE Finish Chapter about Parameter Studies (do some examples)
    CLOSED: [2014-08-05 Tue 12:44] SCHEDULED: <2014-08-05 Tue 8:00-13:00>
    CLOCK: [2014-08-05 Tue 10:00]--[2014-08-05 Tue 12:43] =>  2:43
*** DONE What does the correlation matrices mean?
    CLOSED: [2014-08-13 Wed 15:58]
    CLOCK: [2014-08-13 Wed 13:20]--[2014-08-13 Wed 15:58] =>  2:38
    CLOCK: [2014-08-13 Wed 10:35]--[2014-08-13 Wed 12:20] =>  1:45
    Notes can be found in the [[file:~/dakota/dakota-notes/notes.org][Dakota-Notes-file]].
*** DONE Read Chapter 5 about Uncertainty Quantification Capabilites [3/3]
    CLOSED: [2014-08-23 Sat 14:18] SCHEDULED: <2014-08-20 Wed 08:00-13:00>
    CLOCK: [2014-08-21 Thu 09:18]--[2014-08-21 Thu 10:19] =>  1:01
    CLOCK: [2014-08-20 Wed 15:00]--[2014-08-20 Wed 15:55] =>  0:55
    CLOCK: [2014-08-19 Tue 13:30]--[2014-08-19 Tue 14:59] =>  1:29
    CLOCK: [2014-08-19 Tue 11:06]--[2014-08-19 Tue 12:30] =>  1:24
    CLOCK: [2014-08-16 Sat 10:25]--[2014-08-16 Sat 12:03] =>  1:38
    CLOCK: [2014-08-15 Fri 09:30]--[2014-08-15 Fri 11:37] =>  2:07
    CLOCK: [2014-08-14 Thu 13:30]--[2014-08-14 Thu 14:09] =>  0:39
    CLOCK: [2014-08-14 Thu 10:42]--[2014-08-14 Thu 12:12] =>  1:30
    CLOCK: [2014-08-13 Wed 16:43]--[2014-08-13 Wed 16:47] =>  0:04
    CLOCK: [2014-08-13 Wed 16:00]--[2014-08-13 Wed 16:43] =>  0:43
**** DONE Read Chapter 5.5 about Importance Sampling
     CLOSED: [2014-08-21 Thu 13:38] SCHEDULED: <2014-08-21 Thu 8:00-12:00>
     CLOCK: [2014-08-21 Thu 13:15]--[2014-08-21 Thu 13:37] =>  0:22
     CLOCK: [2014-08-21 Thu 10:19]--[2014-08-21 Thu 12:24] =>  2:05
**** DONE Read Chapter 5.6 about Adaptive Sampling
     CLOSED: [2014-08-21 Thu 13:38] SCHEDULED: <2014-08-21 Thu 08:00-12:00>
**** DONE Investigate Interval Analysis again
     CLOSED: [2014-08-23 Sat 14:18] SCHEDULED: <2014-08-22 Fri 08:00-12:00>
     CLOCK: [2014-08-23 Sat 10:00]--[2014-08-23 Sat 14:18] =>  4:18

*** DONE Read userguidlines for sampling, DACE, see Chapter 4.7, Table 4.4
    CLOSED: [2014-08-24 Sun 12:22]
*** TODO Read Chapter 4 about Design of Experiments (do some examples)
    SCHEDULED: <2014-08-07 Thu 08:00-13:00>
    CLOCK: [2014-08-25 Mon 09:30]--[2014-08-25 Mon 12:10] =>  2:40
    CLOCK: [2014-08-06 Wed 09:49]--[2014-08-06 Wed 12:00] =>  2:11
**** DONE Read Chapter 4.6 about Sensitivity Analysis
     CLOSED: [2014-08-24 Sun 12:06]
     CLOCK: [2014-08-24 Sun 09:00]--[2014-08-24 Sun 12:30] =>  3:30
**** DONE Read again Chapter about Orthogonal Arrays and make an example
     CLOSED: [2014-08-26 Tue 20:17]
     CLOCK: [2014-08-26 Tue 15:00]--[2014-08-26 Tue 20:17] =>  5:17
**** DONE Write down the summaries
     CLOSED: [2014-08-26 Tue 20:17]
**** TODO Check on VBD + stochastic expansion (section 5.4)
**** TODO Review everything related to Sensitivity Analysis and finish the other third party software
     CLOCK: [2014-08-28 Thu 13:44]--[2014-08-28 Thu 17:10] =>  3:26
*** TODO Write out all methods that display correlation matrices etc.



* DONE Write Dakota Files for CCD/BB and interval analysis
   CLOSED: [2014-09-24 Wed 10:08] SCHEDULED: <2014-09-16 Tue>
   CLOCK: [2014-09-23 Tue 14:30]--[2014-09-23 Tue 15:35] =>  1:05
   CLOCK: [2014-09-22 Mon 13:30]--[2014-09-22 Mon 17:30] =>  4:00
   CLOCK: [2014-09-22 Mon 10:55]--[2014-09-22 Mon 12:30] =>  1:35
   CLOCK: [2014-09-21 Sun 19:00]--[2014-09-21 Sun 20:50] =>  1:50
   CLOCK: [2014-09-19 Fri 14:00]--[2014-09-19 Fri 17:00] =>  3:00
   CLOCK: [2014-09-19 Fri 10:30]--[2014-09-19 Fri 12:44] =>  2:14
   CLOCK: [2014-09-18 Thu 15:00]--[2014-09-18 Thu 16:05] =>  1:05
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-12-12 Fri 09:55
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
Write two dakota input files with good documentation
- one for sensitivity analysis CCD or BB
- one for interval analysis
Both files should use as interface a shell script called "npnp" and should have two dimensional parameters \(D\) and \(\mu\).
Furthermore I should investigate if both analysis can be combined.
It seems that both methods can be written into one file. See this example [[file:~/dummi/rosen_ccd.in][here]].
** TODO Examine differences between hybrid etc.



* DONE Bug in tremologui
  CLOSED: [2014-10-28 Tue 09:56]
  :PROPERTIES:
  :ARCHIVE_TIME: 2014-12-12 Fri 09:55
  :ARCHIVE_FILE: ~/Work/todos/todos.org
  :ARCHIVE_OLPATH: Aufgaben
  :ARCHIVE_CATEGORY: todos
  :ARCHIVE_TODO: DONE
  :END:
  - Note taken on [2014-10-17 Fri 12:06] \\
    Notes:
    Created bug issue in redmine.
    Note that in the Simulation Parameters tab, under Integration and domain, the cube is not displayed!


